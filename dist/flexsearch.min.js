/*
 FlexSearch v0.5.3
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(z,G,k){let A;(A=k.define)&&A.amd?A([],function(){return G}):(A=k.modules)?A[z.toLowerCase()]=G:"object"===typeof exports?module.exports=G:k[z]=G})("FlexSearch",function X(z){function k(a,c){const b=c?c.id:a&&a.id;this.id=b||0===b?b:Y++;this.init(a,c);H(this,"index",function(){return this.b});H(this,"length",function(){return Object.keys(this.b).length})}function A(a,c,b,d){this.v!==this.g&&(this.o=this.o.concat(b),this.v++,d&&this.o.length>=d&&(this.v=this.g),this.v===this.g&&
(this.cache&&this.l.set(c,this.o),this.G&&this.G(this.o)));return this}function I(a,c){const b=a.length,d=E(c),e=[];for(let f=0,h=0;f<b;f++){const b=a[f];if(d&&c(b)||!d&&!c[b])e[h++]=b}return e}function K(a,c,b,d,e,f,h){const m=this.h;c=b=P(b,c,f?0:e,h,this.u);b=c.length;h=Array(b);for(let a=0;a<b;a++)h[a]=m[c[a]];b=h;f&&(b=this.where(f,null,e,b));d&&(E(d)||(B=d.split(":"),1<B.length?d=Z:(B=B[0],d=aa)),b.sort(d));this.cache&&this.l.set(a,b);return b}function H(a,c,b){Object.defineProperty(a,c,{get:b})}
function g(a){return new RegExp(a,"g")}function F(a,c){for(let b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);return a}function L(a,c,b,d,e,f,h,m){if(c[b])return c[b];e=e?(m-(h||m/1.5))*f+(h||m/1.5)*e:f;c[b]=e;e>=h&&(a=a[m-(e+.5>>0)],a=a[b]||(a[b]=[]),a[a.length]=d);return e}function N(a,c){if(a){const b=Object.keys(a);for(let d=0,e=b.length;d<e;d++){const e=b[d],h=a[e];if(h)for(let b=0,d=h.length;b<d;b++)if(h[b]===c){1===d?delete a[e]:h.splice(b,1);break}else C(h[b])&&N(h[b],c)}}}function O(a){let c=
"",b="";var d="";for(let e=0;e<a.length;e++){const f=a[e];if(f!==b)if(e&&"h"===f){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===b||"e"===b||"i"===b||"o"===b||"u"===b||"y"===b)&&d||" "===b)c+=f}else c+=f;d=e===a.length-1?"":a[e+1];b=f}return c}function ba(a,c){a=a.length-c.length;return 0>a?1:a?-1:0}function aa(a,c){a=a[B];c=c[B];return a<c?-1:a>c?1:0}function Z(a,c){const b=B.length;for(let d=0;d<b;d++)a=a[B[d]],c=c[B[d]];return a<c?-1:a>c?1:0}function P(a,c,b,d,e){d=[];let f;const h=
a.length;if(1<h){c="or"===c;const t=u();let g,n=-1,l,p=0,k,x,R=!0,v=0;for(;++n<h;){const r=n===h-1;g=a[n];l=g.length;if(!l){if(!c&&!e)return d;if(r&&!v)return k||d;continue}if(R){if(r)return g;for(;p<l;)t["@"+g[p++]]=1;k=g;R=!1;continue}let Q=!1;f=[];for(p=0;p<l;){x=g[p++];var m="@"+x;if(t[m]){const a=t[m];if(c||a===n){if(r){if(d[v++]=x,b&&v===b)return d}else t[m]=n+1;Q=!0}else e&&(m=f[a]||(f[a]=[]),m[m.length]=x)}}if(!Q&&!e)break}if(e&&(v=d.length,(n=f.length)&&(!b||v<b)))for(;n--;)if(x=f[n])for(p=
0,l=x.length;p<l;p++)if(d[v++]=x[p],b&&v===b)return d}else h&&(d=a[0],b&&d.length>b&&(d=d.slice(0,b)));return d}function D(a){return"string"===typeof a}function y(a){return a.constructor===Array}function E(a){return"function"===typeof a}function C(a){return"object"===typeof a}function w(a){return"undefined"===typeof a}function S(a){const c=Array(a);for(let b=0;b<a;b++)c[b]=u();return c}function u(){return Object.create(null)}function ca(){let a,c;self.onmessage=function(b){if(b=b.data)if(b.search){const d=
c.search(b.content,b.threshold?{limit:b.limit,threshold:b.threshold,where:b.where}:b.limit);self.postMessage({id:a,content:b.content,limit:b.limit,result:d})}else b.add?c.add(b.id,b.content):b.update?c.update(b.id,b.content):b.remove?c.remove(b.id):b.clear?c.clear():b.info?(b=c.info(),b.worker=a,console.log(b)):b.register&&(a=b.id,b.options.cache=!1,b.options.async=!1,b.options.worker=!1,c=(new Function(b.register.substring(b.register.indexOf("{")+1,b.register.lastIndexOf("}"))))(),c=new c(b.options))}}
function da(a,c,b,d){a=z("flexsearch","id"+a,ca,function(a){(a=a.data)&&a.result&&d(a.id,a.content,a.result,a.limit,a.where,a.cursor,a.suggest)},c);const e=X.toString();b.id=c;a.postMessage({register:e,options:b,id:c});return a}const q={encode:"icase",f:"forward",u:!1,cache:!1,async:!1,g:!1,F:!1,a:!1,J:!1,c:9,threshold:0,depth:0},T={memory:{encode:"extra",f:"strict",threshold:0,c:1},speed:{encode:"icase",f:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",f:"full",threshold:1,c:3},score:{encode:"extra",
f:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,c:9,depth:1}},M=[];let Y=0;const U=/\W+/,V={},W={};k.create=function(a){return new k(a)};k.registerMatcher=function(a){for(const c in a)a.hasOwnProperty(c)&&M.push(g(c),a[c]);return this};k.registerEncoder=function(a,c){J[a]=c.bind(J);return this};k.registerLanguage=function(a,c){V[a]=c.filter;W[a]=c.stemmer;return this};k.encode=function(a,c){return J[a](c)};
k.prototype.init=function(a,c){this.w=[];if(c){var b=c.preset;a=c}else a||(a=q),b=a.preset;c={};D(a)?(c=T[a],a={}):b&&(c=T[b]);if(b=a.worker)if("undefined"===typeof Worker)a.worker=!1,this.m=null;else{var d=parseInt(b,10)||4;this.D=-1;this.v=0;this.o=[];this.G=null;this.m=Array(d);for(var e=0;e<d;e++)this.m[e]=da(this.id,e,a,A.bind(this))}this.f=a.tokenize||c.f||this.f||q.f;this.F=a.rtl||this.F||q.F;this.async="undefined"===typeof Promise||w(b=a.async)?this.async||q.async:b;this.g=w(b=a.worker)?this.g||
q.g:b;this.threshold=w(b=a.threshold)?c.threshold||this.threshold||q.threshold:b;this.c=w(b=a.resolution)?b=c.c||this.c||q.c:b;b<=this.threshold&&(this.c=this.threshold+1);this.depth=w(b=a.depth)?c.depth||this.depth||q.depth:b;this.J=w(b=a.paging)?this.J||q.J:b;this.u=w(b=a.suggest)?this.u||q.u:b;this.A=(b=w(b=a.encode)?c.encode||q.encode:b)&&J[b]&&J[b].bind(J)||(E(b)?b:this.A||!1);(b=a.matcher)&&this.addMatcher(b);if(b=a.filter){D(b)&&(b=V[b]);if(y(b)){c=this.A;d=u();for(e=0;e<b.length;e++){var f=
c?c(b[e]):b[e];d[f]=1}b=d}this.filter=b}if(b=a.stemmer){var h;c=D(b)?W[b]:b;d=this.A;e=[];for(h in c)c.hasOwnProperty(h)&&(f=d?d(h):h,e.push(g(f+"($|\\W)"),d?d(c[h]):c[h]));this.stemmer=h=e}this.a=e=(b=a.doc)?b:this.a||q.a;this.i=S(this.c-(this.threshold||0));this.j=u();this.b=u();if(e){this.h=u();a.doc=null;h=e.index={};c=e.keys=[];d=e.field;f=e.tag;y(e.id)||(e.id=e.id.split(":"));if(f){this.H=u();let c=u();if(d)if(D(d))c[d]=a;else if(y(d))for(let b=0;b<d.length;b++)c[d[b]]=a;else C(d)&&(c=d);y(f)||
(e.tag=f=[f]);for(d=0;d<f.length;d++)this.H[f[d]]=u();this.K=f;d=c}if(d){let b;y(d)||(C(d)?(b=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)f=d[e],y(f)||(b&&(a=b[f]),c[e]=f,d[e]=f.split(":")),h[f]=new k(a),h[f].h=this.h}}this.C=!0;this.l=(this.cache=b=w(b=a.cache)?this.cache||q.cache:b)?new ea(b):!1;return this};k.prototype.encode=function(a){a&&M.length&&(a=F(a,M));a&&this.w.length&&(a=F(a,this.w));a&&this.A&&(a=this.A(a));a&&this.stemmer&&(a=F(a,this.stemmer));return a};k.prototype.addMatcher=
function(a){const c=this.w;for(const b in a)a.hasOwnProperty(b)&&c.push(g(b),a[b]);return this};k.prototype.add=function(a,c,b,d,e){if(this.a&&C(a))return this.B("add",a,c);if(c&&D(c)&&(a||0===a)){var f="@"+a;if(this.b[f]&&!d)return this.update(a,c);if(this.g)return++this.D>=this.m.length&&(this.D=0),this.m[this.D].postMessage({add:!0,id:a,content:c}),this.b[f]=""+this.D,b&&b(),this;if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;f=new Promise(function(b){setTimeout(function(){e.add(a,
c,null,d,!0);e=null;b()})});if(b)f.then(b);else return f;return this}if(b)return this.add(a,c,null,d,!0),b(),this}c=this.encode(c);if(!c.length)return this;b=this.f;e=E(b)?b(c):c.split(U);this.filter&&(e=I(e,this.filter));const l=u();l._ctx=u();const p=e.length,k=this.threshold,x=this.depth,r=this.c,v=this.i,q=this.F;for(let c=0;c<p;c++){var h=e[c];if(h){var m=h.length,t=(q?c+1:p-c)/p,g="";switch(b){case "reverse":case "both":for(var n=m;--n;)g=h[n]+g,L(v,l,g,a,q?1:(m-n)/m,t,k,r-1);g="";case "forward":for(n=
0;n<m;n++)g+=h[n],L(v,l,g,a,q?(n+1)/m:1,t,k,r-1);break;case "full":for(n=0;n<m;n++){const c=(q?n+1:m-n)/m;for(let b=m;b>n;b--)g=h.substring(n,b),L(v,l,g,a,c,t,k,r-1)}break;default:if(m=L(v,l,h,a,1,t,k,r-1),x&&1<p&&m>=k)for(m=l._ctx[h]||(l._ctx[h]=u()),h=this.j[h]||(this.j[h]=S(r-(k||0))),t=c-x,g=c+x+1,0>t&&(t=0),g>p&&(g=p);t<g;t++)t!==c&&L(h,m,e[t],a,0,r-(t<c?c-t:t-c),k,r-1)}}}this.b[f]=1;this.C=!1}return this};k.prototype.B=function(a,c,b){if(y(c))for(let d=0,e=c.length;d<e;d++){if(d===e-1)return this.B(a,
c[d],b);this.B(a,c[d])}else{const g=this.a.index,k=this.a.keys;var d=this.a.tag,e=this.a.id;let n;let l;for(var f=0;f<e.length;f++)n=(n||c)[e[f]];if(d){for(e=0;e<d.length;e++){var h=d[e];var m=h.split(":");for(f=0;f<m.length;f++)l=(l||c)[m[f]];l="@"+l}m=this.H[h];m=m[l]||(m[l]=[])}if("remove"===a){delete this.h[n];for(let a=0,c=k.length;a<c;a++){if(a===c-1)return g[k[a]].remove(n,b);g[k[a]].remove(n)}}e=this.a.field;m&&(m[m.length]=c);for(let f=0,m=e.length;f<m;f++){d=e[f];let l;for(h=0;h<d.length;h++)l=
(l||c)[d[h]];this.h[n]=c;d=g[k[f]];h="add"===a?d.add:d.update;if(f===m-1)return h.call(d,n,l,b);h.call(d,n,l)}}};k.prototype.update=function(a,c,b){if(this.a&&C(a))return this.B("update",a,c);this.b["@"+a]&&D(c)&&(this.remove(a),this.add(a,c,b,!0));return this};k.prototype.remove=function(a,c,b){if(this.a&&C(a))return this.B("remove",a,c);var d="@"+a;if(this.b[d]){if(this.g)return this.m[this.b[d]].postMessage({remove:!0,id:a}),delete this.b[d],c&&c(),this;if(!b){if(this.async&&"function"!==typeof importScripts){let b=
this;d=new Promise(function(c){setTimeout(function(){b.remove(a,null,!0);b=null;c()})});if(c)d.then(c);else return d;return this}if(c)return this.remove(a,null,!0),c(),this}for(c=0;c<this.c-(this.threshold||0);c++)N(this.i[c],a);this.depth&&N(this.j,a);delete this.b[d];this.C=!1}return this};let B;k.prototype.search=function(a,c,b,d){if(C(c)){if(y(c))for(var e=0;e<c.length;e++)c[e].query=a;else c.query=a;a=c;c=0}let f=a;let h=[];if(C(a)&&!y(a)){(b=a.callback||c)&&(f.callback=null);c=a.limit;var m=
a.threshold;a=a.query}if(this.a){let d=f.where,e=f.bool,p=f.sort;m=this.a.index;var g=f.field;if(g)f.field=null,y(g)||(g=[g]);else if(y(f)){var k=f;g=[];for(var n=0;n<f.length;n++){var l=f[n];g[n]=l.field;e=l.bool;p=l.sort;d=l.where}}else g=this.a.keys;n=g.length;for(l=0;l<n;l++)k&&(f=k[l]),h[l]=m[g[l]].search(f);if(b)return b(K.call(this,a,e,h,p,c,d,void 0));if(this.async){const b=this;return new Promise(function(f){Promise.all(h).then(function(h){f(K.call(b,a,e,h,p,c,d,void 0))})})}return K.call(this,
a,e,h,p,c,d,void 0)}m||(m=this.threshold||0);E(c)?(b=c,c=1E3):c||0===c||(c=1E3);if(this.g)for(this.G=b,this.v=0,this.o=[],g=0;g<this.g;g++)this.m[g].postMessage({search:!0,limit:c,cursor:void 0,threshold:m,content:a});else{if(!d){if(this.async&&"function"!==typeof importScripts){let a=this;m=new Promise(function(b){setTimeout(function(){b(a.search(f,c,null,!0));a=null})});if(b)m.then(b);else return m;return this}if(b)return b(this.search(f,c,null,!0)),this}if(!a||!D(a))return h;f=a;if(this.cache)if(this.C){if(b=
this.l.get(a))return b}else this.l.clear(),this.C=!0;f=this.encode(f);if(!f.length)return h;b=this.f;b=E(b)?b(f):f.split(U);this.filter&&(b=I(b,this.filter));k=b.length;d=!0;e=[];var p=u();1<k&&(this.depth?(g=!0,l=b[0],p[l]=1):b.sort(ba));if(!g||(n=this.j)[l]){let a=this.c;for(let c=g?1:0;c<k;c++){const f=b[c];if(f){if(!p[f]){const c=[];let b=!1,h=0;if(l=g?n[l]:this.i){let d;for(let e=0;e<a-m;e++)if(d=l[e][f])c[h++]=d,b=!0}if(b)e[e.length]=1<h?c.concat.apply([],c):c[0];else if(!this.u){d=!1;break}p[f]=
1}l=f}}}else d=!1;this.a||(d&&(h=P(e,!1,c,void 0,this.u)),this.cache&&this.l.set(a,h));return h}};k.prototype.find=function(a,c){return this.where(a,c,1)[0]||null};k.prototype.where=function(a,c,b,d){const e=d||this.h,f=[];let h=0;var g;let k;if("number"===typeof a)return[e[a]];if(D(a)){if(w(c))return[e[a]];if("id"===a)return[e[c]];var r=1;var n=[a.split(":")];k=!0}else{if(E(a)){c=d||Object.keys(e);b=c.length;for(g=0;g<b;g++)r=d?d[g]:e[c[g]],a(r)&&(f[h++]=r);return f}b||(b=c);g=Object.keys(a);r=g.length;
k=!1;if(1===r&&"id"===g[0])return[e[a.id]];if((n=this.K)&&!d)for(var l=0;l<n.length;l++){var p=n[l],q=a[p];if(!w(q)){d=this.H[p]["@"+q];if(0===--r)return d;g.splice(g.indexOf(p),1);delete a[p];break}}n=Array(r);for(l=0;l<r;l++)n[l]=g[l].split(":")}l=d||Object.keys(e);p=l.length;for(q=0;q<p;q++){const m=d?d[q]:e[l[q]];let p=!0;for(let b=0;b<r;b++){k||(c=a[g[b]]);const d=n[b],e=d.length;let f=m;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==c){p=!1;break}}if(p&&(f[h++]=m,b&&h===b))break}return f};
k.prototype.info=function(){if(this.g)for(var a=0;a<this.g;a++)this.m[a].postMessage({info:!0,id:this.id});else{var c=0,b=0,d=0;for(var e=0;e<this.c-(this.threshold||0);e++){a=Object.keys(this.i[e]);for(let g=0;g<a.length;g++){var f=this.i[e][a[g]].length;c+=1*f+2*a[g].length+4;b+=f;d+=2*a[g].length}}a=Object.keys(this.b);f=a.length;for(e=0;e<f;e++)c+=2*a[e].length+2;return{id:this.id,memory:c,items:f,sequences:b,chars:d,cache:this.cache&&this.cache.s?this.cache.s.length:!1,matcher:M.length+(this.w?
this.w.length:0),worker:this.g,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.f}}};k.prototype.clear=function(){return this.destroy().init()};k.prototype.destroy=function(){this.cache&&(this.l.clear(),this.l=null);this.i=this.j=this.b=null;if(this.a){const a=this.a.keys;for(let c=0;c<a.length;c++)this.a.index[a[c]].destroy();this.a=this.h=null}return this};k.prototype.export=function(){if(this.a){const a=this.a.keys,c=Array(a.length+1);let b=0;for(;b<a.length;b++){const d=
this.a.index[a[b]];c[b]=[d.i,d.j,d.b]}c[b]=this.h;return JSON.stringify(c)}return JSON.stringify([this.i,this.j,this.b])};k.prototype.import=function(a){a=JSON.parse(a);if(this.a){const c=this.a.keys,b=c.length;for(let d=0;d<b;d++){const e=this.a.index[c[d]];e.i=a[d][0];e.j=a[d][1];e.b=a[d][2];e.h=a[b]}this.h=a[b]}else this.i=a[0],this.j=a[1],this.b=a[2]};const J={icase:function(a){return a.toLowerCase()},simple:function(){const a=[g("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",g("[\u00e8\u00e9\u00ea\u00eb]"),
"e",g("[\u00ec\u00ed\u00ee\u00ef]"),"i",g("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",g("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",g("[\u00fd\u0177\u00ff]"),"y",g("\u00f1"),"n",g("\u00e7"),"c",g("\u00df"),"s",g(" & ")," and ",g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(c){c=F(c.toLowerCase(),a);return" "===c?"":c}}(),advanced:function(){const a=[g("ae"),"a",g("ai"),"ei",g("ay"),"ei",g("ey"),"ei",g("oe"),"o",g("ue"),"u",g("ie"),"i",g("sz"),"s",g("zs"),"s",g("sh"),"s",g("ck"),"k",
g("cc"),"k",g("dt"),"t",g("ph"),"f",g("pf"),"f",g("ou"),"o",g("uo"),"u"];return function(c,b){if(!c)return c;c=this.simple(c);2<c.length&&(c=F(c,a));b||1<c.length&&(c=O(c));return c}}(),extra:function(){const a=[g("p"),"b",g("z"),"s",g("[cgq]"),"k",g("n"),"m",g("d"),"t",g("[vw]"),"f",g("[aeiouy]"),""];return function(c){if(!c)return c;c=this.advanced(c,!0);if(1<c.length){c=c.split(" ");for(let b=0;b<c.length;b++){const d=c[b];1<d.length&&(c[b]=d[0]+F(d.substring(1),a))}c=c.join(" ");c=O(c)}return c}}(),
balance:function(){const a=[g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(c){return O(F(c.toLowerCase(),a))}}()},ea=function(){function a(a){this.clear();this.I=!0!==a&&a}a.prototype.clear=function(){this.cache=u();this.count=u();this.index=u();this.s=[]};a.prototype.set=function(a,b){if(this.I&&w(this.cache[a])){let c=this.s.length;if(c===this.I){c--;const a=this.s[c];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=c;this.s[c]=a;this.count[a]=-1;this.cache[a]=
b;this.get(a)}else this.cache[a]=b};a.prototype.get=function(a){const b=this.cache[a];if(this.I&&b){var c=++this.count[a];const b=this.index;let d=b[a];if(0<d){const f=this.s;for(var e=d;this.count[f[--d]]<=c&&-1!==d;);d++;if(d!==e){for(c=e;c>d;c--)e=f[c-1],f[c]=e,b[e]=c;f[d]=a;b[a]=d}}}return b};return a}();return k}(function(){const z={},G="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;return function(k,A,I,K,H){I=G?URL.createObjectURL(new Blob(["("+I.toString()+")()"],
{type:"text/javascript"})):k+".min.js";k+="-"+A;z[k]||(z[k]=[]);z[k][H]=new Worker(I);z[k][H].onmessage=K;return z[k][H]}}()),this);
