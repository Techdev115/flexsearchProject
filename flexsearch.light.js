/*
 FlexSearch v0.2.70
 Copyright 2018 Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(d,x,p){var t;(t=p.define)&&t.amd?t([],function(){return x}):(t=p.modules)?t[d.toLowerCase()]=x:"undefined"!==typeof module?module.exports=x:p[d]=x})("FlexSearch",function(){function d(a){"string"!==typeof a||v[a]||(a=D[a]);a||(a=y);this.id=a.id||I++;this.init(a);x(this,"index",function(){return this.a});x(this,"length",function(){return Object.keys(this.a).length})}function x(a,b,c){Object.defineProperty(a,b,{get:c})}function p(a){return new RegExp(a,"g")}function t(a,b,c){if("undefined"===
typeof c){for(c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}return a.replace(b,c)}function A(a,b,c,e,f,q,g){if(b[c])return b[c];f=f?(9-(g||6))*q+(g||6)*f:q;b[c]=f;f>=g&&(a=a[f+.5|0],a=a[c]||(a[c]=[]),a[a.length]=e);return f}function B(a,b){if(a)for(var c=Object.keys(a),e=0,f=c.length;e<f;e++){var q=c[e],g=a[q];if(g)for(var l=0,h=g.length;l<h;l++)if(g[l]===b){1===h?delete a[q]:g.splice(l,1);break}else"object"===typeof g[l]&&B(g[l],b)}}function E(a){var b=[];if(!a)return b;for(var c=0,e=0,f=
0,q="",g=a.length,l=0;l<g;l++){var h=a[l];"a"===h||"e"===h||"i"===h||"o"===h||"u"===h||"y"===h?c++:e++;" "!==h&&(q+=h);if(" "===h||c>=(8<g?2:1)&&2<=e||2<=c&&e>=(8<g?2:1)||l===g-1)q&&(b[f]&&2<q.length&&f++,b[f]=b[f]?b[f]+q:q," "===h&&f++,q=""),e=c=0}return b}function J(a,b){a=a.length-b.length;return 0>a?1:0<a?-1:0}function K(a,b){a=a.length-b.length;return 0>a?-1:0<a?1:0}function L(a,b,c){var e=[],f=[],q=a.length;if(1<q){a.sort(K);for(var g=u(),l=a[0],h=l.length,z=0;z<h;)g[l[z++]]=1;for(var m,d=0,
n=1;n<q;){var k=!1,p=n===q-1;f=[];l=a[n];h=l.length;for(z=-1;z<h;)if(m=l[++z],g[m]){var r=g[m];if(r===n){if(p){if(e[d++]=m,b&&d===b)return e}else g[m]=n+1;k=!0}else c&&(r=f[r]?f[r]:f[r]=[],r[r.length]=m)}if(!k&&!c)break;n++}if(c&&(d=e.length,(h=f.length)&&(!b||d<b)))for(n=h-1;0<=n;n--)if(m=f[n])for(z=0;z<m.length;z++)if(e[d++]=m[z],b&&d===b)return e}else q&&(e=a[0],b&&e.length>b&&(e=e.slice(0,b)));return e}function u(a){if(a){for(var b=Array(a),c=0;c<a;c++)b[c]=Object.create(null);return b}return Object.create(null)}
var y={encode:"icase",mode:"forward",f:!1,cache:!1,async:!1,i:!1,threshold:0,depth:0},D={memory:{encode:"extra",mode:"strict",threshold:7},speed:{encode:"icase",mode:"strict",threshold:7,depth:2},match:{encode:"extra",mode:"full"},score:{encode:"extra",mode:"strict",threshold:5,depth:4},balance:{encode:"balance",mode:"ngram",threshold:6,depth:3},fastest:{encode:"icase",mode:"strict",threshold:9,depth:1}},C=[],I=0,F=p("[ -/]"),G=u(),H=u(),v=function(){for(var a=Object.getOwnPropertyNames({}.__proto__),
b=u(),c=0;c<a.length;c++)b[a[c]]=1;return b}();d.new=function(a){return new this(a)};d.create=function(a){return d.new(a)};d.registerMatcher=function(a){for(var b in a)a.hasOwnProperty(b)&&C.push(p(b),a[b]);return this};d.registerEncoder=function(a,b){v[a]||(w[a]=b);return this};d.registerLanguage=function(a,b){v[a]||(G[a]=b.filter,H[a]=b.stemmer);return this};d.encode=function(a,b){return v[a]?b:w[a].call(w,b)};d.prototype.init=function(a){this.h=[];a||(a=y);var b=a.profile;b=b&&!v[b]?D[b]:u();this.mode=
a.mode||b.mode||this.mode||y.mode;this.threshold=a.threshold||b.threshold||this.threshold||y.threshold;this.depth=a.depth||b.depth||this.depth||y.depth;this.f=a.suggest||this.f||y.f;this.c=(b=a.encode||b.encode)&&!v[b]&&w[b]||("function"===typeof b?b:this.c||!1);(b=a.matcher)&&this.addMatcher(b);if(b=a.filter){b=G[b]||b;var c=this.c,e=u();if(b)for(var f=0;f<b.length;f++){var q=c?c.call(w,b[f]):b[f];e[q]=String.fromCharCode(65E3-b.length+f)}this.filter=e}if(b=a.stemmer){a=H[b]||b;b=this.c;c=[];if(a)for(var g in a)a.hasOwnProperty(g)&&
(e=b?b.call(w,g):g,c.push(p("(?=.{"+(e.length+3)+",})"+e+"$"),b?b.call(w,a[g]):a[g]));this.stemmer=c}this.g=u(10);this.b=u();this.a=u();u();return this};d.prototype.encode=function(a){a&&C.length&&(a=t(a,C));a&&this.h.length&&(a=t(a,this.h));a&&this.c&&(a=this.c.call(w,a));a&&this.stemmer&&(a=t(a,this.stemmer));return a};d.prototype.addMatcher=function(a){var b=this.h,c;for(c in a)a.hasOwnProperty(c)&&b.push(p(c),a[c]);return this};d.prototype.add=function(a,b,c){if("string"===typeof b&&b&&(a&&!v[a]||
0===a))if(this.a[a]&&!c)this.update(a,b);else{b=this.encode(b);if(!b.length)return this;c=this.mode;b="function"===typeof c?c(b):"ngram"===c?E(b):b.split(F);var e=u();e._ctx=u();for(var f=this.threshold,q=this.depth,g=this.g,l=b.length,h=0;h<l;h++){var d=b[h];if(d){var m=d.length,p=(l-h)/l;switch(c){case "reverse":case "both":for(var n="",k=m-1;1<=k;k--)n=d[k]+n,A(g,e,n,a,(m-k)/m,p,f);case "forward":n="";for(k=0;k<m;k++)n+=d[k],A(g,e,n,a,1,p,f);break;case "full":for(k=0;k<m;k++)for(var t=(m-k)/m,
r=m;r>k;r--)n=d.substring(k,r),A(g,e,n,a,t,p,f);break;default:if(k=A(g,e,d,a,1,p,f),q&&1<l&&k>=f)for(m=e._ctx[d]||(e._ctx[d]=u()),d=this.b[d]||(this.b[d]=u(10)),k=h-q,r=h+q+1,0>k&&(k=0),r>l&&(r=l);k<r;k++)k!==h&&A(d,m,b[k],a,0,10-(k<h?h-k:k-h),f)}}}this.a[a]="1"}return this};d.prototype.update=function(a,b){this.a[a]&&b&&"string"===typeof b&&(this.remove(a),this.add(a,b,!0));return this};d.prototype.remove=function(a){if(this.a[a]&&!v[a]){for(var b=0;10>b;b++)B(this.g[b],a);this.depth&&B(this.b,a);
delete this.a[a]}return this};d.prototype.search=function(a,b,c){var e=[];if("object"===typeof a){c=a.callback||b;b=a.limit;var f=a.threshold;a=a.query}f||(f=this.threshold||0);"function"===typeof b?(c=b,b=1E3):b||0===b||(b=1E3);if(c){var d=this;M(function(){c(d.search(a,b));d=null},1,"search-"+this.id);return null}if(!a||"string"!==typeof a)return e;var g=this.encode(a);if(!g.length)return e;var l=this.mode;g="function"===typeof l?l(g):"ngram"===l?E(g):g.split(F);l=g.length;var h=!0,p=[],m=u();if(1<
l)if(this.depth){var t=!0,n=g[0];m[n]="1"}else g.sort(J);var k;if(!t||(k=this.b)[n])for(var v=t?1:0;v<l;v++){var r=g[v];if(r&&!m[r]){for(var w,x=!1,y=[],A=0,B=9;B>=f;B--)w=(t?k[n]:this.g)[B],w[r]&&(y[A++]=w[r],x=!0);if(x)p[p.length]=1<A?p.concat.apply([],y):y[0];else if(!this.f){h=!1;break}m[r]="1"}n=r}else h=!1;h&&(e=L(p,b,this.f));return e};d.prototype.reset=function(){this.destroy();return this.init()};d.prototype.destroy=function(){this.filter=this.stemmer=this.g=this.b=this.a=null;return this};
var w=Object.create({icase:function(a){return a.toLowerCase()},balance:function(){var a=[p("[-/]")," ",p("[^a-z0-9 ]"),"",p("\\s\\s+")," "];return function(b){b=t(b.toLowerCase(),a);for(var c="",e="",f="",d=0;d<b.length;d++){var g=b[d];if(g!==e)if(d&&"h"===g){if(f="a"===f||"e"===f||"i"===f||"o"===f||"u"===f||"y"===f,("a"===e||"e"===e||"i"===e||"o"===e||"u"===e||"y"===e)&&f||" "===e)c+=g}else c+=g;f=d===b.length-1?"":b[d+1];e=g}return c}}()}),M=null;return d}(!1),this);
