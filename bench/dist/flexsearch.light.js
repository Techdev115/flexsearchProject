/**!
 * FlexSearch.js v0.7.0 (Light)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){'use strict';var v;Object.assign||(Object.assign=function(){for(var a=arguments,b=a.length,c=a[0],f=1,d,g,h;f<b;f++){d=a[f];g=Object.keys(d);h=g.length;for(var e=0,p;e<h;e++)p=g[e],c[p]=d[p]}return c});function x(a){return"string"===typeof a}function z(a){return"function"===typeof a}function A(a){for(var b=Array(a),c=0;c<a;c++)b[c]=C();return b}function C(){return Object.create(null)}function F(a,b){for(var c=0,f=b.length;c<f;c+=2)a=a.replace(b[c],b[c+1]);return a};var G={encode:function(a){return a.toLowerCase()},o:"strict",split:/[\W_]+/,cache:!1,async:!1,s:!1,l:!1,m:!1,f:9,threshold:0,depth:0},H=0;function I(a){if(!(this instanceof I))return new I(a);var b=a&&a.id;this.id=b||0===b?b:H++;this.init(a);J(this,"index",function(){return Object.keys(this.a)});J(this,"length",function(){return this.index.length})}v=I.prototype;
v.init=function(a){this.c=[];var b;this.i||(a?a=Object.assign({},G,a):a=G);if(a){this.h=a.tokenize;this.split=x(b=a.split)?new RegExp(b,"g"):b;this.l=a.rtl;this.threshold=a.threshold;this.f=(b=a.resolution)<=this.threshold?this.threshold+1:b;this.depth="strict"===this.h&&a.depth||0;this.i=a.encode;(b=a.matcher)&&this.addMatcher(b,!0);var c=a.lang;if((b=c||a.filter)&&b.constructor===Array){for(var f=C(),d=0;d<b.length;d++)f[b[d]]=1;b=f}this.filter=b;if(a=b=c||a.stemmer){a=b;c=Object.keys(a);b=c.length;
f=Array(2*b);for(var g=d=0;d<b;d++){var h=c[d];f[g++]=new RegExp(h+"(?!\\b)"+h+"(\\b)","g");f[g++]=a[h]}a=f}this.j=a}this.g=A(this.f-(this.threshold||0));this.b=C();this.a={};return this};v.addMatcher=function(a,b){var c=Object.keys(a),f=c.length;b&&(this.c=Array(2*f));for(var d=b=0;b<f;b++){var g=c[b];this.c[d++]=new RegExp(g,"g");this.c[d++]=a[g]}return this};
v.add=function(a,b,c,f,d){if(b&&x(b)&&(a||0===a)){if(this.a[a]&&!f)return this.update(a,b);if(!d&&c)return this.add(a,b,null,f,!0),c(),this;b=this.encode(b);if(!b.length)return this;b=K(this,b);c=C();c._ctx=C();f=b.length;d=this.threshold;for(var g=this.depth,h=this.f,e=this.g,p=this.l,q=0;q<f;q++){var n=b[q];if(n){var l=n.length,m=(p?q+1:f-q)/f,r="";switch(this.h){case "reverse":case "both":for(var k=l;--k;)r=n[k]+r,L(e,c,r,a,p?1:(l-k)/l,m,d,h-1);r="";case "forward":for(k=0;k<l;k++)r+=n[k],L(e,c,
r,a,p?(k+1)/l:1,m,d,h-1);break;case "full":for(k=0;k<l;k++)for(var t=(p?k+1:l-k)/l,u=l;u>k;u--)r=n.substring(k,u),L(e,c,r,a,t,m,d,h-1);break;default:if(l=L(e,c,n,a,1,m,d,h-1),g&&1<f&&l>=d)for(l=c._ctx[n]||(c._ctx[n]=C()),n=this.b[n]||(this.b[n]=A(h-(d||0))),m=q-g,r=q+g+1,0>m&&(m=0),r>f&&(r=f);m<r;m++)m!==q&&L(n,l,b[m],a,0,h-(m<q?q-m:m-q),d,h-1)}}}this.a[a]=1}return this};v.update=function(a,b,c){this.a[a]&&x(b)&&(this.remove(a),this.add(a,b,c,!0));return this};
v.remove=function(a,b,c){if(this.a[a]){if(!c&&b)return this.remove(a,null,!0),b(),this;for(b=0;b<this.f-(this.threshold||0);b++)M(this.g[b],a);this.depth&&M(this.b,a);delete this.a[a]}return this};
v.search=function(a,b,c,f){b&&z(b)?(c=b,b=1E3):b||0===b||(b=1E3);var d=[],g=a;if("object"===typeof a){var h=!1;b=a.limit;var e=a.threshold;var p=!1;a=a.query}e||(e=this.threshold||0);if(!f&&c)return c(this.search(g,b,null,!0)),this;if(!a||!x(a))return d;g=this.encode(a);if(!g.length)return d;c=K(this,g);f=c.length;g=!0;a=[];var q=C(),n,l=0;1<f&&(this.depth?n=!0:c.sort(P));var m;if(!n||(m=this.b))for(var r=this.f;l<f;l++){var k=c[l];if(k){if(n){if(!t)if(m[k]){var t=k;q[k]=1}else if(!p)return d;if(p&&
l===f-1&&!a.length)n=!1,k=t||k,q[k]=0;else if(!t)continue}if(!q[k]){var u=[],D=!1,N=0;if(t=n?m[t]:this.g)for(var O,E=0;E<r-e;E++)if(O=t[E]&&t[E][k])u[N++]=O,D=!0;if(D)t=k,a[a.length]=1<N?u.concat.apply([],u):u[0];else{g=!1;break}q[k]=1}}}else g=!1;if(g)a:{d=[];!0===h?(h="0",e=""):e=h&&h.split(":");p=a.length;if(1<p){n=C();t=0;r=!0;g=0;var y;for(e&&(2===e.length?e=!1:e=y=parseInt(e[0],10));t<p;t++)if(q=t===p-1,m=a[t],f=m.length){if(r)if(w){l=w.length;for(c=0;c<l;c++)n["@"+w[c]]=1;var w=null;r=!1}else{w=
m;continue}k=!1;for(c=0;c<f;c++)if(l=m[c],u="@"+l,(D=n[u]||0)&&D===t){if(q){if(!y||--y<g)if(d[g++]=l,b&&g===b){d=Q(h,g+(e||0),d);break a}}else n[u]=t+1;k=!0}if(!k)break}else{d=Q(h,B,m);break a}w&&(d=w)}else p&&(d=a[0],e&&(e=parseInt(e[0],10)));if(b){w=d.length;e&&e>w&&(e=0);y=e||0;var B=y+b;B<w?d=d.slice(y,B):(B=0,y&&(d=d.slice(y)))}d=Q(h,B,d)}return d};v.clear=function(){return this.destroy().init()};v.destroy=function(){this.g=this.b=this.a=null;return this};
function J(a,b,c){Object.defineProperty(a,b,{get:c})}function L(a,b,c,f,d,g,h,e){if(b[c])return b[c];d=d?(e-(h||e/1.5))*g+(h||e/1.5)*d:g;b[c]=d;d>=h&&(a=a[e-(d+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=f);return d}function M(a,b){if(a)for(var c=Object.keys(a),f=0,d=c.length;f<d;f++){var g=c[f],h=a[g];if(h)for(var e=0,p=h.length;e<p;e++)if(h[e]===b){1===p?delete a[g]:h.splice(e,1);break}else"object"===typeof h[e]&&M(h[e],b)}}
v.encode=function(a){a&&this.i&&(a=this.i(a));a&&this.c.length&&(a=F(a,this.c));a&&this.j&&(a=F(a,this.j));return a};function K(a,b){b=z(a.h)?a.h(b):b.split(a.split);if(a.filter){a=a.filter;for(var c=b.length,f=z(a),d=[],g=0,h=0;g<c;g++){var e=b[g];e&&(f&&a(e)||!f&&!a[e])&&(d[h++]=e)}b=d}return b}function P(a,b){return b.length-a.length}function Q(a,b,c){return a?{page:a,next:b?""+b:null,result:c}:c};(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return I}):"object"===typeof a.exports?a.module.exports=I:a.FlexSearch=I})();}).call(this);
