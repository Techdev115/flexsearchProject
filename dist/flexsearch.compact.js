/*
 FlexSearch v0.5.3
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(k,A,B){let z;(z=B.define)&&z.amd?z([],function(){return A}):(z=B.modules)?z[k.toLowerCase()]=A:"object"===typeof exports?module.exports=A:B[k]=A})("FlexSearch",function(){function k(b,a){const c=a?a.id:b&&b.id;this.id=c||0===c?c:U++;this.init(b,a);z(this,"index",function(){return this.f});z(this,"length",function(){return Object.keys(this.f).length})}function A(b,a){const c=b.length,d=E(a),f=[];for(let g=0,h=0;g<c;g++){const c=b[g];if(d&&a(c)||!d&&!a[c])f[h++]=c}return f}function B(b,
a,c,d,f,g,h){b=this.g;a=c=M(c,a,g?0:f,h,!1);c=a.length;h=Array(c);for(let d=0;d<c;d++)h[d]=b[a[d]];c=h;g&&(c=this.where(g,null,f,c));d&&(E(d)||(x=d.split(":"),1<x.length?d=V:(x=x[0],d=W)),c.sort(d));return c}function z(b,a,c){Object.defineProperty(b,a,{get:c})}function e(b){return new RegExp(b,"g")}function C(b,a){for(let c=0;c<a.length;c+=2)b=b.replace(a[c],a[c+1]);return b}function I(b,a,c,d,f,g,h,r){if(a[c])return a[c];f=f?(r-(h||r/1.5))*g+(h||r/1.5)*f:g;a[c]=f;f>=h&&(b=b[r-(f+.5>>0)],b=b[c]||
(b[c]=[]),b[b.length]=d);return f}function J(b,a){if(b){const c=Object.keys(b);for(let d=0,f=c.length;d<f;d++){const f=c[d],h=b[f];if(h)for(let c=0,d=h.length;c<d;c++)if(h[c]===a){1===d?delete b[f]:h.splice(c,1);break}else D(h[c])&&J(h[c],a)}}}function K(b){let a="",c="";var d="";for(let f=0;f<b.length;f++){const g=b[f];if(g!==c)if(f&&"h"===g){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)a+=g}else a+=g;d=f===b.length-
1?"":b[f+1];c=g}return a}function X(b,a){b=b.length-a.length;return 0>b?1:b?-1:0}function W(b,a){b=b[x];a=a[x];return b<a?-1:b>a?1:0}function V(b,a){const c=x.length;for(let d=0;d<c;d++)b=b[x[d]],a=a[x[d]];return b<a?-1:b>a?1:0}function M(b,a,c,d,f){d=[];let g;const h=b.length;if(1<h){a="or"===a;const e=w();let p,m=-1,l,q=0,N,v,k=!0,u=0;for(;++m<h;){const n=m===h-1;p=b[m];l=p.length;if(!l){if(!a&&!f)return d;if(n&&!u)return N||d;continue}if(k){if(n)return p;for(;q<l;)e["@"+p[q++]]=1;N=p;k=!1;continue}let O=
!1;g=[];for(q=0;q<l;){v=p[q++];var r="@"+v;if(e[r]){const b=e[r];if(a||b===m){if(n){if(d[u++]=v,c&&u===c)return d}else e[r]=m+1;O=!0}else f&&(r=g[b]||(g[b]=[]),r[r.length]=v)}}if(!O&&!f)break}if(f&&(u=d.length,(m=g.length)&&(!c||u<c)))for(;m--;)if(v=g[m])for(q=0,l=v.length;q<l;q++)if(d[u++]=v[q],c&&u===c)return d}else h&&(d=b[0],c&&d.length>c&&(d=d.slice(0,c)));return d}function F(b){return"string"===typeof b}function y(b){return b.constructor===Array}function E(b){return"function"===typeof b}function D(b){return"object"===
typeof b}function G(b){return"undefined"===typeof b}function P(b){const a=Array(b);for(let c=0;c<b;c++)a[c]=w();return a}function w(){return Object.create(null)}const t={encode:"icase",c:"forward",v:!1,cache:!1,async:!1,w:!1,m:!1,a:!1,s:!1,b:9,threshold:0,depth:0},Q={memory:{encode:"extra",c:"strict",threshold:0,b:1},speed:{encode:"icase",c:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",c:"full",threshold:1,b:3},score:{encode:"extra",c:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",
c:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",c:"strict",threshold:8,b:9,depth:1}},L=[];let U=0;const R=/\W+/,S={},T={};k.create=function(b){return new k(b)};k.registerMatcher=function(b){for(const a in b)b.hasOwnProperty(a)&&L.push(e(a),b[a]);return this};k.registerEncoder=function(b,a){H[b]=a.bind(H);return this};k.registerLanguage=function(b,a){S[b]=a.filter;T[b]=a.stemmer;return this};k.encode=function(b,a){return H[b](a)};k.prototype.init=function(b,a){this.o=[];if(a){var c=a.preset;
b=a}else b||(b=t),c=b.preset;a={};F(b)?(a=Q[b],b={}):c&&(a=Q[c]);this.c=b.tokenize||a.c||this.c||t.c;this.m=b.rtl||this.m||t.m;this.async="undefined"===typeof Promise||G(c=b.async)?this.async||t.async:c;this.threshold=G(c=b.threshold)?a.threshold||this.threshold||t.threshold:c;this.b=G(c=b.resolution)?c=a.b||this.b||t.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth=G(c=b.depth)?a.depth||this.depth||t.depth:c;this.s=G(c=b.paging)?this.s||t.s:c;this.i=(c=G(c=b.encode)?a.encode||t.encode:
c)&&H[c]&&H[c].bind(H)||(E(c)?c:this.i||!1);(c=b.matcher)&&this.addMatcher(c);if(c=b.filter){F(c)&&(c=S[c]);if(y(c)){a=this.i;var d=w();for(var f=0;f<c.length;f++){var g=a?a(c[f]):c[f];d[g]=1}c=d}this.filter=c}if(c=b.stemmer){var h;a=F(c)?T[c]:c;d=this.i;f=[];for(h in a)a.hasOwnProperty(h)&&(g=d?d(h):h,f.push(e(g+"($|\\W)"),d?d(a[h]):a[h]));this.stemmer=h=f}this.a=d=(c=b.doc)?c:this.a||t.a;this.l=P(this.b-(this.threshold||0));this.h=w();this.f=w();if(d&&(this.g=w(),b.doc=null,h=d.index={},c=d.keys=
[],a=d.field,y(d.id)||(d.id=d.id.split(":")),a)){let g;y(a)||(D(a)?(g=a,d.field=a=Object.keys(a)):d.field=a=[a]);for(d=0;d<a.length;d++)f=a[d],y(f)||(g&&(b=g[f]),c[d]=f,a[d]=f.split(":")),h[f]=new k(b),h[f].g=this.g}return this};k.prototype.encode=function(b){b&&L.length&&(b=C(b,L));b&&this.o.length&&(b=C(b,this.o));b&&this.i&&(b=this.i(b));b&&this.stemmer&&(b=C(b,this.stemmer));return b};k.prototype.addMatcher=function(b){const a=this.o;for(const c in b)b.hasOwnProperty(c)&&a.push(e(c),b[c]);return this};
k.prototype.add=function(b,a,c,d,f){if(this.a&&D(b))return this.j("add",b,a);if(a&&F(a)&&(b||0===b)){var g="@"+b;if(this.f[g]&&!d)return this.update(b,a);if(!f){if(this.async&&"function"!==typeof importScripts){let f=this;g=new Promise(function(c){setTimeout(function(){f.add(b,a,null,d,!0);f=null;c()})});if(c)g.then(c);else return g;return this}if(c)return this.add(b,a,null,d,!0),c(),this}a=this.encode(a);if(!a.length)return this;c=this.c;f=E(c)?c(a):a.split(R);this.filter&&(f=A(f,this.filter));const l=
w();l._ctx=w();const q=f.length,r=this.threshold,v=this.depth,k=this.b,u=this.l,t=this.m;for(let a=0;a<q;a++){var h=f[a];if(h){var e=h.length,n=(t?a+1:q-a)/q,p="";switch(c){case "reverse":case "both":for(var m=e;--m;)p=h[m]+p,I(u,l,p,b,t?1:(e-m)/e,n,r,k-1);p="";case "forward":for(m=0;m<e;m++)p+=h[m],I(u,l,p,b,t?(m+1)/e:1,n,r,k-1);break;case "full":for(m=0;m<e;m++){const a=(t?m+1:e-m)/e;for(let c=e;c>m;c--)p=h.substring(m,c),I(u,l,p,b,a,n,r,k-1)}break;default:if(e=I(u,l,h,b,1,n,r,k-1),v&&1<q&&e>=r)for(e=
l._ctx[h]||(l._ctx[h]=w()),h=this.h[h]||(this.h[h]=P(k-(r||0))),n=a-v,p=a+v+1,0>n&&(n=0),p>q&&(p=q);n<p;n++)n!==a&&I(h,e,f[n],b,0,k-(n<a?a-n:n-a),r,k-1)}}}this.f[g]=1}return this};k.prototype.j=function(b,a,c){if(y(a))for(let d=0,f=a.length;d<f;d++){if(d===f-1)return this.j(b,a[d],c);this.j(b,a[d])}else{const n=this.a.index,k=this.a.keys;var d=this.a.tag,f=this.a.id;let m;let l;for(var g=0;g<f.length;g++)m=(m||a)[f[g]];if(d){for(f=0;f<d.length;f++){var h=d[f];var e=h.split(":");for(g=0;g<e.length;g++)l=
(l||a)[e[g]];l="@"+l}e=this.u[h];e=e[l]||(e[l]=[])}if("remove"===b){delete this.g[m];for(let a=0,b=k.length;a<b;a++){if(a===b-1)return n[k[a]].remove(m,c);n[k[a]].remove(m)}}f=this.a.field;e&&(e[e.length]=a);for(let e=0,g=f.length;e<g;e++){d=f[e];let l;for(h=0;h<d.length;h++)l=(l||a)[d[h]];this.g[m]=a;d=n[k[e]];h="add"===b?d.add:d.update;if(e===g-1)return h.call(d,m,l,c);h.call(d,m,l)}}};k.prototype.update=function(b,a,c){if(this.a&&D(b))return this.j("update",b,a);this.f["@"+b]&&F(a)&&(this.remove(b),
this.add(b,a,c,!0));return this};k.prototype.remove=function(b,a,c){if(this.a&&D(b))return this.j("remove",b,a);var d="@"+b;if(this.f[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(a){setTimeout(function(){c.remove(b,null,!0);c=null;a()})});if(a)d.then(a);else return d;return this}if(a)return this.remove(b,null,!0),a(),this}for(a=0;a<this.b-(this.threshold||0);a++)J(this.l[a],b);this.depth&&J(this.h,b);delete this.f[d]}return this};let x;k.prototype.search=
function(b,a,c,d){if(D(a)){if(y(a))for(var e=0;e<a.length;e++)a[e].query=b;else a.query=b;b=a;a=0}let g=b;let h=[];if(D(b)&&!y(b)){(c=b.callback||a)&&(g.callback=null);a=b.limit;var k=b.threshold;b=b.query}if(this.a){let d=!1,e=g.bool,f=g.sort;k=this.a.index;var n=g.field;if(n)g.field=null,y(n)||(n=[n]);else if(y(g)){var p=g;n=[];for(var m=0;m<g.length;m++){var l=g[m];n[m]=l.field;e=l.bool;f=l.sort;d=!1}}else n=this.a.keys;m=n.length;for(l=0;l<m;l++)p&&(g=p[l]),h[l]=k[n[l]].search(g);if(c)return c(B.call(this,
b,e,h,f,a,d,void 0));if(this.async){const c=this;return new Promise(function(g){Promise.all(h).then(function(h){g(B.call(c,b,e,h,f,a,d,void 0))})})}return B.call(this,b,e,h,f,a,d,void 0)}k||(k=this.threshold||0);E(a)?(c=a,a=1E3):a||0===a||(a=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let b=this;k=new Promise(function(c){setTimeout(function(){c(b.search(g,a,null,!0));b=null})});if(c)k.then(c);else return k;return this}if(c)return c(this.search(g,a,null,!0)),this}if(!b||!F(b))return h;
g=b;g=this.encode(g);if(!g.length)return h;c=this.c;c=E(c)?c(g):g.split(R);this.filter&&(c=A(c,this.filter));p=c.length;d=!0;e=[];const q=w();1<p&&(this.depth?(n=!0,l=c[0],q[l]=1):c.sort(X));if(!n||(m=this.h)[l]){let a=this.b;for(let b=n?1:0;b<p;b++){const f=c[b];if(f){if(!q[f]){const b=[];let c=!1,g=0;if(l=n?m[l]:this.l){let d;for(let e=0;e<a-k;e++)if(d=l[e][f])b[g++]=d,c=!0}if(c)e[e.length]=1<g?b.concat.apply([],b):b[0];else{d=!1;break}q[f]=1}l=f}}}else d=!1;this.a||d&&(h=M(e,!1,a,void 0,!1));return h};
k.prototype.clear=function(){return this.destroy().init()};k.prototype.destroy=function(){this.l=this.h=this.f=null;if(this.a){const b=this.a.keys;for(let a=0;a<b.length;a++)this.a.index[b[a]].destroy();this.a=this.g=null}return this};const H={icase:function(b){return b.toLowerCase()},simple:function(){const b=[e("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",e("[\u00e8\u00e9\u00ea\u00eb]"),"e",e("[\u00ec\u00ed\u00ee\u00ef]"),"i",e("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",e("[\u00f9\u00fa\u00fb\u00fc\u0171]"),
"u",e("[\u00fd\u0177\u00ff]"),"y",e("\u00f1"),"n",e("\u00e7"),"c",e("\u00df"),"s",e(" & ")," and ",e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(a){a=C(a.toLowerCase(),b);return" "===a?"":a}}(),advanced:function(){const b=[e("ae"),"a",e("ai"),"ei",e("ay"),"ei",e("ey"),"ei",e("oe"),"o",e("ue"),"u",e("ie"),"i",e("sz"),"s",e("zs"),"s",e("sh"),"s",e("ck"),"k",e("cc"),"k",e("dt"),"t",e("ph"),"f",e("pf"),"f",e("ou"),"o",e("uo"),"u"];return function(a,c){if(!a)return a;a=this.simple(a);
2<a.length&&(a=C(a,b));c||1<a.length&&(a=K(a));return a}}(),extra:function(){const b=[e("p"),"b",e("z"),"s",e("[cgq]"),"k",e("n"),"m",e("d"),"t",e("[vw]"),"f",e("[aeiouy]"),""];return function(a){if(!a)return a;a=this.advanced(a,!0);if(1<a.length){a=a.split(" ");for(let c=0;c<a.length;c++){const d=a[c];1<d.length&&(a[c]=d[0]+C(d.substring(1),b))}a=a.join(" ");a=K(a)}return a}}(),balance:function(){const b=[e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(a){return K(C(a.toLowerCase(),
b))}}()};return k}(!1),this);
