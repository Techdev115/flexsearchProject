/*
 FlexSearch v0.6.0
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(l,I,J){let G;(G=J.define)&&G.amd?G([],function(){return I}):(G=J.modules)?G[l.toLowerCase()]=I:"object"===typeof exports?module.exports=I:J[l]=I})("FlexSearch",function(){function l(b,a){const c=a?a.id:b&&b.id;this.id=c||0===c?c:Z++;this.init(b,a);G(this,"index",function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)});G(this,"length",function(){return this.index.length})}function I(b,a){const c=b.length,d=H(a),e=[];for(let f=0,g=0;f<c;f++){const c=
b[f];if(d&&a(c)||!d&&!a[c])e[g++]=c}return e}function J(b,a,c,d,e,f,g,m,n,q){c=R(c,g?0:e,m,f,a,n,q);let k;m&&(m=c.page,k=c.next,c=c.result);if(g)a=this.where(g,null,e,c);else{a=c;c=this.g;e=a.length;f=Array(e);for(g=0;g<e;g++)f[g]=c[a[g]];a=f}c=a;d&&(H(d)||(v=d.split(":"),1<v.length?d=aa:(v=v[0],d=ba)),c.sort(d));c=K(m,k,c);this.cache&&this.j.set(b,c);return c}function G(b,a,c){Object.defineProperty(b,a,{get:c})}function h(b){return new RegExp(b,"g")}function L(b,a){for(let c=0;c<a.length;c+=2)b=
b.replace(a[c],a[c+1]);return b}function N(b,a,c,d,e,f,g,m){if(a[c])return a[c];e=e?(m-(g||m/1.5))*f+(g||m/1.5)*e:f;a[c]=e;e>=g&&(b=b[m-(e+.5>>0)],b=b[c]||(b[c]=[]),b[b.length]=d);return e}function P(b,a){if(b){const c=Object.keys(b);for(let d=0,e=c.length;d<e;d++){const e=c[d],g=b[e];if(g)for(let c=0,d=g.length;c<d;c++)if(g[c]===a){1===d?delete b[e]:g.splice(c,1);break}else C(g[c])&&P(g[c],a)}}}function Q(b){let a="",c="";var d="";for(let e=0;e<b.length;e++){const f=b[e];if(f!==c)if(e&&"h"===f){if(d=
"a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)a+=f}else a+=f;d=e===b.length-1?"":b[e+1];c=f}return a}function ca(b,a){b=b.length-a.length;return 0>b?1:b?-1:0}function ba(b,a){b=b[v];a=a[v];return b<a?-1:b>a?1:0}function aa(b,a){const c=v.length;for(let d=0;d<c;d++)b=b[v[d]],a=a[v[d]];return b<a?-1:b>a?1:0}function K(b,a,c){return b?{page:b,next:a?""+a:null,result:c}:c}function R(b,a,c,d,e,f,g){let m;f=[];let n;const q=b.length;
!0===c?(c="0",n=""):n=c&&c.split(":");if(1<q){const t=r();let u=[],l,z,w=-1;var k;let A;let T=!0,D,B=0,y,x,v;n&&(2===n.length?(v=n,n=!1):n=parseInt(n[0],10));if(g){for(l=r();++w<q;)if("not"===e[w])for(z=b[w],A=z.length,k=0;k<A;)l["@"+z[k++]]=1;else x=w+1;if(!x)return K(c,m,f);w=-1}else y=E(e)&&e;for(;++w<q;){const da=w===(x||q)-1;let r,S;if(!y||!w)if((k=y||e&&e[w])&&"and"!==k)if("or"===k)S=!0;else continue;else r=!0;z=b[w];A=z.length;if(!A){if(r&&!d)return K(c,m,z);continue}if(T)if(D){var h=D.length;
for(k=0;k<h;)t["@"+D[k++]]=1;D=null;T=!1}else{D=z;continue}let v=!1;for(k=0;k<A;){h=z[k++];var p="@"+h;const b=S?w:t[p];if(b&&(!g||!l[p]))if(b===w){if(da){if(!n||--n<B)if(f[B++]=h,a&&B===a)return K(c,B,f)}else t[p]=w+1;v=!0}else d&&(p=u[b]||(u[b]=[]),p[p.length]=h)}if(r&&!v&&!d)break}if(D)if(b=D.length,g)for(k=n?parseInt(n,10):0;k<b;){if(e=D[k++],!l["@"+e]&&(!n||--n<B)&&(f[B++]=e,a&&B===a))return K(c,k,f)}else f=D;if(d)for(B=f.length,v?(w=parseInt(v[0],10)+1,k=parseInt(v[1],10)):(w=u.length,k=0);w--;)if(h=
u[w])for(A=h.length;k<A;k++)if(d=h[k],!g||!l["@"+d])if(f[B++]=d,a&&B===a)return K(c,w+":"+k,f)}else q&&(e&&"not"===e[0]||(f=b[0]));a&&(g=c?parseInt(c,10):0,m=g+a,m<f.length?f=f.slice(g,m):g&&(f=f.slice(g)));return K(c,m,f)}function E(b){return"string"===typeof b}function y(b){return b.constructor===Array}function H(b){return"function"===typeof b}function C(b){return"object"===typeof b}function F(b){return"undefined"===typeof b}function U(b){const a=Array(b);for(let c=0;c<b;c++)a[c]=r();return a}function r(){return Object.create(null)}
const x={encode:"icase",c:"forward",cache:!1,async:!1,C:!1,v:!1,a:!1,b:9,threshold:0,depth:0},V={memory:{encode:"extra",c:"strict",threshold:0,b:1},speed:{encode:"icase",c:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",c:"full",threshold:1,b:3},score:{encode:"extra",c:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",c:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",c:"strict",threshold:8,b:9,depth:1}},O=[];let Z=0;const W=/\W+/,X={},Y={};l.create=function(b){return new l(b)};
l.registerMatcher=function(b){for(const a in b)b.hasOwnProperty(a)&&O.push(h(a),b[a]);return this};l.registerEncoder=function(b,a){M[b]=a.bind(M);return this};l.registerLanguage=function(b,a){X[b]=a.filter;Y[b]=a.stemmer;return this};l.encode=function(b,a){return M[b](a)};l.prototype.init=function(b,a){this.m=[];if(a){var c=a.preset;b=a}else b||(b=x),c=b.preset;a={};E(b)?(a=V[b],b={}):c&&(a=V[c]);this.c=b.tokenize||a.c||this.c||x.c;this.v=b.rtl||this.v||x.v;this.async="undefined"===typeof Promise||
F(c=b.async)?this.async||x.async:c;this.threshold=F(c=b.threshold)?a.threshold||this.threshold||x.threshold:c;this.b=F(c=b.resolution)?c=a.b||this.b||x.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth="strict"!==this.c||F(c=b.depth)?a.depth||this.depth||x.depth:c;this.o=(c=F(c=b.encode)?a.encode||x.encode:c)&&M[c]&&M[c].bind(M)||(H(c)?c:this.o||!1);(c=b.matcher)&&this.addMatcher(c);if(c=b.filter){E(c)&&(c=X[c]);if(y(c)){a=this.o;var d=r();for(var e=0;e<c.length;e++){var f=a?a(c[e]):c[e];
d[f]=1}c=d}this.filter=c}if(c=b.stemmer){var g;a=E(c)?Y[c]:c;d=this.o;e=[];for(g in a)a.hasOwnProperty(g)&&(f=d?d(g):g,e.push(h(f+"($|\\W)"),d?d(a[g]):a[g]));this.stemmer=g=e}this.a=e=(c=b.doc)?c:this.a||x.a;this.i=U(this.b-(this.threshold||0));this.h=r();this.f=r();if(e){this.g=r();b.doc=null;g=e.index={};a=e.keys=[];d=e.field;f=e.tag;y(e.id)||(e.id=e.id.split(":"));if(f){this.w=r();let a=r();if(d)if(E(d))a[d]=b;else if(y(d))for(let c=0;c<d.length;c++)a[d[c]]=b;else C(d)&&(a=d);y(f)||(e.tag=f=[f]);
for(d=0;d<f.length;d++)this.w[f[d]]=r();this.B=f;d=a}if(d){let c;y(d)||(C(d)?(c=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)f=d[e],y(f)||(c&&(b=c[f]),a[e]=f,d[e]=f.split(":")),g[f]=new l(b),g[f].g=this.g}}this.u=!0;this.j=(this.cache=c=F(c=b.cache)?this.cache||x.cache:c)?new ea(c):!1;return this};l.prototype.encode=function(b){b&&O.length&&(b=L(b,O));b&&this.m.length&&(b=L(b,this.m));b&&this.o&&(b=this.o(b));b&&this.stemmer&&(b=L(b,this.stemmer));return b};l.prototype.addMatcher=
function(b){const a=this.m;for(const c in b)b.hasOwnProperty(c)&&a.push(h(c),b[c]);return this};l.prototype.add=function(b,a,c,d,e){if(this.a&&C(b))return this.s("add",b,a);if(a&&E(a)&&(b||0===b)){var f="@"+b;if(this.f[f]&&!d)return this.update(b,a);if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;f=new Promise(function(c){setTimeout(function(){e.add(b,a,null,d,!0);e=null;c()})});if(c)f.then(c);else return f;return this}if(c)return this.add(b,a,null,d,!0),c(),this}a=this.encode(a);
if(!a.length)return this;c=this.c;e=H(c)?c(a):a.split(W);this.filter&&(e=I(e,this.filter));const t=r();t._ctx=r();const p=e.length,q=this.threshold,u=this.depth,l=this.b,z=this.i,w=this.v;for(let a=0;a<p;a++){var g=e[a];if(g){var m=g.length,n=(w?a+1:p-a)/p,h="";switch(c){case "reverse":case "both":for(var k=m;--k;)h=g[k]+h,N(z,t,h,b,w?1:(m-k)/m,n,q,l-1);h="";case "forward":for(k=0;k<m;k++)h+=g[k],N(z,t,h,b,w?(k+1)/m:1,n,q,l-1);break;case "full":for(k=0;k<m;k++){const a=(w?k+1:m-k)/m;for(let c=m;c>
k;c--)h=g.substring(k,c),N(z,t,h,b,a,n,q,l-1)}break;default:if(m=N(z,t,g,b,1,n,q,l-1),u&&1<p&&m>=q)for(m=t._ctx[g]||(t._ctx[g]=r()),g=this.h[g]||(this.h[g]=U(l-(q||0))),n=a-u,h=a+u+1,0>n&&(n=0),h>p&&(h=p);n<h;n++)n!==a&&N(g,m,e[n],b,0,l-(n<a?a-n:n-a),q,l-1)}}}this.f[f]=1;this.u=!1}return this};l.prototype.s=function(b,a,c){if(y(a))for(let d=0,e=a.length;d<e;d++){if(d===e-1)return this.s(b,a[d],c);this.s(b,a[d])}else{const n=this.a.index,m=this.a.keys;var d=this.a.tag,e=this.a.id;let k;let l;for(var f=
0;f<e.length;f++)k=(k||a)[e[f]];if(d){for(e=0;e<d.length;e++){var g=d[e];var h=g.split(":");for(f=0;f<h.length;f++)l=(l||a)[h[f]];l="@"+l}h=this.w[g];h=h[l]||(h[l]=[])}if("remove"===b){delete this.g[k];for(let a=0,b=m.length;a<b;a++){if(a===b-1)return n[m[a]].remove(k,c);n[m[a]].remove(k)}}e=this.a.field;h&&(h[h.length]=a);for(let f=0,h=e.length;f<h;f++){d=e[f];let l;for(g=0;g<d.length;g++)l=(l||a)[d[g]];this.g[k]=a;d=n[m[f]];g="add"===b?d.add:d.update;if(f===h-1)return g.call(d,k,l,c);g.call(d,k,
l)}}};l.prototype.update=function(b,a,c){if(this.a&&C(b))return this.s("update",b,a);this.f["@"+b]&&E(a)&&(this.remove(b),this.add(b,a,c,!0));return this};l.prototype.remove=function(b,a,c){if(this.a&&C(b))return this.s("remove",b,a);var d="@"+b;if(this.f[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(a){setTimeout(function(){c.remove(b,null,!0);c=null;a()})});if(a)d.then(a);else return d;return this}if(a)return this.remove(b,null,!0),a(),this}for(a=
0;a<this.b-(this.threshold||0);a++)P(this.i[a],b);this.depth&&P(this.h,b);delete this.f[d];this.u=!1}return this};let v;l.prototype.search=function(b,a,c,d){if(C(a)){if(y(a))for(var e=0;e<a.length;e++)a[e].query=b;else a.query=b;b=a;a=0}let f=[],g=b;let h,l,q;if(C(b)&&!y(b)){(c=b.callback||H(a)&&a)&&(g.callback=null);l=b.sort;h=b.page;a=b.limit;var k=b.threshold;q=b.suggest;b=b.query}if(this.a){k=this.a.index;const m=g.where;var t=g.bool||"or",p=g.field;let n=t;let A,r;if(p)y(p)||(p=[p]);else if(y(g)){var v=
g;p=[];n=[];for(var u=0;u<g.length;u++)d=g[u],e=d.bool||t,p[u]=d.field,n[u]=e,"not"===e?A=!0:"and"===e&&(r=!0)}else p=this.a.keys;t=p.length;for(u=0;u<t;u++)v&&(g=v[u]),h&&!E(g)&&(g.page=null,g.limit=0),f[u]=k[p[u]].search(g,0);if(c)return c(J.call(this,b,n,f,l,a,q,m,h,r,A));if(this.async){const c=this;return new Promise(function(d){Promise.all(f).then(function(e){d(J.call(c,b,n,e,l,a,q,m,h,r,A))})})}return J.call(this,b,n,f,l,a,q,m,h,r,A)}k||(k=this.threshold||0);H(a)?(c=a,a=1E3):a||0===a||(a=1E3);
if(!d){if(this.async&&"function"!==typeof importScripts){let b=this;k=new Promise(function(c){setTimeout(function(){c(b.search(g,a,null,!0));b=null})});if(c)k.then(c);else return k;return this}if(c)return c(this.search(g,a,null,!0)),this}if(!b||!E(b))return f;g=b;if(this.cache)if(this.u){if(c=this.j.get(b))return c}else this.j.clear(),this.u=!0;g=this.encode(g);if(!g.length)return f;c=this.c;c=H(c)?c(g):g.split(W);this.filter&&(c=I(c,this.filter));v=c.length;d=!0;e=[];const x=r();1<v&&(this.depth?
(p=!0,u=c[0],x[u]=1):c.sort(ca));if(!p||(t=this.h)[u]){const a=this.b;for(let b=p?1:0;b<v;b++){const f=c[b];if(f){if(!x[f]){const b=[];let c=!1,g=0;if(u=p?t[u]:this.i){let d;for(let e=0;e<a-k;e++)if(d=u[e][f])b[g++]=d,c=!0}if(c)e[e.length]=1<g?b.concat.apply([],b):b[0];else if(!q){d=!1;break}x[f]=1}u=f}}}else d=!1;d&&(f=R(e,a,h,q));this.cache&&this.j.set(b,f);return f};l.prototype.find=function(b,a){return this.where(b,a,1)[0]||null};l.prototype.where=function(b,a,c,d){const e=this.g,f=[];let g=0;
let h;var l;if(C(b)){c||(c=a);var q=Object.keys(b);var k=q.length;h=!1;if(1===k&&"id"===q[0])return[e[b.id]];if((l=this.B)&&!d)for(var t=0;t<l.length;t++){var p=l[t],r=b[p];if(!F(r)){d=this.w[p]["@"+r];if(0===--k)return d;q.splice(q.indexOf(p),1);delete b[p];break}}l=Array(k);for(t=0;t<k;t++)l[t]=q[t].split(":")}else{if(H(b)){a=d||Object.keys(e);c=a.length;for(q=0;q<c;q++)k=e[a[q]],b(k)&&(f[g++]=k);return f}if(F(a))return[e[b]];if("id"===b)return[e[a]];q=[b];k=1;l=[b.split(":")];h=!0}d=d||Object.keys(e);
t=d.length;for(p=0;p<t;p++){r=e[d[p]];let m=!0;for(let c=0;c<k;c++){h||(a=b[q[c]]);const d=l[c],e=d.length;let f=r;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==a){m=!1;break}}if(m&&(f[g++]=r,c&&g===c))break}return f};l.prototype.info=function(){return{id:this.id,items:this.length,cache:this.cache&&this.cache.l?this.cache.l.length:!1,matcher:O.length+(this.m?this.m.length:0),worker:this.C,threshold:this.threshold,depth:this.depth,resolution:this.b,contextual:this.depth&&"strict"===this.c}};
l.prototype.clear=function(){return this.destroy().init()};l.prototype.destroy=function(){this.cache&&(this.j.clear(),this.j=null);this.i=this.h=this.f=null;if(this.a){const b=this.a.keys;for(let a=0;a<b.length;a++)this.a.index[b[a]].destroy();this.a=this.g=null}return this};l.prototype.export=function(){if(this.a){const b=this.a.keys,a=Array(b.length+1);let c=0;for(;c<b.length;c++){const d=this.a.index[b[c]];a[c]=[d.i,d.h,Object.keys(d.f)]}a[c]=this.g;return JSON.stringify(a)}return JSON.stringify([this.i,
this.h,Object.keys(this.f)])};l.prototype.import=function(b){b=JSON.parse(b);const a=r();if(this.a){var c=this.a.keys,d=c.length,e=b[0][2];for(var f=0;f<e.length;f++)a[e[f]]=1;for(e=0;e<d;e++)f=this.a.index[c[e]],f.i=b[e][0],f.h=b[e][1],f.f=a,f.g=b[d];this.g=b[d]}else{c=b[2];for(d=0;d<c.length;d++)a[c[d]]=1;this.i=b[0];this.h=b[1];this.f=a}};const M={icase:function(b){return b.toLowerCase()},simple:function(){const b=[h("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",h("[\u00e8\u00e9\u00ea\u00eb]"),
"e",h("[\u00ec\u00ed\u00ee\u00ef]"),"i",h("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",h("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",h("[\u00fd\u0177\u00ff]"),"y",h("\u00f1"),"n",h("\u00e7"),"c",h("\u00df"),"s",h(" & ")," and ",h("[-/]")," ",h("[^a-z0-9 ]"),"",h("\\s+")," "];return function(a){a=L(a.toLowerCase(),b);return" "===a?"":a}}(),advanced:function(){const b=[h("ae"),"a",h("ai"),"ei",h("ay"),"ei",h("ey"),"ei",h("oe"),"o",h("ue"),"u",h("ie"),"i",h("sz"),"s",h("zs"),"s",h("sh"),"s",h("ck"),"k",
h("cc"),"k",h("dt"),"t",h("ph"),"f",h("pf"),"f",h("ou"),"o",h("uo"),"u"];return function(a,c){if(!a)return a;a=this.simple(a);2<a.length&&(a=L(a,b));c||1<a.length&&(a=Q(a));return a}}(),extra:function(){const b=[h("p"),"b",h("z"),"s",h("[cgq]"),"k",h("n"),"m",h("d"),"t",h("[vw]"),"f",h("[aeiouy]"),""];return function(a){if(!a)return a;a=this.advanced(a,!0);if(1<a.length){a=a.split(" ");for(let c=0;c<a.length;c++){const d=a[c];1<d.length&&(a[c]=d[0]+L(d.substring(1),b))}a=a.join(" ");a=Q(a)}return a}}(),
balance:function(){const b=[h("[-/]")," ",h("[^a-z0-9 ]"),"",h("\\s+")," "];return function(a){return Q(L(a.toLowerCase(),b))}}()},ea=function(){function b(a){this.clear();this.A=!0!==a&&a}b.prototype.clear=function(){this.cache=r();this.count=r();this.index=r();this.l=[]};b.prototype.set=function(a,b){if(this.A&&F(this.cache[a])){let c=this.l.length;if(c===this.A){c--;const a=this.l[c];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=c;this.l[c]=a;this.count[a]=-1;this.cache[a]=
b;this.get(a)}else this.cache[a]=b};b.prototype.get=function(a){const b=this.cache[a];if(this.A&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.l;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return b}();return l}(!1),this);
