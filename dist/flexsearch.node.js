/*
 FlexSearch v0.5.2
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(h,C,D){let z;(z=D.define)&&z.amd?z([],function(){return C}):(z=D.modules)?z[h.toLowerCase()]=C:"object"===typeof exports?module.exports=C:D[h]=C})("FlexSearch",function(){function h(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:T++;this.init(a,b);z(this,"index",function(){return this.c});z(this,"length",function(){return Object.keys(this.c).length})}function C(a,b){const c=a.length,d=E(b),e=[];for(let f=0,k=0;f<c;f++){const c=a[f];if(d&&b(c)||!d&&!b[c])e[k++]=c}return e}function D(a,
b,c,d,e,f){const k=this.g;b=N(b,e?0:d,f,this.m);{f=b.length;const a=Array(f);for(let c=0;c<f;c++)a[c]=k[b[c]];b=a}e&&(b=this.where(e,null,d,b));c&&(E(c)||(y=c.split(":"),1<y.length?c=U:(y=y[0],c=V)),b.sort(c));this.cache&&this.j.set(a,b);return b}function z(a,b,c){Object.defineProperty(a,b,{get:c})}function g(a){return new RegExp(a,"g")}function F(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function H(a,b,c,d,e,f,k,p){if(b[c])return b[c];e=e?(p-(k||p/1.5))*f+(k||p/1.5)*e:f;
b[c]=e;e>=k&&(a=a[p-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return e}function L(a,b){if(a){const c=Object.keys(a);for(let d=0,e=c.length;d<e;d++){const e=c[d],k=a[e];if(k)for(let c=0,d=k.length;c<d;c++)if(k[c]===b){1===d?delete a[e]:k.splice(c,1);break}else A(k[c])&&L(k[c],b)}}}function M(a){let b="",c="";var d="";for(let e=0;e<a.length;e++){const f=a[e];if(f!==c)if(e&&"h"===f){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||
" "===c)b+=f}else b+=f;d=e===a.length-1?"":a[e+1];c=f}return b}function W(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function V(a,b){a=a[y];b=b[y];return a<b?-1:a>b?1:0}function U(a,b){const c=y.length;for(let d=0;d<c;d++)a=a[y[d]],b=b[y[d]];return a<b?-1:a>b?1:0}function N(a,b,c,d){c=[];let e;const f=a.length;if(1<f){const p=t();let x=a[0],m=x.length,l=0;for(;l<m;)p["@"+x[l++]]=1;let g,q=0,n=0;for(;++n<f;){let r=!1;const h=n===f-1;e=[];x=a[n];m=x.length;for(l=0;l<m;){g=x[l++];var k="@"+g;if(p[k]){const a=
p[k];if(a===n){if(h){if(c[q++]=g,b&&q===b)return c}else p[k]=n+1;r=!0}else d&&(k=e[a]||(e[a]=[]),k[k.length]=g)}}if(!r&&!d)break}if(d&&(q=c.length,(n=e.length)&&(!b||q<b)))for(;n--;)if(g=e[n])for(l=0,m=g.length;l<m;l++)if(c[q++]=g[l],b&&q===b)return c}else f&&(c=a[0],b&&c.length>b&&(c=c.slice(0,b)));return c}function B(a){return"string"===typeof a}function v(a){return a.constructor===Array}function E(a){return"function"===typeof a}function A(a){return"object"===typeof a}function w(a){return"undefined"===
typeof a}function O(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=t();return b}function t(){return Object.create(null)}const u={encode:"icase",f:"forward",m:!1,cache:!1,async:!1,F:!1,w:!1,a:!1,C:!1,b:9,threshold:0,depth:0},P={memory:{encode:"extra",f:"strict",threshold:0,b:1},speed:{encode:"icase",f:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",f:"full",threshold:1,b:3},score:{encode:"extra",f:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,b:3,depth:3},
fast:{encode:"icase",f:"strict",threshold:8,b:9,depth:1}},J=[];let T=0;const Q=/\W+/,R={},S={};h.create=function(a){return new h(a)};h.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&J.push(g(b),a[b]);return this};h.registerEncoder=function(a,b){G[a]=b.bind(G);return this};h.registerLanguage=function(a,b){R[a]=b.filter;S[a]=b.stemmer;return this};h.encode=function(a,b){return G[a](b)};h.prototype.init=function(a,b){this.o=[];if(b){var c=b.preset;a=b}else a||(a=u),c=a.preset;b={};
B(a)?(b=P[a],a={}):c&&(b=P[c]);this.f=a.tokenize||b.f||this.f||u.f;this.w=a.rtl||this.w||u.w;this.async="undefined"===typeof Promise||w(c=a.async)?this.async||u.async:c;this.threshold=w(c=a.threshold)?b.threshold||this.threshold||u.threshold:c;this.b=w(c=a.resolution)?c=b.b||this.b||u.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth=w(c=a.depth)?b.depth||this.depth||u.depth:c;this.C=w(c=a.paging)?this.C||u.C:c;this.m=w(c=a.suggest)?this.m||u.m:c;this.s=(c=w(c=a.encode)?b.encode||u.encode:
c)&&G[c]&&G[c].bind(G)||(E(c)?c:this.s||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){B(c)&&(c=R[c]);if(v(c)){b=this.s;var d=t();for(var e=0;e<c.length;e++){var f=b?b(c[e]):c[e];d[f]=1}c=d}this.filter=c}if(c=a.stemmer){var k;b=B(c)?S[c]:c;d=this.s;e=[];for(k in b)b.hasOwnProperty(k)&&(f=d?d(k):k,e.push(g(f+"($|\\W)"),d?d(b[k]):b[k]));this.stemmer=k=e}this.a=e=(c=a.doc)?c:this.a||u.a;this.h=O(this.b-(this.threshold||0));this.i=t();this.c=t();if(e){this.g=t();a.doc=null;k=e.index={};b=e.keys=
[];d=e.field;f=e.tag;v(e.id)||(e.id=e.id.split(":"));if(f){this.A=t();let b=t();if(d)if(B(d))b[d]=a;else if(v(d))for(let c=0;c<d.length;c++)b[d[c]]=a;else A(d)&&(b=d);v(f)||(e.tag=f=[f]);for(d=0;d<f.length;d++)this.A[f[d]]=t();this.D=f;d=b}if(d){let c;v(d)||(A(d)?(c=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)f=d[e],v(f)||(c&&(a=c[f]),b[e]=f,d[e]=f.split(":")),k[f]=new h(a),k[f].g=this.g}}this.v=!0;this.j=(this.cache=c=w(c=a.cache)?this.cache||u.cache:c)?new X(c):!1;return this};
h.prototype.encode=function(a){a&&J.length&&(a=F(a,J));a&&this.o.length&&(a=F(a,this.o));a&&this.s&&(a=this.s(a));a&&this.stemmer&&(a=F(a,this.stemmer));return a};h.prototype.addMatcher=function(a){const b=this.o;for(const c in a)a.hasOwnProperty(c)&&b.push(g(c),a[c]);return this};h.prototype.add=function(a,b,c,d,e){if(this.a&&A(a))return this.u("add",a,b);if(b&&B(b)&&(a||0===a)){var f="@"+a;if(this.c[f]&&!d)return this.update(a,b);if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;
f=new Promise(function(c){setTimeout(function(){e.add(a,b,null,d,!0);e=null;c()})});if(c)f.then(c);else return f;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.f;e=E(c)?c(b):b.split(Q);this.filter&&(e=C(e,this.filter));const r=t();r._ctx=t();const q=e.length,n=this.threshold,x=this.depth,h=this.b,I=this.h,K=this.w;for(let b=0;b<q;b++){var k=e[b];if(k){var p=k.length,g=(K?b+1:q-b)/q,m="";switch(c){case "reverse":case "both":for(var l=p;--l;)m=
k[l]+m,H(I,r,m,a,K?1:(p-l)/p,g,n,h-1);m="";case "forward":for(l=0;l<p;l++)m+=k[l],H(I,r,m,a,K?(l+1)/p:1,g,n,h-1);break;case "full":for(l=0;l<p;l++){const b=(K?l+1:p-l)/p;for(let c=p;c>l;c--)m=k.substring(l,c),H(I,r,m,a,b,g,n,h-1)}break;default:if(p=H(I,r,k,a,1,g,n,h-1),x&&1<q&&p>=n)for(p=r._ctx[k]||(r._ctx[k]=t()),k=this.i[k]||(this.i[k]=O(h-(n||0))),g=b-x,m=b+x+1,0>g&&(g=0),m>q&&(m=q);g<m;g++)g!==b&&H(k,p,e[g],a,0,h-(g<b?b-g:g-b),n,h-1)}}}this.c[f]=1;this.v=!1}return this};h.prototype.u=function(a,
b,c){if(v(b))for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.u(a,b[d],c);this.u(a,b[d])}else{const p=this.a.index,m=this.a.keys;var d=this.a.tag,e=this.a.id;let l;let h;for(var f=0;f<e.length;f++)l=(l||b)[e[f]];if(d){for(e=0;e<d.length;e++){var k=d[e];var g=k.split(":");for(f=0;f<g.length;f++)h=(h||b)[g[f]];h="@"+h}g=this.A[k];g=g[h]||(g[h]=[])}if("remove"===a){delete this.g[l];for(let b=0,a=m.length;b<a;b++){if(b===a-1)return p[m[b]].remove(l,c);p[m[b]].remove(l)}}e=this.a.field;g&&(g[g.length]=
b);for(let f=0,g=e.length;f<g;f++){d=e[f];let h;for(k=0;k<d.length;k++)h=(h||b)[d[k]];this.g[l]=b;d=p[m[f]];k="add"===a?d.add:d.update;if(f===g-1)return k.call(d,l,h,c);k.call(d,l,h)}}};h.prototype.update=function(a,b,c){if(this.a&&A(a))return this.u("update",a,b);this.c["@"+a]&&B(b)&&(this.remove(a),this.add(a,b,c,!0));return this};h.prototype.remove=function(a,b,c){if(this.a&&A(a))return this.u("remove",a,b);var d="@"+a;if(this.c[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=
this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<this.b-(this.threshold||0);b++)L(this.h[b],a);this.depth&&L(this.i,a);delete this.c[d];this.v=!1}return this};let y;h.prototype.search=function(a,b,c,d){if(A(b)){if(v(b))for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=0}let f=a;let k,g,h=[];if(A(a)&&!v(a)){(c=a.callback||b)&&(f.callback=null);g=a.sort;k=
a.where;b=a.limit;var m=a.threshold;a=a.query}if(this.a){m=this.a.index;var l=f.field;if(l)f.field=null,v(l)||(l=[l]);else if(v(f)){var r=f;l=[];for(var q=0;q<f.length;q++)l[q]=f[q].field}else l=this.a.keys;g&&(f.sort=null);q=l.length;for(var n=0;n<q;n++)r&&(f=r[n]),h[n]=m[l[n]].search(f);if(c)return c(D.call(this,a,h,g,b,k,void 0));if(this.async){const c=this;return new Promise(function(d){Promise.all(h).then(function(e){d(D.call(c,a,e,g,b,k,void 0))})})}return D.call(this,a,h,g,b,k,void 0)}m||(m=
this.threshold||0);E(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let a=this;m=new Promise(function(c){setTimeout(function(){c(a.search(f,b,null,!0));a=null})});if(c)m.then(c);else return m;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!B(a))return h;f=a;if(this.cache)if(this.v){if(c=this.j.get(a))return c}else this.j.clear(),this.v=!0;f=this.encode(f);if(!f.length)return h;c=this.f;c=E(c)?c(f):f.split(Q);this.filter&&(c=C(c,this.filter));
r=c.length;d=!0;e=[];const u=t();1<r&&(this.depth?(l=!0,n=c[0],u[n]=1):c.sort(W));if(!l||(q=this.i)[n]){let b=this.b;for(let a=l?1:0;a<r;a++){const f=c[a];if(f){if(!u[f]){const a=[];let c=!1,g=0;if(n=l?q[n]:this.h){let d;for(let e=0;e<b-m;e++)if(d=n[e][f])a[g++]=d,c=!0}if(c)e[e.length]=1<g?a.concat.apply([],a):a[0];else if(!this.m){d=!1;break}u[f]=1}n=f}}}else d=!1;d&&(h=N(e,b,void 0,this.m));this.cache&&!this.a&&this.j.set(a,h);return h};h.prototype.find=function(a,b){return this.where(a,b,1)[0]||
null};h.prototype.where=function(a,b,c,d){const e=d||this.g,f=[];let g=0;var h;let t;if("number"===typeof a)return[e[a]];if(B(a)){if(w(b))return[e[a]];if("id"===a)return[e[b]];var m=1;var l=[a.split(":")];t=!0}else{if(E(a)){b=d||Object.keys(e);c=b.length;for(h=0;h<c;h++)m=d?d[h]:e[b[h]],a(m)&&(f[g++]=m);return f}c||(c=b);h=Object.keys(a);m=h.length;t=!1;if(1===m&&"id"===h[0])return[e[a.id]];if((l=this.D)&&!d)for(var r=0;r<l.length;r++){var q=l[r],n=a[q];if(!w(n)){d=this.A[q]["@"+n];if(0===--m)return d;
h.splice(h.indexOf(q),1);delete a[q];break}}l=Array(m);for(r=0;r<m;r++)l[r]=h[r].split(":")}r=d||Object.keys(e);q=r.length;for(n=0;n<q;n++){const k=d?d[n]:e[r[n]];let p=!0;for(let c=0;c<m;c++){t||(b=a[h[c]]);const d=l[c],e=d.length;let f=k;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==b){p=!1;break}}if(p&&(f[g++]=k,c&&g===c))break}return f};h.prototype.info=function(){let a;let b=0,c=0,d=0;for(var e=0;e<this.b-(this.threshold||0);e++){a=Object.keys(this.h[e]);for(let g=0;g<a.length;g++){var f=
this.h[e][a[g]].length;b+=1*f+2*a[g].length+4;c+=f;d+=2*a[g].length}}a=Object.keys(this.c);f=a.length;for(e=0;e<f;e++)b+=2*a[e].length+2;return{id:this.id,memory:b,items:f,sequences:c,chars:d,cache:this.cache&&this.cache.l?this.cache.l.length:!1,matcher:J.length+(this.o?this.o.length:0),worker:this.F,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.f}};h.prototype.clear=function(){return this.destroy().init()};h.prototype.destroy=function(){this.cache&&(this.j.clear(),
this.j=null);this.h=this.i=this.c=null;if(this.a){const a=this.a.keys;for(let b=0;b<a.length;b++)this.a.index[a[b]].destroy();this.a=this.g=null}return this};h.prototype.export=function(){if(this.a){const a=this.a.keys,b=Array(a.length+1);let c=0;for(;c<a.length;c++){const d=this.a.index[a[c]];b[c]=[d.h,d.i,d.c]}b[c]=this.g;return JSON.stringify(b)}return JSON.stringify([this.h,this.i,this.c])};h.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.keys,c=b.length;for(let d=0;d<
c;d++){const e=this.a.index[b[d]];e.h=a[d][0];e.i=a[d][1];e.c=a[d][2];e.g=a[c]}this.g=a[c]}else this.h=a[0],this.i=a[1],this.c=a[2]};const G={icase:function(a){return a.toLowerCase()},simple:function(){const a=[g("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",g("[\u00e8\u00e9\u00ea\u00eb]"),"e",g("[\u00ec\u00ed\u00ee\u00ef]"),"i",g("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",g("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",g("[\u00fd\u0177\u00ff]"),"y",g("\u00f1"),"n",g("\u00e7"),"c",g("\u00df"),"s",g(" & "),
" and ",g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(b){b=F(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[g("ae"),"a",g("ai"),"ei",g("ay"),"ei",g("ey"),"ei",g("oe"),"o",g("ue"),"u",g("ie"),"i",g("sz"),"s",g("zs"),"s",g("sh"),"s",g("ck"),"k",g("cc"),"k",g("dt"),"t",g("ph"),"f",g("pf"),"f",g("ou"),"o",g("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=F(b,a));c||1<b.length&&(b=M(b));return b}}(),extra:function(){const a=[g("p"),
"b",g("z"),"s",g("[cgq]"),"k",g("n"),"m",g("d"),"t",g("[vw]"),"f",g("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+F(d.substring(1),a))}b=b.join(" ");b=M(b)}return b}}(),balance:function(){const a=[g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(b){return M(F(b.toLowerCase(),a))}}()},X=function(){function a(a){this.clear();this.B=!0!==a&&a}a.prototype.clear=function(){this.cache=
t();this.count=t();this.index=t();this.l=[]};a.prototype.set=function(a,c){if(this.B&&w(this.cache[a])){let b=this.l.length;if(b===this.B){b--;const a=this.l[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.l[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.B&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.l;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);
c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return a}();return h}(!1),this);
