/*
 FlexSearch v0.5.0
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(x,F,f){let y;(y=f.define)&&y.amd?y([],function(){return F}):(y=f.modules)?y[x.toLowerCase()]=F:"object"===typeof exports?module.exports=F:f[x]=F})("FlexSearch",function U(x){function f(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:V++;this.init(a,b);K(this,"index",function(){return this.b});K(this,"length",function(){return Object.keys(this.b).length})}function y(a,b,c,d){this.s!==this.f&&(this.j=this.j.concat(c),this.s++,d&&this.j.length>=d&&(this.s=this.f),this.F&&this.s===
this.f&&(this.cache&&this.m.set(b,this.j),this.F(this.j),this.j=[]));return this}function A(a,b){a=a.concat.apply([],a);b&&(G(b)||(z=b.split(":"),1<z.length?b=W:(z=z[0],b=X)),a.sort(b));return a}function K(a,b,c){Object.defineProperty(a,b,{get:c})}function h(a){return new RegExp(a,"g")}function C(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function I(a,b,c,d,e,g,k){if(b[c])return b[c];e=e?(9-(k||6))*g+(k||6)*e:g;b[c]=e;e>=k&&(a=a[9-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);
return e}function N(a,b){if(a){const c=Object.keys(a);for(let d=0,e=c.length;d<e;d++){const e=c[d],k=a[e];if(k)for(let c=0,d=k.length;c<d;c++)if(k[c]===b){1===d?delete a[e]:k.splice(c,1);break}else D(k[c])&&N(k[c],b)}}}function O(a){let b="",c="";var d="";for(let e=0;e<a.length;e++){const g=a[e];if(g!==c)if(e&&"h"===g){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=g}else b+=g;d=e===a.length-1?"":a[e+1];c=g}return b}
function Y(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function Z(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function X(a,b){a=a[z];b=b[z];return a<b?-1:a>b?1:0}function W(a,b){const c=z.length;for(let d=0;d<c;d++)a=a[z[d]],b=b[z[d]];return a<b?-1:a>b?1:0}function aa(a,b,c,d){let e=[],g;const k=a.length;if(1<k){a.sort(Z);const h=q();let l=a[0],m=l.length,f=0;for(;f<m;)h["@"+l[f++]]=1;let n,u=0,t=0;for(;++t<k;){let r=!1;const E=t===k-1;g=[];l=a[t];m=l.length;for(f=0;f<m;){n=l[f++];var p="@"+n;if(h[p]){const a=
h[p];if(a===t){if(E){if(e[u++]=c?c[p]:n,b&&u===b)return e}else h[p]=t+1;r=!0}else d&&(p=g[a]||(g[a]=[]),p[p.length]=n)}}if(!r&&!d)break}if(d&&(u=e.length,(t=g.length)&&(!b||u<b)))for(;t--;)if(n=g[t])for(f=0,m=n.length;f<m;f++)if(e[u++]=c?c["@"+n[f]]:n[f],b&&u===b)return e}else if(k)if(c)for(a=a[0],d=a.length,b&&b<d&&(d=b),e=Array(d),b=0;b<d;b++)e[b]=c["@"+a[b]];else e=a[0],b&&e.length>b&&(e=e.slice(0,b));return e}function J(a){return"string"===typeof a}function G(a){return"function"===typeof a}function D(a){return"object"===
typeof a}function B(a){return"undefined"===typeof a}function P(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=q();return b}function q(){return Object.create(null)}function ba(){let a,b;self.onmessage=function(c){if(c=c.data)if(c.search){const d=b.search(c.content,c.threshold?{limit:c.limit,threshold:c.threshold}:c.limit);self.postMessage({id:a,content:c.content,limit:c.limit,result:d})}else c.add?b.add(c.id,c.content):c.update?b.update(c.id,c.content):c.remove?b.remove(c.id):c.clear?b.clear():c.info?
(c=b.info(),c.worker=a,console.log(c)):c.register&&(a=c.id,c.options.cache=!1,c.options.async=!1,c.options.worker=!1,b=(new Function(c.register.substring(c.register.indexOf("{")+1,c.register.lastIndexOf("}"))))(),b=new b(c.options))}}function ca(a,b,c,d){a=x("flexsearch","id"+a,ba,function(a){(a=a.data)&&a.result&&d(a.id,a.content,a.result,a.limit)},b);const e=U.toString();c.id=b;a.postMessage({register:e,options:c,id:b});return a}const w={encode:"icase",c:"forward",A:!1,cache:!1,async:!1,f:!1,D:!1,
threshold:0,depth:0,a:!1},Q={memory:{encode:"extra",c:"strict",threshold:7},speed:{encode:"icase",c:"strict",threshold:7,depth:2},match:{encode:"extra",c:"full"},score:{encode:"extra",c:"strict",threshold:5,depth:4},balance:{encode:"balance",c:"strict",threshold:6,depth:3},fastest:{encode:"icase",c:"strict",threshold:9,depth:1}},M=[];let V=0;const R=h("\\W+"),S={},T={};f.create=function(a){return new f(a)};f.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&M.push(h(b),a[b]);return this};
f.registerEncoder=function(a,b){H[a]=b.bind(H);return this};f.registerLanguage=function(a,b){S[a]=b.filter;T[a]=b.stemmer;return this};f.encode=function(a,b){return H[a](b)};f.prototype.init=function(a,b){this.u=[];if(b){var c=b.preset;a=b}else a||(a=w),c=a.preset;b={};J(a)?(b=Q[a],a={}):c&&(b=Q[c]);if(c=a.worker)if("undefined"===typeof Worker)a.worker=!1,this.l=null;else{var d=parseInt(c,10)||4;this.C=-1;this.s=0;this.j=[];this.F=null;this.l=Array(d);for(var e=0;e<d;e++)this.l[e]=ca(this.id,e,a,
y.bind(this))}this.c=a.tokenize||b.c||this.c||w.c;this.D=a.rtl||this.D||w.D;this.async="undefined"===typeof Promise||B(c=a.async)?this.async||w.async:c;this.f=B(c=a.worker)?this.f||w.f:c;this.threshold=B(c=a.threshold)?b.threshold||this.threshold||w.threshold:c;this.depth=B(c=a.depth)?b.depth||this.depth||w.depth:c;this.A=B(c=a.suggest)?this.A||w.A:c;this.v=(c=B(c=a.encode)?b.encode||w.encode:c)&&H[c]&&H[c].bind(H)||(G(c)?c:this.v||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){c=S[c]||c;b=
this.v;d=q();if(c)for(e=0;e<c.length;e++){var g=b?b(c[e]):c[e];d[g]=String.fromCharCode(65E3-c.length+e)}this.filter=c=d}if(c=a.stemmer){var k;b=T[c]||c;d=this.v;e=[];if(b)for(k in b)b.hasOwnProperty(k)&&(g=d?d(k):k,e.push(h("(?=.{"+(g.length+3)+",})"+g+"$"),d?d(b[k]):b[k]));this.stemmer=k=e}this.a=g=(c=a.doc)?c:this.a||w.a;this.h=P(10-(this.threshold||0));this.i=q();this.b=q();if(g){this.g=q();a.doc=null;k=g.index=[];b=g.ref={};d=g.field;e=g.tag;g.id=g.id.split(":");if(e){this.G=q();e.constructor===
Array||(g.tag=e=[e]);for(let a=0;a<e.length;a++)this.G[e[a]]=q(),e[a]=e[a].split(":")}if(d)for(d.constructor===Array||(g.field=d=[d]),g=0;g<d.length;g++)b[d[g]]=g,d[g]=d[g].split(":"),k[g]=new f(a),k[g].g=this.g,e&&(k[g].G=this.G)}this.B=!0;this.m=(this.cache=c=B(c=a.cache)?this.cache||w.cache:c)?new da(c):!1;return this};f.prototype.encode=function(a){a&&M.length&&(a=C(a,M));a&&this.u.length&&(a=C(a,this.u));a&&this.v&&(a=this.v(a));a&&this.stemmer&&(a=C(a,this.stemmer));return a};f.prototype.addMatcher=
function(a){const b=this.u;for(const c in a)a.hasOwnProperty(c)&&b.push(h(c),a[c]);return this};f.prototype.add=function(a,b,c,d,e){if(this.a&&D(a))return this.w("add",a,b);if(b&&J(b)&&(a||0===a)){var g="@"+a;if(this.b[g]&&!d)return this.update(a,b);if(this.f)return++this.C>=this.l.length&&(this.C=0),this.l[this.C].postMessage({add:!0,id:a,content:b}),this.b[g]=""+this.C,c&&c(),this;if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;g=new Promise(function(c){setTimeout(function(){e.add(a,
b,null,d,!0);e=null;c()})});if(c)g.then(c);else return g;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.c;e=G(c)?c(b):b.split(R);const m=q();m._ctx=q();const n=this.threshold,r=this.depth,t=this.h,v=e.length,L=this.D;for(let b=0;b<v;b++){var k=e[b];if(k){var p=k.length,h=(L?b+1:v-b)/v,l="";switch(c){case "reverse":case "both":for(var f=p;--f;)l=k[f]+l,I(t,m,l,a,L?1:(p-f)/p,h,n);l="";case "forward":for(f=0;f<p;f++)l+=k[f],I(t,m,l,a,L?(f+1)/
p:1,h,n);break;case "full":for(f=0;f<p;f++){const b=(L?f+1:p-f)/p;for(let c=p;c>f;c--)l=k.substring(f,c),I(t,m,l,a,b,h,n)}break;default:if(p=I(t,m,k,a,1,h,n),r&&1<v&&p>=n)for(p=m._ctx[k]||(m._ctx[k]=q()),k=this.i[k]||(this.i[k]=P(10-(n||0))),h=b-r,l=b+r+1,0>h&&(h=0),l>v&&(l=v);h<l;h++)h!==b&&I(k,p,e[h],a,0,10-(h<b?b-h:h-b),n)}}}this.b[g]=1;this.B=!1}return this};f.prototype.w=function(a,b,c){if(b.constructor===Array)for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.w(a,b[d],c);this.w(a,b[d])}else{const k=
this.a.index;var d=this.a.tag,e=this.a.id;let h;for(var g=0;g<e.length;g++)h=(h||b)[e[g]];if(d)for(e=0;e<d.length;e++);if("remove"===a){delete this.g["@"+h];for(let a=0,b=k.length;a<b;a++){if(a===b-1)return k[a].remove(h,c);k[a].remove(h)}}e=this.a.field;for(let f=0,p=e.length;f<p;f++){d=e[f];let l;for(g=0;g<d.length;g++)l=(l||b)[d[g]];this.g["@"+h]=b;d=k[f];g="add"===a?d.add:d.update;if(f===p-1)return g.call(d,h,l,c);g.call(d,h,l)}}};f.prototype.update=function(a,b,c){if(this.a&&D(a))return this.w("update",
a,b);this.b["@"+a]&&J(b)&&(this.remove(a),this.add(a,b,c,!0));return this};f.prototype.remove=function(a,b,c){if(this.a&&D(a))return this.w("remove",a,b);var d="@"+a;if(this.b[d]){if(this.f)return this.l[this.b[d]].postMessage({remove:!0,id:a}),delete this.b[d],b&&b(),this;if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),
b(),this}for(b=0;b<10-(this.threshold||0);b++)N(this.h[b],a);this.depth&&N(this.i,a);delete this.b[d];this.B=!1}return this};let z;f.prototype.search=function(a,b,c,d){if(D(b)){if(b.constructor===Array)for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=0}let g=a;let h,f=[];if(D(a)&&a.constructor!==Array){(c=a.callback||b)&&(g.callback=null);var r=a.boost;var l=a.where;h=a.sort;b=a.limit;var m=a.threshold;a=a.query}if(this.a){a=this.a.ref;m=this.a.index;if(l=g.field)g.field=null;else if(g.constructor===
Array){var E=g;l=[];for(var n=0;n<g.length;n++)l[n]=g[n].field}else l=Object.keys(a);if(D(l)){l.constructor===Array||(l=[l]);n=l.length;for(var u=0;u<n;u++)E&&(g=E[u]),f[u]=m[a[l[u]]].search(g);return c?c(A(f,h)):this.async?new Promise(function(a){Promise.all(f).then(function(b){a(A(b,h))})}):A(f,h)}return m[a[l]].search(g,c)}m||(m=this.threshold||0);G(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(this.f)for(this.F=c,this.s=0,this.j=[],l=0;l<this.f;l++)this.l[l].postMessage({search:!0,limit:b,threshold:m,content:a});
else{if(!d){if(this.async&&"function"!==typeof importScripts){let d=this;a=new Promise(function(a){setTimeout(function(){a(d.search(g,b,null,!0));d=null})});if(c)a.then(c);else return a;return this}if(c)return c(this.search(g,b,null,!0)),this}if(!a||!J(a))return f;g=a;if(this.cache)if(this.B){if(c=this.m.get(a))return c}else this.m.clear(),this.B=!0;g=this.encode(g);if(!g.length)return f;c=this.c;c=G(c)?c(g):g.split(R);E=c.length;d=!0;e=[];var t=q();if(1<E)if(this.depth){n=!0;var v=c[0];t[v]=1}else c.sort(Y);
if(!n||(u=this.i)[v]){let a=0;r&&(m=(m||1)/r,0>r&&(a=m));for(r=n?1:0;r<E;r++){const b=c[r];if(b){if(!t[b]){const c=[];let g=!1,h=0;if(v=n?u[v]:this.h){let d;for(let e=a;e<10-m;e++)if(d=v[e][b])c[h++]=d,g=!0}if(g)e[e.length]=1<h?c.concat.apply([],c):c[0];else if(!this.A){d=!1;break}t[b]=1}v=b}}}else d=!1;d&&(f=aa(e,b,this.g,this.A));l&&(f=this.where(l,null,b,f));h&&(f=A([f],h));this.cache&&this.m.set(a,f);return f}};f.prototype.find=function(a,b){return this.where(a,b,1)[0]||null};f.prototype.where=
function(a,b,c,d){const e=d||this.g,g=[];let h=0;var f;let r,l;if(J(a)){if("id"===a)return[e["@"+b]];var m=1;l=[a.split(":")];r=!0}else{if(G(a)){b=d||Object.keys(e);c=b.length;for(f=0;f<c;f++)m=d?d[f]:e[b[f]],a(m)&&(g[h++]=m);return g}c||(c=b);f=Object.keys(a);m=f.length;r=!1;if(1===m&&"id"===f[0])return[e["@"+a.id]];l=Array(m);for(var q=0;q<m;q++)l[q]=f[q].split(":")}q=d||Object.keys(e);const n=q.length;for(let k=0;k<n;k++){const p=d?d[k]:e[q[k]];let n=!0;for(let c=0;c<m;c++){r||(b=a[f[c]]);const d=
l[c],e=d.length;let g=p;if(1<e)for(let a=0;a<e;a++)g=g[d[a]];else g=g[d[0]];if(g!==b){n=!1;break}}if(n&&(g[h++]=p,c&&h===c))break}return g};f.prototype.info=function(){if(this.f)for(var a=0;a<this.f;a++)this.l[a].postMessage({info:!0,id:this.id});else{var b=0,c=0,d=0;for(var e=0;e<10-(this.threshold||0);e++){a=Object.keys(this.h[e]);for(let f=0;f<a.length;f++){var g=this.h[e][a[f]].length;b+=1*g+2*a[f].length+4;c+=g;d+=2*a[f].length}}a=Object.keys(this.b);g=a.length;for(e=0;e<g;e++)b+=2*a[e].length+
2;return{id:this.id,memory:b,items:g,sequences:c,chars:d,cache:this.cache&&this.cache.o?this.cache.o.length:!1,matcher:M.length+(this.u?this.u.length:0),worker:this.f,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.c}}};f.prototype.clear=function(){return this.destroy().init()};f.prototype.destroy=function(){this.cache&&(this.m.clear(),this.m=null);this.h=this.i=this.b=null;if(this.a){const a=this.g.index;for(let b=0;b<a.length;b++)a.destroy();this.g=null}return this};
f.prototype.export=function(){if(this.a){const a=this.a.index,b=Array(a.length+1);let c=0;for(;c<a.length;c++)b[c]=[a[c].h,a[c].i,a[c].b];b[c]=this.g;return JSON.stringify(b)}return JSON.stringify([this.h,this.i,this.b])};f.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.index,c=b.length;for(let d=0;d<c;d++){const e=b[d];e.h=a[d][0];e.i=a[d][1];e.b=a[d][2];e.g=a[c]}this.g=a[c]}else this.h=a[0],this.i=a[1],this.b=a[2],this.g=a[3]};const H={icase:function(a){return a.toLowerCase()},
simple:function(){const a=[h("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",h("[\u00e8\u00e9\u00ea\u00eb]"),"e",h("[\u00ec\u00ed\u00ee\u00ef]"),"i",h("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",h("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",h("[\u00fd\u0177\u00ff]"),"y",h("\u00f1"),"n",h("\u00e7"),"c",h("\u00df"),"s",h(" & ")," and ",h("[-/]")," ",h("[^a-z0-9 ]"),"",h("\\s+")," "];return function(b){b=C(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[h("ae"),"a",h("ai"),"ei",h("ay"),
"ei",h("ey"),"ei",h("oe"),"o",h("ue"),"u",h("ie"),"i",h("sz"),"s",h("zs"),"s",h("sh"),"s",h("ck"),"k",h("cc"),"k",h("dt"),"t",h("ph"),"f",h("pf"),"f",h("ou"),"o",h("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=C(b,a));c||1<b.length&&(b=O(b));return b}}(),extra:function(){const a=[h("p"),"b",h("z"),"s",h("[cgq]"),"k",h("n"),"m",h("d"),"t",h("[vw]"),"f",h("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=
0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+C(d.substring(1),a))}b=b.join(" ");b=O(b)}return b}}(),balance:function(){const a=[h("[-/]")," ",h("[^a-z0-9 ]"),"",h("\\s+")," "];return function(b){return O(C(b.toLowerCase(),a))}}()},da=function(){function a(a){this.clear();this.H=!0!==a&&a}a.prototype.clear=function(){this.cache=q();this.count=q();this.index=q();this.o=[]};a.prototype.set=function(a,c){if(this.H&&B(this.cache[a])){let b=this.o.length;if(b===this.H){b--;const a=this.o[b];delete this.cache[a];
delete this.count[a];delete this.index[a]}this.index[a]=b;this.o[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.H&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.o;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return a}();return f}(function(){const x={},F="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;
return function(f,y,A,K,h){A=F?URL.createObjectURL(new Blob(["("+A.toString()+")()"],{type:"text/javascript"})):f+".min.js";f+="-"+y;x[f]||(x[f]=[]);x[f][h]=new Worker(A);x[f][h].onmessage=K;return x[f][h]}}()),this);
