/**!
 * FlexSearch.js v0.7.0 (Light)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){'use strict';var u;Object.assign||(Object.assign=function(){for(var a=arguments,b=a.length,c=a[0],f=1,d,h,g;f<b;f++){d=a[f];h=Object.keys(d);g=h.length;for(var e=0,n;e<g;e++)n=h[e],c[n]=d[n]}return c});function w(a){return"string"===typeof a}function x(a){return"function"===typeof a}function y(a){for(var b=Array(a),c=0;c<a;c++)b[c]=A();return b}function A(){return Object.create(null)}function C(a,b){for(var c=0,f=b.length;c<f;c+=2)a=a.replace(b[c],b[c+1]);return a};var G={encode:function(a){return a.toLowerCase()},o:"strict",split:/[\W_]+/,cache:!1,async:!1,s:!1,j:!1,m:!1,f:9,threshold:0,depth:0},H=0,I={};function J(a){if(!(this instanceof J))return new J(a);var b=a&&a.id;this.id=b||0===b?b:H++;this.init(a);K(this,"index",function(){return Object.keys(this.a)});K(this,"length",function(){return this.index.length})}J.registerCharset=function(a,b,c,f){a=I[a]||(I[a]={});a.h=b;a.split=c;a.j=f;return J};
J.registerLanguage=function(a,b,c,f){a=I[a]||(I[a]={});a.filter=b;a.l=c;a.c=f;return J};u=J.prototype;
u.init=function(a){this.c=[];var b;this.h||(a?a=Object.assign({},G,a):a=G);if(a){var c=a.charset,f=a.lang;this.i=a.tokenize;this.split=w(b=c||a.split)?I[b]?I[b].split:new RegExp(b,"g"):b;this.j=w(b=c||a.rtl)?I[b].j:b;this.threshold=a.threshold;this.f=(b=a.resolution)<=this.threshold?this.threshold+1:b;this.depth="strict"===this.i&&a.depth||0;this.h=w(b=c||a.encode)?I[-1===b.indexOf(":")?b+":default":b].encode:b;if(c=b=f||a.matcher){b=w(b)?I[b].c:b;c=Object.keys(b);for(var d=c.length,h=Array(2*d),
g=0,e=0;g<d;g++){var n=c[g];h[e++]=new RegExp(n,"g");h[e++]=b[n]}c=h}this.c=c;if(c=b=f||a.filter)for(b=w(b)?I[b].filter:b,c=A(),d=0;d<b.length;d++)c[b[d]]=1;this.filter=c;if(a=b=f||a.stemmer){a=w(b)?I[b].l:b;f=Object.keys(a);b=f.length;c=Array(2*b);for(h=d=0;d<b;d++)g=f[d],c[h++]=new RegExp(g+"(?!\\b)"+g+"(\\b)","g"),c[h++]=a[g];a=c}this.l=a}this.g=y(this.f-(this.threshold||0));this.b=A();this.a={};return this};
u.add=function(a,b,c,f,d){if(b&&w(b)&&(a||0===a)){if(this.a[a]&&!f)return this.update(a,b);if(!d&&c)return this.add(a,b,null,f,!0),c(),this;b=this.encode(b);if(!b.length)return this;b=L(this,b);c=A();c._ctx=A();f=b.length;d=this.threshold;for(var h=this.depth,g=this.f,e=this.g,n=this.j,q=0;q<f;q++){var p=b[q];if(p){var l=p.length,m=(n?q+1:f-q)/f,r="";switch(this.i){case "reverse":case "both":for(var k=l;--k;)r=p[k]+r,M(e,c,r,a,n?1:(l-k)/l,m,d,g-1);r="";case "forward":for(k=0;k<l;k++)r+=p[k],M(e,c,
r,a,n?(k+1)/l:1,m,d,g-1);break;case "full":for(k=0;k<l;k++)for(var t=(n?k+1:l-k)/l,v=l;v>k;v--)r=p.substring(k,v),M(e,c,r,a,t,m,d,g-1);break;default:if(l=M(e,c,p,a,1,m,d,g-1),h&&1<f&&l>=d)for(l=c._ctx[p]||(c._ctx[p]=A()),p=this.b[p]||(this.b[p]=y(g-(d||0))),m=q-h,r=q+h+1,0>m&&(m=0),r>f&&(r=f);m<r;m++)m!==q&&M(p,l,b[m],a,0,g-(m<q?q-m:m-q),d,g-1)}}}this.a[a]=1}return this};u.update=function(a,b,c){this.a[a]&&w(b)&&(this.remove(a),this.add(a,b,c,!0));return this};
u.remove=function(a,b,c){if(this.a[a]){if(!c&&b)return this.remove(a,null,!0),b(),this;for(b=0;b<this.f-(this.threshold||0);b++)N(this.g[b],a);this.depth&&N(this.b,a);delete this.a[a]}return this};
u.search=function(a,b,c,f){b&&x(b)?(c=b,b=1E3):b||0===b||(b=1E3);var d=[],h=a;if("object"===typeof a){var g=!1;b=a.limit;var e=a.threshold;var n=!1;a=a.query}e||(e=this.threshold||0);if(!f&&c)return c(this.search(h,b,null,!0)),this;if(!a||!w(a))return d;h=this.encode(a);if(!h.length)return d;c=L(this,h);f=c.length;h=!0;a=[];var q=A(),p,l=0;1<f&&(this.depth?p=!0:c.sort(Q));var m;if(!p||(m=this.b))for(var r=this.f;l<f;l++){var k=c[l];if(k){if(p){if(!t)if(m[k]){var t=k;q[k]=1}else if(!n)return d;if(n&&
l===f-1&&!a.length)p=!1,k=t||k,q[k]=0;else if(!t)continue}if(!q[k]){var v=[],E=!1,O=0;if(t=p?m[t]:this.g)for(var P,F=0;F<r-e;F++)if(P=t[F]&&t[F][k])v[O++]=P,E=!0;if(E)t=k,a[a.length]=1<O?v.concat.apply([],v):v[0];else{h=!1;break}q[k]=1}}}else h=!1;if(h)a:{d=[];!0===g?(g="0",e=""):e=g&&g.split(":");n=a.length;if(1<n){p=A();t=0;r=!0;h=0;var B;for(e&&(2===e.length?e=!1:e=B=parseInt(e[0],10));t<n;t++)if(q=t===n-1,m=a[t],f=m.length){if(r)if(z){l=z.length;for(c=0;c<l;c++)p["@"+z[c]]=1;var z=null;r=!1}else{z=
m;continue}k=!1;for(c=0;c<f;c++)if(l=m[c],v="@"+l,(E=p[v]||0)&&E===t){if(q){if(!B||--B<h)if(d[h++]=l,b&&h===b){d=R(g,h+(e||0),d);break a}}else p[v]=t+1;k=!0}if(!k)break}else{d=R(g,D,m);break a}z&&(d=z)}else n&&(d=a[0],e&&(e=parseInt(e[0],10)));if(b){z=d.length;e&&e>z&&(e=0);B=e||0;var D=B+b;D<z?d=d.slice(B,D):(D=0,B&&(d=d.slice(B)))}d=R(g,D,d)}return d};u.clear=function(){return this.destroy().init()};u.destroy=function(){this.g=this.b=this.a=null;return this};
function K(a,b,c){Object.defineProperty(a,b,{get:c})}function M(a,b,c,f,d,h,g,e){if(b[c])return b[c];d=d?(e-(g||e/1.5))*h+(g||e/1.5)*d:h;b[c]=d;d>=g&&(a=a[e-(d+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=f);return d}function N(a,b){if(a)for(var c=Object.keys(a),f=0,d=c.length;f<d;f++){var h=c[f],g=a[h];if(g)for(var e=0,n=g.length;e<n;e++)if(g[e]===b){1===n?delete a[h]:g.splice(e,1);break}else"object"===typeof g[e]&&N(g[e],b)}}
u.encode=function(a){a&&this.h&&(a=this.h(a));a&&this.c.length&&(a=C(a,this.c));a&&this.l&&(a=C(a,this.l));return a};function L(a,b){b=b.constructor===Array?b:x(a.i)?a.i(b):b.split(a.split);if(a.filter){a=a.filter;for(var c=b.length,f=x(a),d=[],h=0,g=0;h<c;h++){var e=b[h];e&&(f&&a(e)||!f&&!a[e])&&(d[g++]=e)}b=d}return b}function Q(a,b){return b.length-a.length}function R(a,b,c){return a?{page:a,next:b?""+b:null,result:c}:c};(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return J}):"object"===typeof a.exports?a.module.exports=J:a.FlexSearch=J})();}).call(this);
