/**!
 * FlexSearch.js v0.7.0 (Light)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){'use strict';var v;Object.assign||(Object.assign=function(){for(var a=arguments,b=a.length,c=a[0],e=1,d,h,g;e<b;e++){d=a[e];h=Object.keys(d);g=h.length;for(var f=0,p;f<g;f++)p=h[f],c[p]=d[p]}return c});function w(a){return"string"===typeof a}function y(a){for(var b=Array(a),c=0;c<a;c++)b[c]=z();return b}function z(){return Object.create(null)}function B(a,b){for(var c=0,e=b.length;c<e&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a};var C=/[\W_]+/;var G={encode:function(a){if(a=a.toLowerCase())if(a&&this.g&&(a=B(a,this.g)),this.h&&1<a.length&&(a=B(a,this.h)),a&&(C||""===C)&&(a=a.split(C),this.filter)){for(var b=this.filter,c=a.length,e=[],d=0,h=0;d<c;d++){var g=a[d];g&&!b[g]&&(e[h++]=g)}a=e}return a},tokenize:"strict",cache:!1,async:!1,worker:!1,rtl:!1,doc:!1,resolution:9,threshold:0,depth:0},H=0,I={},J={};
function K(a){if(!(this instanceof K))return new K(a);var b=a&&a.id;this.id=b||0===b?b:H++;this.init(a);L(this,"index",function(){return Object.keys(this.a)});L(this,"length",function(){return this.index.length})}K.registerCharset=function(a,b){J[a]=b;return K};K.registerLanguage=function(a,b){J[a]=b;return K};v=K.prototype;
v.init=function(a){var b;this.encode||(a?a=Object.assign({},G,a):a=G);if(a){var c=a.charset,e=a.lang;this.j=(w(c)?J[c].l:c&&c.l)||a.tokenize;this.i=w(b=a.rtl||c)?J[b].i:c&&c.i||b;this.threshold=a.threshold;this.f=(b=a.resolution)<=this.threshold?this.threshold+1:b;this.depth="strict"===this.j&&a.depth||0;this.encode=w(b=a.encode||c)?J[-1===b.indexOf(":")?b+":default":b].encode:c&&c.encode||b;this.g=(b=a.matcher||e)&&M(w(b)?I[b].g:e&&e.g||b,!1);if(c=b=a.filter||e){c=w(b)?I[b].filter:e&&e.filter||b;
for(var d=z(),h=0,g=c.length;h<g;h++)d[c[h]]=1;c=d}this.filter=c;this.h=(b=a.stemmer||e)&&M(w(b)?I[b].h:e&&e.h||b,!0)}this.c=y(this.f-(this.threshold||0));this.b=z();this.a={};return this};
v.add=function(a,b,c,e,d){if(b&&w(b)&&(a||0===a)){if(this.a[a]&&!e)return this.update(a,b);if(!d&&c)return this.add(a,b,null,e,!0),c(),this;b=this.encode(b);if(!b.length)return this;c=z();c._ctx=z();e=b.length;d=this.threshold;for(var h=this.depth,g=this.f,f=this.c,p=this.i,l=0;l<e;l++){var q=b[l];if(q){var m=q.length,n=(p?l+1:e-l)/e,r="";switch(this.j){case "reverse":case "both":for(var k=m;--k;)r=q[k]+r,N(f,c,r,a,p?1:(m-k)/m,n,d,g-1);r="";case "forward":for(k=0;k<m;k++)r+=q[k],N(f,c,r,a,p?(k+1)/
m:1,n,d,g-1);break;case "full":for(k=0;k<m;k++)for(var t=(p?k+1:m-k)/m,u=m;u>k;u--)r=q.substring(k,u),N(f,c,r,a,t,n,d,g-1);break;default:if(m=N(f,c,q,a,1,n,d,g-1),h&&1<e&&m>=d)for(m=c._ctx[q]||(c._ctx[q]=z()),q=this.b[q]||(this.b[q]=y(g-(d||0))),n=l-h,r=l+h+1,0>n&&(n=0),r>e&&(r=e);n<r;n++)n!==l&&N(q,m,b[n],a,0,g-(n<l?l-n:n-l),d,g-1)}}}this.a[a]=1}return this};v.update=function(a,b,c){this.a[a]&&w(b)&&(this.remove(a),this.add(a,b,c,!0));return this};
v.remove=function(a,b,c){if(this.a[a]){if(!c&&b)return this.remove(a,null,!0),b(),this;for(b=0;b<this.f-(this.threshold||0);b++)O(this.c[b],a);this.depth&&O(this.b,a);delete this.a[a]}return this};
v.search=function(a,b,c,e){b&&"function"===typeof b?(c=b,b=1E3):b||0===b||(b=1E3);var d=[],h=a;if("object"===typeof a){var g=!1;b=a.limit;var f=a.threshold;var p=!1;a=a.query}f||(f=this.threshold||0);if(!e&&c)return c(this.search(h,b,null,!0)),this;if(!a||!w(a))return d;h=this.encode(a);if(!h.length)return d;c=h;e=c.length;h=!0;a=[];var l=z(),q,m=0;1<e&&(this.depth?q=!0:c.sort(R));var n;if(!q||(n=this.b))for(var r=this.f;m<e;m++){var k=c[m];if(k){if(q){if(!t)if(n[k]){var t=k;l[k]=1}else if(!p)return d;
if(p&&m===e-1&&!a.length)q=!1,k=t||k,l[k]=0;else if(!t)continue}if(!l[k]){var u=[],E=!1,P=0;if(t=q?n[t]:this.c)for(var Q,F=0;F<r-f;F++)if(Q=t[F]&&t[F][k])u[P++]=Q,E=!0;if(E)t=k,a[a.length]=1<P?u.concat.apply([],u):u[0];else{h=!1;break}l[k]=1}}}else h=!1;if(h)a:{d=[];!0===g?(g="0",f=""):f=g&&g.split(":");p=a.length;if(1<p){q=z();t=0;r=!0;h=0;var A;for(f&&(2===f.length?f=!1:f=A=parseInt(f[0],10));t<p;t++)if(l=t===p-1,n=a[t],e=n.length){if(r)if(x){m=x.length;for(c=0;c<m;c++)q["@"+x[c]]=1;var x=null;
r=!1}else{x=n;continue}k=!1;for(c=0;c<e;c++)if(m=n[c],u="@"+m,(E=q[u]||0)&&E===t){if(l){if(!A||--A<h)if(d[h++]=m,b&&h===b){d=S(g,h+(f||0),d);break a}}else q[u]=t+1;k=!0}if(!k)break}else{d=S(g,D,n);break a}x&&(d=x)}else p&&(d=a[0],f&&(f=parseInt(f[0],10)));if(b){x=d.length;f&&f>x&&(f=0);A=f||0;var D=A+b;D<x?d=d.slice(A,D):(D=0,A&&(d=d.slice(A)))}d=S(g,D,d)}return d};v.clear=function(){return this.destroy().init()};v.destroy=function(){this.c=this.b=this.a=null;return this};
function L(a,b,c){Object.defineProperty(a,b,{get:c})}function N(a,b,c,e,d,h,g,f){if(b[c])return b[c];d=d?(f-(g||f/1.5))*h+(g||f/1.5)*d:h;b[c]=d;d>=g&&(a=a[f-(d+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=e);return d}function O(a,b){if(a)for(var c=Object.keys(a),e=0,d=c.length;e<d;e++){var h=c[e],g=a[h];if(g)for(var f=0,p=g.length;f<p;f++)if(g[f]===b){1===p?delete a[h]:g.splice(f,1);break}else"object"===typeof g[f]&&O(g[f],b)}}
function M(a,b){for(var c=Object.keys(a),e=c.length,d=[],h="",g=0,f=0,p;f<e;f++){var l=c[f];(p=a[l])?(d[g++]=new RegExp(b?"(?!\\b)"+l+"(\\b)":l,"g"),d[g++]=p):h+=(h?"|":"")+l}h&&(d[g++]=new RegExp(b?"(?!\\b)("+h+")(\\b)":"("+h+")","g"),d[g]="");return d}function R(a,b){return b.length-a.length}function S(a,b,c){return a?{page:a,next:b?""+b:null,result:c}:c};(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return K}):"object"===typeof a.exports?a.module.exports=K:a.FlexSearch=K})();}).call(this);
