/*
 FlexSearch v0.6.1
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(m,K,L){let H;(H=L.define)&&H.amd?H([],function(){return K}):(H=L.modules)?H[m.toLowerCase()]=K:"object"===typeof exports?module.exports=K:L[m]=K})("FlexSearch",function(){function m(b,a){const c=a?a.id:b&&b.id;this.id=c||0===c?c:aa++;this.init(b,a);H(this,"index",function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)});H(this,"length",function(){return this.index.length})}function K(b,a){const c=b.length,d=I(a),e=[];for(let g=0,f=0;g<c;g++){const c=
b[g];if(d&&a(c)||!d&&!a[c])e[f++]=c}return e}function L(b,a,c,d,e,g,f,r,q,l){c=V(c,f?0:e,r,g,a,q,l);let n;r&&(r=c.page,n=c.next,c=c.result);if(f)a=this.where(f,null,e,c);else{a=c;c=this.g;e=a.length;g=Array(e);for(f=0;f<e;f++)g[f]=c[a[f]];a=g}c=a;d&&(I(d)||(x=d.split(":"),1<x.length?d=ba:(x=x[0],d=ca)),c.sort(d));c=M(r,n,c);this.cache&&this.j.set(b,c);return c}function H(b,a,c){Object.defineProperty(b,a,{get:c})}function h(b){return new RegExp(b,"g")}function N(b,a){for(let c=0;c<a.length;c+=2)b=
b.replace(a[c],a[c+1]);return b}function Q(b,a,c,d,e,g,f,r){if(a[c])return a[c];e=e?(r-(f||r/1.5))*g+(f||r/1.5)*e:g;a[c]=e;e>=f&&(b=b[r-(e+.5>>0)],b=b[c]||(b[c]=[]),b[b.length]=d);return e}function T(b,a){if(b){const c=Object.keys(b);for(let d=0,e=c.length;d<e;d++){const e=c[d],f=b[e];if(f)for(let c=0,d=f.length;c<d;c++)if(f[c]===a){1===d?delete b[e]:f.splice(c,1);break}else y(f[c])&&T(f[c],a)}}}function U(b){let a="",c="";var d="";for(let e=0;e<b.length;e++){const g=b[e];if(g!==c)if(e&&"h"===g){if(d=
"a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)a+=g}else a+=g;d=e===b.length-1?"":b[e+1];c=g}return a}function da(b,a){b=b.length-a.length;return 0>b?1:b?-1:0}function ca(b,a){b=b[x];a=a[x];return b<a?-1:b>a?1:0}function ba(b,a){const c=x.length;for(let d=0;d<c;d++)b=b[x[d]],a=a[x[d]];return b<a?-1:b>a?1:0}function M(b,a,c){return b?{page:b,next:a?""+a:null,result:c}:c}function V(b,a,c,d,e,g,f){let r,q=[],l;const n=b.length;
!0===c?(c="0",l=""):l=c&&c.split(":");if(1<n){const R=v();let E=[],B,J;var k=-1,p;let O;var h=!0;let F,C=0,w,u,x;l&&(2===l.length?(x=l,l=!1):l=parseInt(l[0],10));if(f){for(B=v();++k<n;)if("not"===e[k])for(J=b[k],O=J.length,p=0;p<O;)B["@"+J[p++]]=1;else u=k+1;if(D(u))return M(c,r,q);k=-1}else w=G(e)&&e;let y;for(;++k<n;){const z=k===(u||n)-1;if(!w||!k)if((p=w||e&&e[k])&&"and"!==p)if("or"===p)y=!1;else continue;else y=g=!0;J=b[k];if(O=J.length){if(h)if(F){var t=F.length;for(p=0;p<t;){h=F[p++];var m=
"@"+h;f&&B[m]||(R[m]=1,g||(q[C++]=h))}F=null;h=!1}else{F=J;continue}m=!1;for(p=0;p<O;){t=J[p++];var A="@"+t;const b=g?R[A]:k;if(!(!b||f&&B[A]||!g&&R[A]))if(b===k){if(z){if(!l||--l<C)if(q[C++]=t,a&&C===a)return M(c,C,q)}else R[A]=k+1;m=!0}else d&&(A=E[b]||(E[b]=[]),A[A.length]=t)}if(y&&!m&&!d)break}else if(y&&!d)return M(c,r,J)}if(F)if(k=F.length,f)for(p=l?parseInt(l,10):0;p<k;){if(b=F[p++],!B["@"+b]&&(!l||--l<C)&&(q[C++]=b,a&&C===a))return M(c,p,q)}else q=F;if(d)for(C=q.length,x?(k=parseInt(x[0],
10)+1,p=parseInt(x[1],10)):(k=E.length,p=0);k--;)if(t=E[k])for(O=t.length;p<O;p++)if(d=t[p],!f||!B["@"+d])if(q[C++]=d,a&&C===a)return M(c,k+":"+p,q)}else n&&(e&&"not"===e[0]||(q=b[0]));a&&(f=c?parseInt(c,10):0,r=f+a,r<q.length?q=q.slice(f,r):f&&(q=q.slice(f)));return M(c,r,q)}function G(b){return"string"===typeof b}function w(b){return b.constructor===Array}function I(b){return"function"===typeof b}function y(b){return"object"===typeof b}function D(b){return"undefined"===typeof b}function W(b){const a=
Array(b);for(let c=0;c<b;c++)a[c]=v();return a}function v(){return Object.create(null)}const u={encode:"icase",c:"forward",split:/\W+/,cache:!1,async:!1,C:!1,v:!1,a:!1,b:9,threshold:0,depth:0},X={memory:{encode:"extra",c:"strict",threshold:0,b:1},speed:{encode:"icase",c:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",c:"full",threshold:1,b:3},score:{encode:"extra",c:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",c:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",c:"strict",
threshold:8,b:9,depth:1}},S=[];let aa=0;const Y={},Z={};m.create=function(b){return new m(b)};m.registerMatcher=function(b){for(const a in b)b.hasOwnProperty(a)&&S.push(h(a),b[a]);return this};m.registerEncoder=function(b,a){P[b]=a.bind(P);return this};m.registerLanguage=function(b,a){Y[b]=a.filter;Z[b]=a.stemmer;return this};m.encode=function(b,a){return P[b](a)};m.prototype.init=function(b,a){this.m=[];if(a){var c=a.preset;b=a}else b||(b=u),c=b.preset;a={};G(b)?(a=X[b],b={}):c&&(a=X[c]);this.c=
b.tokenize||a.c||this.c||u.c;this.split=b.split||this.split||u.split;this.v=b.rtl||this.v||u.v;this.async="undefined"===typeof Promise||D(c=b.async)?this.async||u.async:c;this.threshold=D(c=b.threshold)?a.threshold||this.threshold||u.threshold:c;this.b=D(c=b.resolution)?c=a.b||this.b||u.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth="strict"!==this.c||D(c=b.depth)?a.depth||this.depth||u.depth:c;this.o=(c=D(c=b.encode)?a.encode||u.encode:c)&&P[c]&&P[c].bind(P)||(I(c)?c:this.o||!1);(c=
b.matcher)&&this.addMatcher(c);if(c=b.filter){G(c)&&(c=Y[c]);if(w(c)){a=this.o;var d=v();for(var e=0;e<c.length;e++){var g=a?a(c[e]):c[e];d[g]=1}c=d}this.filter=c}if(c=b.stemmer){var f;a=G(c)?Z[c]:c;d=this.o;e=[];for(f in a)a.hasOwnProperty(f)&&(g=d?d(f):f,e.push(h(g+"($|\\W)"),d?d(a[f]):a[f]));this.stemmer=f=e}this.a=e=(c=b.doc)?c:this.a||u.a;this.i=W(this.b-(this.threshold||0));this.h=v();this.f=v();if(e){this.g=v();b.doc=null;f=e.index={};a=e.keys=[];d=e.field;g=e.tag;w(e.id)||(e.id=e.id.split(":"));
if(g){this.w=v();let a=v();if(d)if(G(d))a[d]=b;else if(w(d))for(let c=0;c<d.length;c++)a[d[c]]=b;else y(d)&&(a=d);w(g)||(e.tag=g=[g]);for(d=0;d<g.length;d++)this.w[g[d]]=v();this.B=g;d=a}if(d){let c;w(d)||(y(d)?(c=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)g=d[e],w(g)||(c&&(b=c[g]),a[e]=g,d[e]=g.split(":")),f[g]=new m(b),f[g].g=this.g}}this.u=!0;this.j=(this.cache=c=D(c=b.cache)?this.cache||u.cache:c)?new ea(c):!1;return this};m.prototype.encode=function(b){b&&S.length&&(b=
N(b,S));b&&this.m.length&&(b=N(b,this.m));b&&this.o&&(b=this.o(b));b&&this.stemmer&&(b=N(b,this.stemmer));return b};m.prototype.addMatcher=function(b){const a=this.m;for(const c in b)b.hasOwnProperty(c)&&a.push(h(c),b[c]);return this};m.prototype.add=function(b,a,c,d,e){if(this.a&&y(b))return this.s("add",b,a);if(a&&G(a)&&(b||0===b)){var g="@"+b;if(this.f[g]&&!d)return this.update(b,a);if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;g=new Promise(function(c){setTimeout(function(){e.add(b,
a,null,d,!0);e=null;c()})});if(c)g.then(c);else return g;return this}if(c)return this.add(b,a,null,d,!0),c(),this}a=this.encode(a);if(!a.length)return this;c=this.c;e=I(c)?c(a):a.split(this.split);this.filter&&(e=K(e,this.filter));const k=v();k._ctx=v();const p=e.length,h=this.threshold,t=this.depth,m=this.b,A=this.i,z=this.v;for(let a=0;a<p;a++){var f=e[a];if(f){var r=f.length,q=(z?a+1:p-a)/p,l="";switch(c){case "reverse":case "both":for(var n=r;--n;)l=f[n]+l,Q(A,k,l,b,z?1:(r-n)/r,q,h,m-1);l="";
case "forward":for(n=0;n<r;n++)l+=f[n],Q(A,k,l,b,z?(n+1)/r:1,q,h,m-1);break;case "full":for(n=0;n<r;n++){const a=(z?n+1:r-n)/r;for(let c=r;c>n;c--)l=f.substring(n,c),Q(A,k,l,b,a,q,h,m-1)}break;default:if(r=Q(A,k,f,b,1,q,h,m-1),t&&1<p&&r>=h)for(r=k._ctx[f]||(k._ctx[f]=v()),f=this.h[f]||(this.h[f]=W(m-(h||0))),q=a-t,l=a+t+1,0>q&&(q=0),l>p&&(l=p);q<l;q++)q!==a&&Q(f,r,e[q],b,0,m-(q<a?a-q:q-a),h,m-1)}}}this.f[g]=1;this.u=!1}return this};m.prototype.s=function(b,a,c){if(w(a))for(let d=0,e=a.length;d<e;d++){if(d===
e-1)return this.s(b,a[d],c);this.s(b,a[d])}else{const q=this.a.index,l=this.a.keys;var d=this.a.tag,e=this.a.id;let n;let k;for(var g=0;g<e.length;g++)n=(n||a)[e[g]];if(d){for(e=0;e<d.length;e++){var f=d[e];var h=f.split(":");for(g=0;g<h.length;g++)k=(k||a)[h[g]];k="@"+k}h=this.w[f];h=h[k]||(h[k]=[])}if("remove"===b){delete this.g[n];for(let a=0,b=l.length;a<b;a++){if(a===b-1)return q[l[a]].remove(n,c);q[l[a]].remove(n)}}e=this.a.field;h&&(h[h.length]=a);this.g[n]=a;for(let g=0,h=e.length;g<h;g++){d=
e[g];let k;for(f=0;f<d.length;f++)k=(k||a)[d[f]];d=q[l[g]];f="add"===b?d.add:d.update;if(g===h-1)return f.call(d,n,k,c);f.call(d,n,k)}}};m.prototype.update=function(b,a,c){if(this.a&&y(b))return this.s("update",b,a);this.f["@"+b]&&G(a)&&(this.remove(b),this.add(b,a,c,!0));return this};m.prototype.remove=function(b,a,c){if(this.a&&y(b))return this.s("remove",b,a);var d="@"+b;if(this.f[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(a){setTimeout(function(){c.remove(b,
null,!0);c=null;a()})});if(a)d.then(a);else return d;return this}if(a)return this.remove(b,null,!0),a(),this}for(a=0;a<this.b-(this.threshold||0);a++)T(this.i[a],b);this.depth&&T(this.h,b);delete this.f[d];this.u=!1}return this};let x;m.prototype.search=function(b,a,c,d){if(y(a)){if(w(a))for(var e=0;e<a.length;e++)a[e].query=b;else a.query=b;b=a;a=0}let g=[],f=b;let h,q,l;if(y(b)&&!w(b)){(c=b.callback||I(a)&&a)&&(f.callback=null);q=b.sort;h=b.page;a=b.limit;var n=b.threshold;l=b.suggest;b=b.query}if(this.a){n=
this.a.index;const r=f.where;var k=f.bool||"or",p=f.field;let z=k;let E,B;if(p)w(p)||(p=[p]);else if(w(f)){var m=f;p=[];z=[];for(var t=0;t<f.length;t++)d=f[t],e=d.bool||k,p[t]=d.field,z[t]=e,"not"===e?E=!0:"and"===e&&(B=!0)}else p=this.a.keys;k=p.length;for(t=0;t<k;t++)m&&(f=m[t]),h&&!G(f)&&(f.page=null,f.limit=0),g[t]=n[p[t]].search(f,0);if(c)return c(L.call(this,b,z,g,q,a,l,r,h,B,E));if(this.async){const c=this;return new Promise(function(d){Promise.all(g).then(function(e){d(L.call(c,b,z,e,q,a,
l,r,h,B,E))})})}return L.call(this,b,z,g,q,a,l,r,h,B,E)}n||(n=this.threshold||0);I(a)?(c=a,a=1E3):a||0===a||(a=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let b=this;n=new Promise(function(c){setTimeout(function(){c(b.search(f,a,null,!0));b=null})});if(c)n.then(c);else return n;return this}if(c)return c(this.search(f,a,null,!0)),this}if(!b||!G(b))return g;f=b;if(this.cache)if(this.u){if(c=this.j.get(b))return c}else this.j.clear(),this.u=!0;f=this.encode(f);if(!f.length)return g;
c=this.c;c=I(c)?c(f):f.split(this.split);this.filter&&(c=K(c,this.filter));m=c.length;d=!0;e=[];const u=v();1<m&&(this.depth?(p=!0,t=c[0],u[t]=1):c.sort(da));if(!p||(k=this.h)[t]){const a=this.b;for(let b=p?1:0;b<m;b++){const f=c[b];if(f){if(!u[f]){const b=[];let c=!1,g=0;if(t=p?k[t]:this.i){let d;for(let e=0;e<a-n;e++)if(d=t[e][f])b[g++]=d,c=!0}if(c)e[e.length]=1<g?b.concat.apply([],b):b[0];else if(!l){d=!1;break}u[f]=1}t=f}}}else d=!1;d&&(g=V(e,a,h,l));this.cache&&this.j.set(b,g);return g};m.prototype.find=
function(b,a){return this.where(b,a,1)[0]||null};m.prototype.where=function(b,a,c,d){const e=this.g,g=[];let f=0;let h;var q;if(y(b)){c||(c=a);var l=Object.keys(b);var n=l.length;h=!1;if(1===n&&"id"===l[0])return[e[b.id]];if((q=this.B)&&!d)for(var k=0;k<q.length;k++){var p=q[k],m=b[p];if(!D(m)){d=this.w[p]["@"+m];if(0===--n)return d;l.splice(l.indexOf(p),1);delete b[p];break}}q=Array(n);for(k=0;k<n;k++)q[k]=l[k].split(":")}else{if(I(b)){a=d||Object.keys(e);c=a.length;for(l=0;l<c;l++)n=e[a[l]],b(n)&&
(g[f++]=n);return g}if(D(a))return[e[b]];if("id"===b)return[e[a]];l=[b];n=1;q=[b.split(":")];h=!0}d=d||Object.keys(e);k=d.length;for(p=0;p<k;p++){m=e[d[p]];let k=!0;for(let c=0;c<n;c++){h||(a=b[l[c]]);const d=q[c],e=d.length;let f=m;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==a){k=!1;break}}if(k&&(g[f++]=m,c&&f===c))break}return g};m.prototype.info=function(){return{id:this.id,items:this.length,cache:this.cache&&this.cache.l?this.cache.l.length:!1,matcher:S.length+(this.m?this.m.length:
0),worker:this.C,threshold:this.threshold,depth:this.depth,resolution:this.b,contextual:this.depth&&"strict"===this.c}};m.prototype.clear=function(){return this.destroy().init()};m.prototype.destroy=function(){this.cache&&(this.j.clear(),this.j=null);this.i=this.h=this.f=null;if(this.a){const b=this.a.keys;for(let a=0;a<b.length;a++)this.a.index[b[a]].destroy();this.a=this.g=null}return this};m.prototype.export=function(){if(this.a){const b=this.a.keys,a=Array(b.length+1);let c=0;for(;c<b.length;c++){const d=
this.a.index[b[c]];a[c]=[d.i,d.h,Object.keys(d.f)]}a[c]=this.g;return JSON.stringify(a)}return JSON.stringify([this.i,this.h,Object.keys(this.f)])};m.prototype.import=function(b){b=JSON.parse(b);const a=v();if(this.a){var c=this.a.keys,d=c.length,e=b[0][2];for(var g=0;g<e.length;g++)a[e[g]]=1;for(e=0;e<d;e++)g=this.a.index[c[e]],g.i=b[e][0],g.h=b[e][1],g.f=a,g.g=b[d];this.g=b[d]}else{c=b[2];for(d=0;d<c.length;d++)a[c[d]]=1;this.i=b[0];this.h=b[1];this.f=a}};const P={icase:function(b){return b.toLowerCase()},
simple:function(){const b=[h("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",h("[\u00e8\u00e9\u00ea\u00eb]"),"e",h("[\u00ec\u00ed\u00ee\u00ef]"),"i",h("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",h("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",h("[\u00fd\u0177\u00ff]"),"y",h("\u00f1"),"n",h("\u00e7"),"c",h("\u00df"),"s",h(" & ")," and ",h("[-/]")," ",h("[^a-z0-9 ]"),"",h("\\s+")," "];return function(a){a=N(a.toLowerCase(),b);return" "===a?"":a}}(),advanced:function(){const b=[h("ae"),"a",h("ai"),"ei",h("ay"),
"ei",h("ey"),"ei",h("oe"),"o",h("ue"),"u",h("ie"),"i",h("sz"),"s",h("zs"),"s",h("sh"),"s",h("ck"),"k",h("cc"),"k",h("dt"),"t",h("ph"),"f",h("pf"),"f",h("ou"),"o",h("uo"),"u"];return function(a,c){if(!a)return a;a=this.simple(a);2<a.length&&(a=N(a,b));c||1<a.length&&(a=U(a));return a}}(),extra:function(){const b=[h("p"),"b",h("z"),"s",h("[cgq]"),"k",h("n"),"m",h("d"),"t",h("[vw]"),"f",h("[aeiouy]"),""];return function(a){if(!a)return a;a=this.advanced(a,!0);if(1<a.length){a=a.split(" ");for(let c=
0;c<a.length;c++){const d=a[c];1<d.length&&(a[c]=d[0]+N(d.substring(1),b))}a=a.join(" ");a=U(a)}return a}}(),balance:function(){const b=[h("[-/]")," ",h("[^a-z0-9 ]"),"",h("\\s+")," "];return function(a){return U(N(a.toLowerCase(),b))}}()},ea=function(){function b(a){this.clear();this.A=!0!==a&&a}b.prototype.clear=function(){this.cache=v();this.count=v();this.index=v();this.l=[]};b.prototype.set=function(a,b){if(this.A&&D(this.cache[a])){let c=this.l.length;if(c===this.A){c--;const a=this.l[c];delete this.cache[a];
delete this.count[a];delete this.index[a]}this.index[a]=c;this.l[c]=a;this.count[a]=-1;this.cache[a]=b;this.get(a)}else this.cache[a]=b};b.prototype.get=function(a){const b=this.cache[a];if(this.A&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.l;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return b}();return m}(!1),this);
