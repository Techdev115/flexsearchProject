/*
 FlexSearch v0.2.46
 Copyright 2018 Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(d,w,p){var q;(q=p.define)&&q.amd?q([],function(){return w}):(q=p.modules)?q[d.toLowerCase()]=w:"undefined"!==typeof module?module.exports=w:p[d]=w})("FlexSearch",function(){function d(a){"string"===typeof a&&(a=B[a]);a||(a=z);this.id=a.id||G++;this.init(a);w(this,"index",function(){return this.a});w(this,"length",function(){return Object.keys(this.a).length})}function w(a,b,c){Object.defineProperty(a,b,{get:c})}function p(a){return new RegExp(a,"g")}function q(a,b,c){if("undefined"===
typeof c){for(c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}return a.replace(b,c)}function y(a,b,c,f,g,m,e){if("undefined"===typeof b[c]){var h=g?(9-(e||6))*m+(e||6)*g:m;b[c]=h;h>=e&&(a=a[h+.5|0],a=a[c]||(a[c]=[]),a[a.length]=f)}return h||b[c]}function A(a,b){if(a)for(var c=Object.keys(a),f=0,g=c.length;f<g;f++){var m=c[f],e=a[m];if(e)for(var h=0,k=e.length;h<k;h++)if(e[h]===b){1===k?delete a[m]:e.splice(h,1);break}else"object"===typeof e[h]&&A(e[h],b)}}function C(a){var b=[];if(!a)return b;
for(var c=0,f=0,g=0,m="",e=a.length,h=0;h<e;h++){var k=a[h];"a"===k||"e"===k||"i"===k||"o"===k||"u"===k||"y"===k?c++:f++;" "!==k&&(m+=k);if(" "===k||c>=(8<e?2:1)&&2<=f||2<=c&&f>=(8<e?2:1)||h===e-1)m&&(b[g]&&2<m.length&&g++,b[g]=b[g]?b[g]+m:m," "===k&&g++,m=""),f=c=0}return b}function H(a,b){a=a.length-b.length;return 0>a?1:0<a?-1:0}function I(a,b){a=a.length-b.length;return 0>a?-1:0<a?1:0}function J(a,b){var c=[],f=a.length;if(1<f){a.sort(I);for(var g={},m=a[0],e=m.length,h=0;h<e;)g[m[h++]]=1;for(var k,
d=0,n=1;n<f;){var u=!1;m=a[n];e=m.length;for(h=0;h<e;)if(g[k=m[h++]]===n){if(n===f-1&&(c[d++]=k,b&&d===b)){u=!1;break}u=!0;g[k]=n+1}if(!u)break;n++}}else if(f&&(c=a[0],b&&c.length>b))return c.slice(0,b);return c}var z={encode:"icase",mode:"ngram",cache:!1,async:!1,j:!1,threshold:0,depth:0},B={memory:{encode:"extra",mode:"strict",threshold:7},speed:{encode:"icase",mode:"strict",threshold:7,depth:2},match:{encode:"extra",mode:"full"},score:{encode:"extra",mode:"strict",threshold:5,depth:4},balance:{encode:"balance",
mode:"ngram",threshold:6,depth:3},fastest:{encode:"icase",mode:"strict",threshold:9,depth:1}},x=[],G=0,D=p("[ -/]"),E={},F={};d.new=function(a){return new this(a)};d.create=function(a){return d.new(a)};d.registerMatcher=function(a){for(var b in a)a.hasOwnProperty(b)&&(x[x.length]=p(b),x[x.length]=a[b]);return this};d.registerEncoder=function(a,b){v[a]=b;return this};d.registerLanguage=function(a,b){E[a]=b.filter;F[a]=b.stemmer;return this};d.encode=function(a,b){return v[a].call(v,b)};d.prototype.init=
function(a){this.i=[];a||(a=z);var b=a.profile;b=b?B[b]:{};this.mode=a.mode||b.mode||this.mode||z.mode;this.threshold=a.threshold||b.threshold||this.threshold||z.threshold;this.depth=a.depth||b.depth||this.depth||z.depth;this.f=(b=a.encode||b.encode)&&v[b]||("function"===typeof b?b:this.f||!1);(b=a.matcher)&&this.addMatcher(b);if(b=a.filter){b=E[b]||b;var c=this.f,f={};if(b)for(var g=0;g<b.length;g++){var m=c?c.call(v,b[g]):b[g];f[m]=String.fromCharCode(65E3-b.length+g)}this.filter=f}if(b=a.stemmer){a=
F[b]||b;b=this.f;c=[];if(a){f=0;for(var e in a)a.hasOwnProperty(e)&&(g=b?b.call(v,e):e,c[f++]=p("(?=.{"+(g.length+3)+",})"+g+"$"),c[f++]=b?b.call(v,a[e]):a[e])}this.stemmer=c}this.g=[{},{},{},{},{},{},{},{},{},{}];this.b={};this.a={};this.c="";this.h=!0;return this};d.prototype.encode=function(a){a&&x.length&&(a=q(a,x));a&&this.i.length&&(a=q(a,this.i));a&&this.f&&(a=this.f.call(v,a));if(a&&this.filter){a=a.split(" ");for(var b=0;b<a.length;b++){var c=this.filter[a[b]];c&&(a[b]=c)}a=a.join(" ")}a&&
this.stemmer&&(a=q(a,this.stemmer));return a};d.prototype.addMatcher=function(a){var b=this.i,c;for(c in a)a.hasOwnProperty(c)&&(b[b.length]=p(c),b[b.length]=a[c]);return this};d.prototype.add=function(a,b,c){if("string"===typeof b&&b&&(a||0===a))if(this.a[a]&&!c)this.update(a,b);else{b=this.encode(b);if(!b.length)return this;c=this.mode;b="function"===typeof c?c(b):"ngram"===c?C(b):b.split(D);for(var f={_ctx:{}},g=this.threshold,m=this.depth,e=this.g,h=b.length,k=0;k<h;k++){var d=b[k];if(d){var n=
d.length,u=(h-k)/h;switch(c){case "reverse":case "both":for(var r="",l=n-1;1<=l;l--)r=d[l]+r,y(e,f,r,a,(n-l)/n,u,g);case "forward":r="";for(l=0;l<n;l++)r+=d[l],y(e,f,r,a,1,u,g);break;case "full":for(l=0;l<n;l++)for(var p=(n-l)/n,t=n;t>l;t--)r=d.substring(l,t),y(e,f,r,a,p,u,g);break;default:if(l=y(e,f,d,a,1,u,g),m&&1<h&&l>=g)for(n=f._ctx[d]||(f._ctx[d]={}),d=this.b[d]||(this.b[d]=[{},{},{},{},{},{},{},{},{},{}]),l=k-m,t=k+m+1,0>l&&(l=0),t>h&&(t=h);l<t;l++)l!==k&&y(d,n,b[l],a,0,10-(l<k?k-l:l-k),g)}}}this.a[a]=
"1";this.h=!1}return this};d.prototype.update=function(a,b){this.a[a]&&b&&"string"===typeof b&&(this.remove(a),this.add(a,b,!0));return this};d.prototype.remove=function(a){if(this.a[a]){for(var b=0;10>b;b++)A(this.g[b],a);this.depth&&A(this.b,a);delete this.a[a];this.h=!1}return this};d.prototype.search=function(a,b,c){var f=[];if(a&&"object"===typeof a){c=a.callback||b;b=a.limit;var g=a.threshold;a=a.query}g=(g||this.threshold||0)|0;"function"===typeof b?(c=b,b=1E3):b||(b=1E3);if(c){var d=this;
K(function(){c(d.search(a,b));d=null},1,"search-"+this.id);return null}if(!a||"string"!==typeof a)return f;if(!this.h)this.h=!0;else if(this.c&&0===a.indexOf(this.c))return f;var e=this.encode(a);if(!e.length)return f;var h=this.mode;e="function"===typeof h?h(e):"ngram"===h?C(e):e.split(D);h=e.length;var k=!0,p=[],n={};if(1<h)if(this.depth){var u=!0,r=e[0];n[r]="1"}else e.sort(H);var l;if(!u||(l=this.b)[r])for(var q=u?1:0;q<h;q++){var t=e[q];if(t&&!n[t]){for(var v,w=!1,x=[],z=0,y=9;y>=g;y--)if(v=
(u?l[r]:this.g)[y][t])x[z++]=v,w=!0;if(w)p[p.length]=1<z?p.concat.apply([],x):x[0];else{k=!1;break}n[t]="1"}r=t}else k=!1;k&&(f=J(p,b));f.length?this.c="":this.c||(this.c=a);return f};d.prototype.reset=function(){this.destroy();return this.init()};d.prototype.destroy=function(){this.filter=this.stemmer=this.g=this.b=this.a=null;return this};var v={icase:function(a){return a.toLowerCase()},balance:function(){var a=[p("[-/]")," ",p("[^a-z0-9 ]"),"",p("\\s\\s+")," "];return function(b){b=q(b.toLowerCase(),
a);for(var c="",f="",g="",d=0;d<b.length;d++){var e=b[d];if(e!==f)if(d&&"h"===e){if(g="a"===g||"e"===g||"i"===g||"o"===g||"u"===g||"y"===g,("a"===f||"e"===f||"i"===f||"o"===f||"u"===f||"y"===f)&&g||" "===f)c+=e}else c+=e;g=d===b.length-1?"":b[d+1];f=e}return c}}()},K=null;return d}(!1),this);
