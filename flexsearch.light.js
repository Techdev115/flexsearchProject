/*
 FlexSearch v0.2.41
 Copyright 2017-2018 Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(d,t,l){var q;(q=l.define)&&q.amd?q([],function(){return t}):(q=l.modules)?q[d.toLowerCase()]=t:"undefined"!==typeof module?module.exports=t:l[d]=t})("FlexSearch",function(){function d(a){"string"===typeof a&&(a=A[a]);a||(a=y);this.id=a.id||D++;this.init(a);t(this,"index",function(){return this.a});t(this,"length",function(){return Object.keys(this.a).length})}function t(a,b,c){Object.defineProperty(a,b,{get:c})}function l(a){return new RegExp(a,"g")}function q(a,b,c){if("undefined"===
typeof c){for(c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}return a.replace(b,c)}function x(a,b,c,h,f,g){if("undefined"===typeof b[c]){var e=f.indexOf(c);e=3/f.length*(f.length-e)+6/(e-f.lastIndexOf(" ",e));b[c]=e;e>=g&&(a=a[e+.5|0],a=a[c]||(a[c]=[]),a[a.length]=h)}return e||b[c]}function z(a,b){if(a)for(var c=Object.keys(a),h=0,f=c.length;h<f;h++){var g=c[h],e=a[g];if(e)for(var p=0,k=e.length;p<k;p++)if(e[p]===b){1===k?delete a[g]:e.splice(p,1);break}else"object"===typeof e[p]&&z(e[p],b)}}
function B(a){var b=[];if(!a)return b;for(var c=0,h=0,f=0,g="",e=a.length,p=0;p<e;p++){var k=a[p];"a"===k||"e"===k||"i"===k||"o"===k||"u"===k||"y"===k?c++:h++;" "!==k&&(g+=k);if(" "===k||1<c&&1<h||2<c||2<h||p===e-1)g&&(b[f]&&2<g.length&&f++,b[f]=b[f]?b[f]+g:g," "===k&&f++,g=""),h=c=0}return b}function E(a,b){a=a.length-b.length;return 0>a?1:0<a?-1:0}function F(a,b){a=a.length-b.length;return 0>a?-1:0<a?1:0}function G(a,b){var c=[],h=a.length;if(1<h){a.sort(F);for(var f={},g=a[0],e=g.length,p=0;p<
e;)f[g[p++]]=1;for(var k,d=0,n=1;n<h;){var r=!1;g=a[n];e=g.length;for(p=0;p<e;)if(f[k=g[p++]]===n){if(n===h-1&&(c[d++]=k,b&&d===b)){r=!1;break}r=!0;f[k]=n+1}if(!r)break;n++}}else h&&(c=a[0],b&&c&&c.length>b&&(c=c.slice(0,b)));return c}var y={encode:"icase",mode:"ngram",cache:!1,async:!1,m:!1,threshold:0,depth:0},A={memory:{encode:"extra",mode:"strict",threshold:7},speed:{encode:"icase",mode:"strict",threshold:7,depth:2},match:{encode:"extra",mode:"full"},score:{encode:"extra",mode:"strict",threshold:5,
depth:4},balance:{encode:"balance",mode:"ngram",threshold:6,depth:3},fastest:{encode:"icase",mode:"strict",threshold:9,depth:1}},v=[],D=0,C=l("[ -/]");d.new=function(a){return new this(a)};d.create=function(a){return d.new(a)};d.addMatcher=function(a){for(var b in a)a.hasOwnProperty(b)&&(v[v.length]=l(b),v[v.length]=a[b]);return this};d.register=function(a,b){w[a]=b;return this};d.encode=function(a,b){return w[a].call(w,b)};d.prototype.init=function(a){this.h=[];if(a){var b=a.profile;b=b?A[b]:{};
this.mode=a.mode||b.mode||this.mode||y.mode;this.threshold=a.threshold||b.threshold||this.threshold||y.threshold;this.depth=a.depth||b.depth||this.depth||y.depth;this.i=(b=a.encode||b.encode)&&w[b]||("function"===typeof b?b:this.i||!1);(b=a.matcher)&&this.addMatcher(b)}this.f=[{},{},{},{},{},{},{},{},{},{}];this.b={};this.a={};this.c="";this.g=!0;return this};d.prototype.encode=function(a){a&&v.length&&(a=q(a,v));a&&this.h.length&&(a=q(a,this.h));a&&this.i&&(a=this.i.call(w,a));if(a&&this.j){a=a.split(" ");
for(var b=0;b<a.length;b++){var c=this.j[a[b]];c&&(a[b]=c)}a=a.join(" ")}a&&this.l&&(a=q(a,this.l));return a};d.prototype.addMatcher=function(a){var b=this.h,c;for(c in a)a.hasOwnProperty(c)&&(b[b.length]=l(c),b[b.length]=a[c]);return this};d.prototype.add=function(a,b,c){if("string"===typeof b&&b&&(a||0===a))if(this.a[a]&&!c)this.update(a,b);else{b=this.encode(b);if(!b.length)return this;c=this.mode;for(var h="function"===typeof c?c(b):"ngram"===c?B(b):b.split(C),f={_ctx:{}},g=this.threshold,e=this.depth,
p=this.f,k=h.length,d=0;d<k;d++){var n=h[d];if(n){var r=n.length;switch(c){case "reverse":case "both":for(var u="",m=r-1;1<=m;m--)u=n[m]+u,x(p,f,u,a,b,g);case "forward":u="";for(m=0;m<r;m++)u+=n[m],x(p,f,u,a,b,g);break;case "full":for(m=0;m<r;m++)for(var l=r;l>m;l--)u=n.substring(m,l),x(p,f,u,a,b,g);break;default:if(m=x(p,f,n,a,b,g),e&&1<k&&m>=g)for(r=f._ctx[n]||(f._ctx[n]={}),n=this.b[n]||(this.b[n]=[{},{},{},{},{},{},{},{},{},{}]),m=d-e,l=d+e+1,0>m&&(m=0),l>k&&(l=k);m<l;m++)m!==d&&x(n,r,h[m],a,
b,g)}}}this.a[a]="1";this.g=!1}return this};d.prototype.update=function(a,b){this.a[a]&&b&&"string"===typeof b&&(this.remove(a),this.add(a,b,!0));return this};d.prototype.remove=function(a){if(this.a[a]){for(var b=0;10>b;b++)z(this.f[b],a);this.depth&&z(this.b,a);delete this.a[a];this.g=!1}return this};d.prototype.search=function(a,b,c){var h=[];if(a&&"object"===typeof a){c=a.callback||b;b=a.limit;var f=a.threshold;a=a.query}f=(f||this.threshold||0)|0;"function"===typeof b?(c=b,b=1E3):b||(b=1E3);
if(c){var g=this;H(function(){c(g.search(a,b));g=null},1,"search-"+this.id);return null}if(!a||"string"!==typeof a)return h;if(!this.g)this.g=!0;else if(this.c&&0===a.indexOf(this.c))return h;var e=this.encode(a);if(!e.length)return h;var d=this.mode;e="function"===typeof d?d(e):"ngram"===d?B(e):e.split(C);d=e.length;var k=!0,l=[],n={};if(1<d)if(this.depth){var r=!0,u=e[0];n[u]="1"}else e.sort(E);var m;if(!r||(m=this.b)[u])for(var q=r?1:0;q<d;q++){var t=e[q];if(t&&!n[t]){for(var v,x=!1,w=[],y=0,z=
9;z>=f;z--)if(v=(r?m[u]:this.f)[z][t])w[y++]=v,x=!0;if(x)l[l.length]=1<y?l.concat.apply([],w):w[0];else{k=!1;break}n[t]="1"}u=t}else k=!1;k&&(h=G(l,b));h.length?this.c="":this.c||(this.c=a);return h};d.prototype.reset=function(){this.destroy();return this.init()};d.prototype.destroy=function(){this.j=this.l=this.f=this.b=this.a=null;return this};var w={icase:function(a){return a.toLowerCase()},balance:function(){var a=[l("[-/]")," ",l("[^a-z0-9 ]"),"",l("\\s\\s+")," ",l("[aeiouy]"),""];return function(b){b=
q(b.toLowerCase(),a);for(var c="",d="",f="",g=0;g<b.length;g++){var e=b[g];if(e!==d)if(g&&"h"===e){if(f="a"===f||"e"===f||"i"===f||"o"===f||"u"===f||"y"===f,("a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d)&&f||" "===d)c+=e}else c+=e;f=g===b.length-1?"":b[g+1];d=e}return c}}()},H=null;return d}(!1),this);
