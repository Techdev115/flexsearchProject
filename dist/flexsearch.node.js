/*
 FlexSearch v0.5.3
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(k,D,E){let z;(z=E.define)&&z.amd?z([],function(){return D}):(z=E.modules)?z[k.toLowerCase()]=D:"object"===typeof exports?module.exports=D:E[k]=D})("FlexSearch",function(){function k(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:V++;this.init(a,b);z(this,"index",function(){return this.c});z(this,"length",function(){return Object.keys(this.c).length})}function D(a,b){const c=a.length,d=F(b),e=[];for(let f=0,h=0;f<c;f++){const c=a[f];if(d&&b(c)||!d&&!b[c])e[h++]=c}return e}function E(a,
b,c,d,e,f,h){const n=this.g;b=c=O(c,b,f?0:e,h,this.m);c=b.length;h=Array(c);for(let a=0;a<c;a++)h[a]=n[b[a]];c=h;f&&(c=this.where(f,null,e,c));d&&(F(d)||(y=d.split(":"),1<y.length?d=W:(y=y[0],d=X)),c.sort(d));this.cache&&this.j.set(a,c);return c}function z(a,b,c){Object.defineProperty(a,b,{get:c})}function g(a){return new RegExp(a,"g")}function G(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function J(a,b,c,d,e,f,h,n){if(b[c])return b[c];e=e?(n-(h||n/1.5))*f+(h||n/1.5)*e:f;b[c]=
e;e>=h&&(a=a[n-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return e}function M(a,b){if(a){const c=Object.keys(a);for(let d=0,e=c.length;d<e;d++){const e=c[d],h=a[e];if(h)for(let c=0,d=h.length;c<d;c++)if(h[c]===b){1===d?delete a[e]:h.splice(c,1);break}else B(h[c])&&M(h[c],b)}}}function N(a){let b="",c="";var d="";for(let e=0;e<a.length;e++){const f=a[e];if(f!==c)if(e&&"h"===f){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===
c)b+=f}else b+=f;d=e===a.length-1?"":a[e+1];c=f}return b}function Y(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function X(a,b){a=a[y];b=b[y];return a<b?-1:a>b?1:0}function W(a,b){const c=y.length;for(let d=0;d<c;d++)a=a[y[d]],b=b[y[d]];return a<b?-1:a>b?1:0}function O(a,b,c,d,e){d=[];let f;const h=a.length;if(1<h){b="or"===b;const A=r();let g,m=-1,l,q=0,t,H,k=!0,u=0;for(;++m<h;){const p=m===h-1;g=a[m];l=g.length;if(!l){if(!b&&!e)return d;if(p&&!u)return t||d;continue}if(k){if(p)return g;for(;q<
l;)A["@"+g[q++]]=1;t=g;k=!1;continue}let P=!1;f=[];for(q=0;q<l;){H=g[q++];var n="@"+H;if(A[n]){const a=A[n];if(b||a===m){if(p){if(d[u++]=H,c&&u===c)return d}else A[n]=m+1;P=!0}else e&&(n=f[a]||(f[a]=[]),n[n.length]=H)}}if(!P&&!e)break}if(e&&(u=d.length,(m=f.length)&&(!c||u<c)))for(;m--;)if(H=f[m])for(q=0,l=H.length;q<l;q++)if(d[u++]=H[q],c&&u===c)return d}else h&&(d=a[0],c&&d.length>c&&(d=d.slice(0,c)));return d}function C(a){return"string"===typeof a}function w(a){return a.constructor===Array}function F(a){return"function"===
typeof a}function B(a){return"object"===typeof a}function x(a){return"undefined"===typeof a}function Q(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=r();return b}function r(){return Object.create(null)}const v={encode:"icase",f:"forward",m:!1,cache:!1,async:!1,F:!1,w:!1,a:!1,C:!1,b:9,threshold:0,depth:0},R={memory:{encode:"extra",f:"strict",threshold:0,b:1},speed:{encode:"icase",f:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",f:"full",threshold:1,b:3},score:{encode:"extra",f:"strict",threshold:1,
b:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,b:9,depth:1}},L=[];let V=0;const S=/\W+/,T={},U={};k.create=function(a){return new k(a)};k.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&L.push(g(b),a[b]);return this};k.registerEncoder=function(a,b){I[a]=b.bind(I);return this};k.registerLanguage=function(a,b){T[a]=b.filter;U[a]=b.stemmer;return this};k.encode=function(a,b){return I[a](b)};k.prototype.init=function(a,
b){this.o=[];if(b){var c=b.preset;a=b}else a||(a=v),c=a.preset;b={};C(a)?(b=R[a],a={}):c&&(b=R[c]);this.f=a.tokenize||b.f||this.f||v.f;this.w=a.rtl||this.w||v.w;this.async="undefined"===typeof Promise||x(c=a.async)?this.async||v.async:c;this.threshold=x(c=a.threshold)?b.threshold||this.threshold||v.threshold:c;this.b=x(c=a.resolution)?c=b.b||this.b||v.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth=x(c=a.depth)?b.depth||this.depth||v.depth:c;this.C=x(c=a.paging)?this.C||v.C:c;this.m=x(c=
a.suggest)?this.m||v.m:c;this.s=(c=x(c=a.encode)?b.encode||v.encode:c)&&I[c]&&I[c].bind(I)||(F(c)?c:this.s||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){C(c)&&(c=T[c]);if(w(c)){b=this.s;var d=r();for(var e=0;e<c.length;e++){var f=b?b(c[e]):c[e];d[f]=1}c=d}this.filter=c}if(c=a.stemmer){var h;b=C(c)?U[c]:c;d=this.s;e=[];for(h in b)b.hasOwnProperty(h)&&(f=d?d(h):h,e.push(g(f+"($|\\W)"),d?d(b[h]):b[h]));this.stemmer=h=e}this.a=e=(c=a.doc)?c:this.a||v.a;this.h=Q(this.b-(this.threshold||0));this.i=
r();this.c=r();if(e){this.g=r();a.doc=null;h=e.index={};b=e.keys=[];d=e.field;f=e.tag;w(e.id)||(e.id=e.id.split(":"));if(f){this.A=r();let b=r();if(d)if(C(d))b[d]=a;else if(w(d))for(let c=0;c<d.length;c++)b[d[c]]=a;else B(d)&&(b=d);w(f)||(e.tag=f=[f]);for(d=0;d<f.length;d++)this.A[f[d]]=r();this.D=f;d=b}if(d){let c;w(d)||(B(d)?(c=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)f=d[e],w(f)||(c&&(a=c[f]),b[e]=f,d[e]=f.split(":")),h[f]=new k(a),h[f].g=this.g}}this.v=!0;this.j=(this.cache=
c=x(c=a.cache)?this.cache||v.cache:c)?new Z(c):!1;return this};k.prototype.encode=function(a){a&&L.length&&(a=G(a,L));a&&this.o.length&&(a=G(a,this.o));a&&this.s&&(a=this.s(a));a&&this.stemmer&&(a=G(a,this.stemmer));return a};k.prototype.addMatcher=function(a){const b=this.o;for(const c in a)a.hasOwnProperty(c)&&b.push(g(c),a[c]);return this};k.prototype.add=function(a,b,c,d,e){if(this.a&&B(a))return this.u("add",a,b);if(b&&C(b)&&(a||0===a)){var f="@"+a;if(this.c[f]&&!d)return this.update(a,b);if(!e){if(this.async&&
"function"!==typeof importScripts){let e=this;f=new Promise(function(c){setTimeout(function(){e.add(a,b,null,d,!0);e=null;c()})});if(c)f.then(c);else return f;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.f;e=F(c)?c(b):b.split(S);this.filter&&(e=D(e,this.filter));const l=r();l._ctx=r();const q=e.length,t=this.threshold,A=this.depth,k=this.b,u=this.h,K=this.w;for(let b=0;b<q;b++){var h=e[b];if(h){var n=h.length,g=(K?b+1:q-b)/q,p="";switch(c){case "reverse":case "both":for(var m=
n;--m;)p=h[m]+p,J(u,l,p,a,K?1:(n-m)/n,g,t,k-1);p="";case "forward":for(m=0;m<n;m++)p+=h[m],J(u,l,p,a,K?(m+1)/n:1,g,t,k-1);break;case "full":for(m=0;m<n;m++){const b=(K?m+1:n-m)/n;for(let c=n;c>m;c--)p=h.substring(m,c),J(u,l,p,a,b,g,t,k-1)}break;default:if(n=J(u,l,h,a,1,g,t,k-1),A&&1<q&&n>=t)for(n=l._ctx[h]||(l._ctx[h]=r()),h=this.i[h]||(this.i[h]=Q(k-(t||0))),g=b-A,p=b+A+1,0>g&&(g=0),p>q&&(p=q);g<p;g++)g!==b&&J(h,n,e[g],a,0,k-(g<b?b-g:g-b),t,k-1)}}}this.c[f]=1;this.v=!1}return this};k.prototype.u=
function(a,b,c){if(w(b))for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.u(a,b[d],c);this.u(a,b[d])}else{const n=this.a.index,k=this.a.keys;var d=this.a.tag,e=this.a.id;let m;let l;for(var f=0;f<e.length;f++)m=(m||b)[e[f]];if(d){for(e=0;e<d.length;e++){var h=d[e];var g=h.split(":");for(f=0;f<g.length;f++)l=(l||b)[g[f]];l="@"+l}g=this.A[h];g=g[l]||(g[l]=[])}if("remove"===a){delete this.g[m];for(let a=0,b=k.length;a<b;a++){if(a===b-1)return n[k[a]].remove(m,c);n[k[a]].remove(m)}}e=this.a.field;
g&&(g[g.length]=b);for(let f=0,g=e.length;f<g;f++){d=e[f];let l;for(h=0;h<d.length;h++)l=(l||b)[d[h]];this.g[m]=b;d=n[k[f]];h="add"===a?d.add:d.update;if(f===g-1)return h.call(d,m,l,c);h.call(d,m,l)}}};k.prototype.update=function(a,b,c){if(this.a&&B(a))return this.u("update",a,b);this.c["@"+a]&&C(b)&&(this.remove(a),this.add(a,b,c,!0));return this};k.prototype.remove=function(a,b,c){if(this.a&&B(a))return this.u("remove",a,b);var d="@"+a;if(this.c[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=
this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<this.b-(this.threshold||0);b++)M(this.h[b],a);this.depth&&M(this.i,a);delete this.c[d];this.v=!1}return this};let y;k.prototype.search=function(a,b,c,d){if(B(b)){if(w(b))for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=0}let f=a;let h=[];if(B(a)&&!w(a)){(c=a.callback||b)&&(f.callback=null);b=a.limit;var g=
a.threshold;a=a.query}if(this.a){let d=f.where,e=f.bool,n=f.sort;g=this.a.index;var k=f.field;if(k)f.field=null,w(k)||(k=[k]);else if(w(f)){var p=f;k=[];for(var m=0;m<f.length;m++){var l=f[m];k[m]=l.field;e=l.bool;n=l.sort;d=l.where}}else k=this.a.keys;m=k.length;for(l=0;l<m;l++)p&&(f=p[l]),h[l]=g[k[l]].search(f);if(c)return c(E.call(this,a,e,h,n,b,d,void 0));if(this.async){const c=this;return new Promise(function(f){Promise.all(h).then(function(g){f(E.call(c,a,e,g,n,b,d,void 0))})})}return E.call(this,
a,e,h,n,b,d,void 0)}g||(g=this.threshold||0);F(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let a=this;g=new Promise(function(c){setTimeout(function(){c(a.search(f,b,null,!0));a=null})});if(c)g.then(c);else return g;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!C(a))return h;f=a;if(this.cache)if(this.v){if(c=this.j.get(a))return c}else this.j.clear(),this.v=!0;f=this.encode(f);if(!f.length)return h;c=this.f;c=F(c)?c(f):f.split(S);this.filter&&
(c=D(c,this.filter));p=c.length;d=!0;e=[];const q=r();1<p&&(this.depth?(k=!0,l=c[0],q[l]=1):c.sort(Y));if(!k||(m=this.i)[l]){let a=this.b;for(let b=k?1:0;b<p;b++){const f=c[b];if(f){if(!q[f]){const b=[];let c=!1,h=0;if(l=k?m[l]:this.h){let d;for(let e=0;e<a-g;e++)if(d=l[e][f])b[h++]=d,c=!0}if(c)e[e.length]=1<h?b.concat.apply([],b):b[0];else if(!this.m){d=!1;break}q[f]=1}l=f}}}else d=!1;this.a||(d&&(h=O(e,!1,b,void 0,this.m)),this.cache&&this.j.set(a,h));return h};k.prototype.find=function(a,b){return this.where(a,
b,1)[0]||null};k.prototype.where=function(a,b,c,d){const e=d||this.g,f=[];let g=0;var k;let r;if("number"===typeof a)return[e[a]];if(C(a)){if(x(b))return[e[a]];if("id"===a)return[e[b]];var p=1;var m=[a.split(":")];r=!0}else{if(F(a)){b=d||Object.keys(e);c=b.length;for(k=0;k<c;k++)p=d?d[k]:e[b[k]],a(p)&&(f[g++]=p);return f}c||(c=b);k=Object.keys(a);p=k.length;r=!1;if(1===p&&"id"===k[0])return[e[a.id]];if((m=this.D)&&!d)for(var l=0;l<m.length;l++){var q=m[l],t=a[q];if(!x(t)){d=this.A[q]["@"+t];if(0===
--p)return d;k.splice(k.indexOf(q),1);delete a[q];break}}m=Array(p);for(l=0;l<p;l++)m[l]=k[l].split(":")}l=d||Object.keys(e);q=l.length;for(t=0;t<q;t++){const h=d?d[t]:e[l[t]];let n=!0;for(let c=0;c<p;c++){r||(b=a[k[c]]);const d=m[c],e=d.length;let f=h;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==b){n=!1;break}}if(n&&(f[g++]=h,c&&g===c))break}return f};k.prototype.info=function(){let a;let b=0,c=0,d=0;for(var e=0;e<this.b-(this.threshold||0);e++){a=Object.keys(this.h[e]);for(let g=0;g<
a.length;g++){var f=this.h[e][a[g]].length;b+=1*f+2*a[g].length+4;c+=f;d+=2*a[g].length}}a=Object.keys(this.c);f=a.length;for(e=0;e<f;e++)b+=2*a[e].length+2;return{id:this.id,memory:b,items:f,sequences:c,chars:d,cache:this.cache&&this.cache.l?this.cache.l.length:!1,matcher:L.length+(this.o?this.o.length:0),worker:this.F,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.f}};k.prototype.clear=function(){return this.destroy().init()};k.prototype.destroy=function(){this.cache&&
(this.j.clear(),this.j=null);this.h=this.i=this.c=null;if(this.a){const a=this.a.keys;for(let b=0;b<a.length;b++)this.a.index[a[b]].destroy();this.a=this.g=null}return this};k.prototype.export=function(){if(this.a){const a=this.a.keys,b=Array(a.length+1);let c=0;for(;c<a.length;c++){const d=this.a.index[a[c]];b[c]=[d.h,d.i,d.c]}b[c]=this.g;return JSON.stringify(b)}return JSON.stringify([this.h,this.i,this.c])};k.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.keys,c=b.length;
for(let d=0;d<c;d++){const e=this.a.index[b[d]];e.h=a[d][0];e.i=a[d][1];e.c=a[d][2];e.g=a[c]}this.g=a[c]}else this.h=a[0],this.i=a[1],this.c=a[2]};const I={icase:function(a){return a.toLowerCase()},simple:function(){const a=[g("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",g("[\u00e8\u00e9\u00ea\u00eb]"),"e",g("[\u00ec\u00ed\u00ee\u00ef]"),"i",g("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",g("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",g("[\u00fd\u0177\u00ff]"),"y",g("\u00f1"),"n",g("\u00e7"),"c",g("\u00df"),
"s",g(" & ")," and ",g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(b){b=G(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[g("ae"),"a",g("ai"),"ei",g("ay"),"ei",g("ey"),"ei",g("oe"),"o",g("ue"),"u",g("ie"),"i",g("sz"),"s",g("zs"),"s",g("sh"),"s",g("ck"),"k",g("cc"),"k",g("dt"),"t",g("ph"),"f",g("pf"),"f",g("ou"),"o",g("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=G(b,a));c||1<b.length&&(b=N(b));return b}}(),extra:function(){const a=
[g("p"),"b",g("z"),"s",g("[cgq]"),"k",g("n"),"m",g("d"),"t",g("[vw]"),"f",g("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+G(d.substring(1),a))}b=b.join(" ");b=N(b)}return b}}(),balance:function(){const a=[g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(b){return N(G(b.toLowerCase(),a))}}()},Z=function(){function a(a){this.clear();this.B=!0!==a&&a}a.prototype.clear=
function(){this.cache=r();this.count=r();this.index=r();this.l=[]};a.prototype.set=function(a,c){if(this.B&&x(this.cache[a])){let b=this.l.length;if(b===this.B){b--;const a=this.l[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.l[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.B&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.l;for(var e=c;this.count[f[--c]]<=
d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return a}();return k}(!1),this);
