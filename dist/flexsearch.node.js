/*
 FlexSearch v0.4.0
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(h,w,d){let p;(p=d.define)&&p.amd?p([],function(){return w}):(p=d.modules)?p[h.toLowerCase()]=w:"object"===typeof exports?module.exports=w:d[h]=w})("FlexSearch",function(){function h(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:N++;this.init(a,b);w(this,"index",function(){return this.b});w(this,"length",function(){return Object.keys(this.b).length})}function w(a,b,c){Object.defineProperty(a,b,{get:c})}function d(a){return new RegExp(a,"g")}function p(a,b){for(let c=0;c<b.length;c+=
2)a=a.replace(b[c],b[c+1]);return a}function C(a,b,c,f,e,l,g){if(b[c])return b[c];e=e?(9-(g||6))*l+(g||6)*e:l;b[c]=e;e>=g&&(a=a[9-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=f);return e}function G(a,b){if(a){const c=Object.keys(a);for(let f=0,e=c.length;f<e;f++){const e=c[f],g=a[e];if(g)for(let c=0,f=g.length;c<f;c++)if(g[c]===b){1===f?delete a[e]:g.splice(c,1);break}else x(g[c])&&G(g[c],b)}}}function H(a){let b="",c="";var f="";for(let e=0;e<a.length;e++){const l=a[e];if(l!==c)if(e&&"h"===l){if(f="a"===
f||"e"===f||"i"===f||"o"===f||"u"===f||"y"===f,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&f||" "===c)b+=l}else b+=l;f=e===a.length-1?"":a[e+1];c=l}return b}function O(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function P(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function Q(a,b,c,f){let e=[],l;const g=a.length;if(1<g){a.sort(P);const n=u();let k=a[0],r=k.length,q=0;for(;q<r;)n["@"+k[q++]]=1;let m,h=0,v=0;for(;++v<g;){let y=!1;const p=v===g-1;l=[];k=a[v];r=k.length;for(q=0;q<r;){m=
k[q++];var d="@"+m;if(n[d]){const a=n[d];if(a===v){if(p){if(e[h++]=c?c[d]:m,b&&h===b)return e}else n[d]=v+1;y=!0}else f&&(d=l[a]||(l[a]=[]),d[d.length]=m)}}if(!y&&!f)break}if(f&&(h=e.length,(v=l.length)&&(!b||h<b)))for(;v--;)if(m=l[v])for(q=0,r=m.length;q<r;q++)if(e[h++]=c?c["@"+m[q]]:m[q],b&&h===b)return e}else if(g)if(c)for(a=a[0],f=a.length,b&&b<f&&(f=b),e=Array(f),b=0;b<f;b++)e[b]=c["@"+a[b]];else e=a[0],b&&e.length>b&&(e=e.slice(0,b));return e}function D(a){return"string"===typeof a}function E(a){return"function"===
typeof a}function x(a){return"object"===typeof a}function z(a){return"undefined"===typeof a}function I(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=u();return b}function u(){return Object.create(null)}const t={encode:"icase",c:"forward",s:!1,cache:!1,async:!1,A:!1,v:!1,threshold:0,depth:0,a:!1},J={memory:{encode:"extra",c:"strict",threshold:7},speed:{encode:"icase",c:"strict",threshold:7,depth:2},match:{encode:"extra",c:"full"},score:{encode:"extra",c:"strict",threshold:5,depth:4},balance:{encode:"balance",
c:"strict",threshold:6,depth:3},fastest:{encode:"icase",c:"strict",threshold:9,depth:1}},F=[];let N=0;const K=d("\\W+"),L={},M={};h.create=function(a){return new h(a)};h.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&F.push(d(b),a[b]);return this};h.registerEncoder=function(a,b){B[a]=b.bind(B);return this};h.registerLanguage=function(a,b){L[a]=b.filter;M[a]=b.stemmer;return this};h.encode=function(a,b){return B[a](b)};h.prototype.init=function(a,b){this.l=[];if(b){var c=b.preset;
a=b}else a||(a=t),c=a.preset;b={};D(a)?(b=J[a],a={}):c&&(b=J[c]);this.c=a.tokenize||b.c||this.c||t.c;this.v=a.rtl||this.v||t.v;this.async="undefined"===typeof Promise||z(c=a.async)?this.async||t.async:c;this.threshold=z(c=a.threshold)?b.threshold||this.threshold||t.threshold:c;this.depth=z(c=a.depth)?b.depth||this.depth||t.depth:c;this.s=z(c=a.suggest)?this.s||t.s:c;this.m=(c=z(c=a.encode)?b.encode||t.encode:c)&&B[c]&&B[c].bind(B)||(E(c)?c:this.m||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){c=
L[c]||c;b=this.m;var f=u();if(c)for(var e=0;e<c.length;e++){var l=b?b(c[e]):c[e];f[l]=String.fromCharCode(65E3-c.length+e)}this.filter=c=f}if(c=a.stemmer){var g;b=M[c]||c;f=this.m;e=[];if(b)for(g in b)b.hasOwnProperty(g)&&(l=f?f(g):g,e.push(d("(?=.{"+(l.length+3)+",})"+l+"$"),f?f(b[g]):b[g]));this.stemmer=g=e}this.a=e=(c=a.doc)?c:this.a||t.a;this.g=I(10-(this.threshold||0));this.h=u();this.b=u();this.f=e&&u();if(e)if(a.doc=null,g=e.field,b=e.index=[],f=e.ref={},e.id=e.id.split(":"),g.constructor===
Array)for(e=0;e<g.length;e++)f[g[e]]=e,g[e]=g[e].split(":"),b[e]=new h(a),b[e].f=this.f;else f[g]=0,e.field=[g.split(":")],b[0]=new h(a),b[0].f=this.f;this.u=!0;this.j=(this.cache=c=z(c=a.cache)?this.cache||t.cache:c)?new R(c):!1;return this};h.prototype.encode=function(a){a&&F.length&&(a=p(a,F));a&&this.l.length&&(a=p(a,this.l));a&&this.m&&(a=this.m(a));a&&this.stemmer&&(a=p(a,this.stemmer));return a};h.prototype.addMatcher=function(a){const b=this.l;for(const c in a)a.hasOwnProperty(c)&&b.push(d(c),
a[c]);return this};h.prototype.add=function(a,b,c,f,e){if(this.a&&x(a))return this.o("add",a,b);if(b&&D(b)&&(a||0===a)){var l="@"+a;if(this.b[l]&&!f)return this.update(a,b);if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;l=new Promise(function(c){setTimeout(function(){e.add(a,b,null,f,!0);e=null;c()})});if(c)l.then(c);else return l;return this}if(c)return this.add(a,b,null,f,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.c;e=E(c)?c(b):b.split(K);const r=u();r._ctx=
u();const m=this.threshold,p=this.depth,v=this.g,A=e.length,y=this.v;for(let b=0;b<A;b++){var g=e[b];if(g){var d=g.length,n=(y?b+1:A-b)/A,k="";switch(c){case "reverse":case "both":for(var h=d;--h;)k=g[h]+k,C(v,r,k,a,y?1:(d-h)/d,n,m);k="";case "forward":for(h=0;h<d;h++)k+=g[h],C(v,r,k,a,y?(h+1)/d:1,n,m);break;case "full":for(h=0;h<d;h++){const b=(y?h+1:d-h)/d;for(let c=d;c>h;c--)k=g.substring(h,c),C(v,r,k,a,b,n,m)}break;default:if(d=C(v,r,g,a,1,n,m),p&&1<A&&d>=m)for(d=r._ctx[g]||(r._ctx[g]=u()),g=
this.h[g]||(this.h[g]=I(10-(m||0))),n=b-p,k=b+p+1,0>n&&(n=0),k>A&&(k=A);n<k;n++)n!==b&&C(g,d,e[n],a,0,10-(n<b?b-n:n-b),m)}}}this.b[l]=1;this.u=!1}return this};h.prototype.o=function(a,b,c){if(b.constructor===Array)for(let e=0,f=b.length;e<f;e++){if(e===f-1)return this.o(a,b[e],c);this.o(a,b[e])}else{const d=this.a.index;let g=this.a.id,h;for(var f=0;f<g.length;f++)h=(h||b)[g[f]];if("remove"===a){delete this.f["@"+h];for(let a=0,b=d.length;a<b;a++){if(a===b-1)return d[a].remove(h,c);d[a].remove(h)}}g=
this.a.field;for(let l=0,k=g.length;l<k;l++){f=g[l];let r;for(var e=0;e<f.length;e++)r=(r||b)[f[e]];this.f["@"+h]=b;f=d[l];e="add"===a?f.add:f.update;if(l===k-1)return e.call(f,h,r,c);e.call(f,h,r)}}};h.prototype.update=function(a,b,c){if(this.a&&x(a))return this.o("update",a,b);this.b["@"+a]&&D(b)&&(this.remove(a),this.add(a,b,c,!0));return this};h.prototype.remove=function(a,b,c){if(this.a&&x(a))return this.o("remove",a,b);var f="@"+a;if(this.b[f]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=
this;f=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)f.then(b);else return f;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<10-(this.threshold||0);b++)G(this.g[b],a);this.depth&&G(this.h,a);delete this.b[f];this.u=!1}return this};h.prototype.search=function(a,b,c,f){if(x(b)){if(b.constructor===Array)for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=0}let d=a;let g=[];if(x(a)&&a.constructor!==Array){(c=a.callback||b)&&(d.callback=
null);b=a.limit;var h=a.threshold;var n=a.boost;a=a.query}if(this.a){a=this.a.ref;h=this.a.index;var k=d.field;if(k)d.field=null;else if(d.constructor===Array){var p=d;k=[];for(var q=0;q<d.length;q++)k[q]=d[q].field}else k=Object.keys(a);if(x(k)){k.constructor===Array||(k=[k]);q=k.length;for(var m=0;m<q;m++)p&&(d=p[m]),g[m]=h[a[k[m]]].search(d);return c?c(g.concat.apply([],g)):this.async?new Promise(function(a){Promise.all(g).then(function(b){a(b.concat.apply([],b))})}):g.concat.apply([],g)}return h[a[k]].search(d,
c)}h||(h=this.threshold||0);E(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(!f){if(this.async&&"function"!==typeof importScripts){let e=this;a=new Promise(function(a){setTimeout(function(){a(e.search(d,b,null,!0));e=null})});if(c)a.then(c);else return a;return this}if(c)return c(this.search(d,b,null,!0)),this}if(!a||!D(a))return g;d=a;if(this.cache)if(this.u){if(c=this.j.get(a))return c}else this.j.clear(),this.u=!0;d=this.encode(d);if(!d.length)return g;c=this.c;c=E(c)?c(d):d.split(K);p=c.length;f=!0;e=[];
const t=u();1<p&&(this.depth?(k=!0,m=c[0],t[m]=1):c.sort(O));if(!k||(q=this.h)[m]){let a=0;n&&(h=(h||1)/n,0>n&&(a=h));for(n=k?1:0;n<p;n++){const b=c[n];if(b){if(!t[b]){const c=[];let d=!1,g=0;if(m=k?q[m]:this.g){let e;for(let f=a;f<10-h;f++)if(e=m[f][b])c[g++]=e,d=!0}if(d)e[e.length]=1<g?c.concat.apply([],c):c[0];else if(!this.s){f=!1;break}t[b]=1}m=b}}}else f=!1;f&&(g=Q(e,b,this.f,this.s));this.cache&&this.j.set(a,g);return g};h.prototype.info=function(){let a;let b=0,c=0,f=0;for(var e=0;e<10-(this.threshold||
0);e++){a=Object.keys(this.g[e]);for(let g=0;g<a.length;g++){var d=this.g[e][a[g]].length;b+=1*d+2*a[g].length+4;c+=d;f+=2*a[g].length}}a=Object.keys(this.b);d=a.length;for(e=0;e<d;e++)b+=2*a[e].length+2;return{id:this.id,memory:b,items:d,sequences:c,chars:f,cache:this.cache&&this.cache.i?this.cache.i.length:!1,matcher:F.length+(this.l?this.l.length:0),worker:this.A,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.c}};h.prototype.clear=function(){return this.destroy().init()};
h.prototype.destroy=function(){this.cache&&(this.j.clear(),this.j=null);this.g=this.h=this.b=null;return this};h.prototype.export=function(){if(this.a){const a=this.a.index,b=Array(a.length+1);let c=0;for(;c<a.length;c++)b[c]=[a[c].g,a[c].h,a[c].b];b[c]=this.f;return JSON.stringify(b)}return JSON.stringify([this.g,this.h,this.b])};h.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.index,c=b.length;for(let d=0;d<c;d++){const e=b[d];e.g=a[d][0];e.h=a[d][1];e.b=a[d][2];e.f=a[c]}this.f=
a[c]}else this.g=a[0],this.h=a[1],this.b=a[2],this.f=a[3]};const B={icase:function(a){return a.toLowerCase()},simple:function(){const a=[d("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",d("[\u00e8\u00e9\u00ea\u00eb]"),"e",d("[\u00ec\u00ed\u00ee\u00ef]"),"i",d("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",d("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",d("[\u00fd\u0177\u00ff]"),"y",d("\u00f1"),"n",d("\u00e7"),"c",d("\u00df"),"s",d(" & ")," and ",d("[-/]")," ",d("[^a-z0-9 ]"),"",d("\\s+")," "];return function(b){b=
p(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[d("ae"),"a",d("ai"),"ei",d("ay"),"ei",d("ey"),"ei",d("oe"),"o",d("ue"),"u",d("ie"),"i",d("sz"),"s",d("zs"),"s",d("sh"),"s",d("ck"),"k",d("cc"),"k",d("dt"),"t",d("ph"),"f",d("pf"),"f",d("ou"),"o",d("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=p(b,a));c||1<b.length&&(b=H(b));return b}}(),extra:function(){const a=[d("p"),"b",d("z"),"s",d("[cgq]"),"k",d("n"),"m",d("d"),"t",d("[vw]"),"f",d("[aeiouy]"),
""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+p(d.substring(1),a))}b=b.join(" ");b=H(b)}return b}}(),balance:function(){const a=[d("[-/]")," ",d("[^a-z0-9 ]"),"",d("\\s+")," "];return function(b){return H(p(b.toLowerCase(),a))}}()},R=function(){function a(a){this.clear();this.w=!0!==a&&a}a.prototype.clear=function(){this.cache=u();this.count=u();this.index=u();this.i=[]};a.prototype.set=function(a,
c){if(this.w&&z(this.cache[a])){let b=this.i.length;if(b===this.w){b--;const a=this.i[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.i[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.w&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.i;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};
return a}();return h}(!1),this);
