/**!
 * FlexSearch.js v0.7.0
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){'use strict';Object.assign||(Object.assign=function(){for(var a=arguments,b=a.length,c=a[0],f=1,d,h,e;f<b;f++){d=a[f];h=Object.keys(d);e=h.length;for(var g=0,l;g<e;g++)l=h[g],c[l]=d[l]}return c});window.requestAnimationFrame||(window.requestAnimationFrame=window.setTimeout);window.cancelAnimationFrame||(window.cancelAnimationFrame=window.clearTimeout);window.Promise||(window.Promise=function(){function a(b){this.b=null;var c=this;b(function(f){c.b&&(c.b(f),c.b=null)})}a.prototype.then=function(b){this.b=b};return a}());function w(a){return"string"===typeof a}function y(a){return a.constructor===Array}function z(a){return"function"===typeof a}function A(a){return"object"===typeof a}function B(a){for(var b=Array(a),c=0;c<a;c++)b[c]=G();return b}function G(){return Object.create(null)}function I(a,b){for(var c=0,f=b.length;c<f;c+=2)a=a.replace(b[c],b[c+1]);return a};var L={memory:{encode:"extra",f:"strict",threshold:0,c:1},speed:{encode:"icase",f:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",f:"full",threshold:1,c:3},score:{encode:"extra",f:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,c:9,depth:1}};var M={encode:function(a){return a.toLowerCase()},f:"strict",split:/[\W_]+/,cache:!1,async:!1,v:!1,o:!1,a:!1,c:9,threshold:0,depth:0},aa=0,N={};function P(a){if(!(this instanceof P))return new P(a);var b=a&&a.id;this.id=b||0===b?b:aa++;this.init(a);Q(this,"index",function(){return Object.keys(this.b)});Q(this,"length",function(){return this.index.length})}P.registerCharset=function(a,b,c,f){a=N[a]||(N[a]={});a.j=b;a.split=c;a.o=f;return P};
P.registerLanguage=function(a,b,c,f){a=N[a]||(N[a]={});a.filter=b;a.s=c;a.h=f;return P};
P.prototype.init=function(a){this.h=[];var b;if(w(a))a=L[a];else if(b=a.preset)a=Object.assign({},L[b],a);this.j||(a?a=Object.assign({},M,a):a=M);if(a){var c=a.charset,f=a.lang;this.m=a.tokenize;this.split=w(b=c||a.split)?N[b]?N[b].split:new RegExp(b,"g"):b;this.o=w(b=c||a.rtl)?N[b].o:b;this.async=a.async;this.threshold=a.threshold;this.c=(b=a.resolution)<=this.threshold?this.threshold+1:b;this.depth="strict"===this.m&&a.depth||0;this.j=w(b=c||a.encode)?N[-1===b.indexOf(":")?b+":default":b].encode:
b;if(c=b=f||a.matcher){b=w(b)?N[b].h:b;c=Object.keys(b);var d=c.length;for(var h=Array(2*d),e=0,g=0;e<d;e++){var l=c[e];h[g++]=new RegExp(l,"g");h[g++]=b[l]}c=h}this.h=c;if(c=b=f||a.filter)for(b=w(b)?N[b].filter:b,c=G(),d=0;d<b.length;d++)c[b[d]]=1;this.filter=c;if(f=b=f||a.stemmer){f=w(b)?N[b].s:b;c=Object.keys(f);d=c.length;h=Array(2*d);for(g=e=0;e<d;e++)l=c[e],h[g++]=new RegExp(l+"(?!\\b)"+l+"(\\b)","g"),h[g++]=f[l];f=h}this.s=f;(this.a=d=(b=a.doc)&&R(b))&&(a.doc=null)}this.l=B(this.c-(this.threshold||
0));this.g=G();this.b={};if(d){this.i=G();f=d.index={};b=d.keys=[];c=d.field;h=d.store;y(d.id)||(d.id=d.id.split(":"));if(h){e=G();if(w(h))e[h]=1;else if(y(h))for(g=0;g<h.length;g++)e[h[g]]=1;else A(h)&&(e=h);d.store=e}if(c){if(!y(c))if(A(c)){var q=c;d.field=c=Object.keys(c)}else d.field=c=[c];for(d=0;d<c.length;d++)h=c[d],y(h)||(q&&(a=q[h]),b[d]=h,c[d]=h.split(":")),f[h]=new P(a)}}return this};
function R(a){var b=G(),c;for(c in a)if(a.hasOwnProperty(c)){var f=a[c];b[c]=y(f)?f.slice(0):A(f)?R(f):f}return b}
P.prototype.add=function(a,b,c,f,d){if(this.a&&A(a))return U(this,"add",a,b);if(b&&w(b)&&(a||0===a)){if(this.b[a]&&!f)return this.update(a,b);if(!d){if(this.async){var h=this;d=new Promise(function(C){setTimeout(function(){h.add(a,b,null,f,!0);h=null;C()})});if(c)d.then(c);else return d;return this}if(c)return this.add(a,b,null,f,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.f(b);d=G();d._ctx=G();for(var e=c.length,g=this.threshold,l=this.depth,q=this.c,n=this.l,m=this.o,k=0;k<e;k++){var p=
c[k];if(p){var u=p.length,v=(m?k+1:e-k)/e,r="";switch(this.m){case "reverse":case "both":for(var t=u;--t;)r=p[t]+r,V(n,d,r,a,m?1:(u-t)/u,v,g,q-1);r="";case "forward":for(t=0;t<u;t++)r+=p[t],V(n,d,r,a,m?(t+1)/u:1,v,g,q-1);break;case "full":for(t=0;t<u;t++)for(var K=(m?t+1:u-t)/u,H=u;H>t;H--)r=p.substring(t,H),V(n,d,r,a,K,v,g,q-1);break;default:if(u=V(n,d,p,a,1,v,g,q-1),l&&1<e&&u>=g)for(u=d._ctx[p]||(d._ctx[p]=G()),p=this.g[p]||(this.g[p]=B(q-(g||0))),v=k-l,r=k+l+1,0>v&&(v=0),r>e&&(r=e);v<r;v++)v!==
k&&V(p,u,c[v],a,0,q-(v<k?k-v:v-k),g,q-1)}}}this.b[a]=1}return this};
function U(a,b,c,f){if(y(c)){var d=c.length;if(d--){for(var h=0;h<d;h++)U(a,b,c[h]);return U(a,b,c[d],f)}}else{var e=a.a.index,g=a.a.keys,l=a.a.tag;h=a.a.store;var q;var n=a.a.id;d=c;for(var m=0;m<n.length;m++)d=d[n[m]];if("remove"===b&&(delete a.i[d],n=g.length,n--)){for(a=0;a<n;a++)e[g[a]].remove(d);return e[g[n]].remove(d,f)}if(l){for(q=0;q<l.length;q++){var k=l[q];var p=c;n=k.split(":");for(m=0;m<n.length;m++)p=p[n[m]];p="@"+p}q=a.u[k];q=q[p]||(q[p]=[])}n=a.a.field;l=0;for(k=n.length;l<k;l++){m=
n[l];p=c;for(var u=0;u<m.length;u++)p=p[m[u]];m=e[g[l]];"add"===b?m.add(d,p,l===k-1&&f):m.update(d,p,l===k-1&&f)}if(h){f=Object.keys(h);b=G();for(e=0;e<f.length;e++)if(g=f[e],h[g])for(g=g.split(":"),l=n=void 0,k=0;k<g.length;k++)p=g[k],n=(n||c)[p],l=(l||b)[p]=n;c=b}q&&(q[q.length]=c);a.i[d]=c}return a}P.prototype.update=function(a,b,c){if(this.a&&A(a))return U(this,"update",a,b);this.b[a]&&w(b)&&(this.remove(a),this.add(a,b,c,!0));return this};
P.prototype.remove=function(a,b,c){if(this.a&&A(a))return U(this,"remove",a,b);if(this.b[a]){if(!c){if(this.async&&"function"!==typeof importScripts){var f=this;c=new Promise(function(d){setTimeout(function(){f.remove(a,null,!0);f=null;d()})});if(b)c.then(b);else return c;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<this.c-(this.threshold||0);b++)W(this.l[b],a);this.depth&&W(this.g,a);delete this.b[a]}return this};var X;
function Y(a,b,c,f,d,h,e,g){c=ba(c,d,!1,b,e,g);if(h){h=c.page;var l=c.next;c=c.result}b=c;a=a.i;c=b.length;d=Array(c);for(e=0;e<c;e++)d[e]=a[b[e]];c=d;f&&(z(f)||(X=f.split(":"),1<X.length?f=ca:(X=X[0],f=da)),c.sort(f));return c=Z(h,l,c)}
P.prototype.search=function(a,b,c,f){if(A(b)){if(y(b))for(var d=0;d<b.length;d++)b[d].query=a;else b.query=a;a=b;b=1E3}else b&&z(b)?(c=b,b=1E3):b||0===b||(b=1E3);var h=[],e=a;if(A(a)&&!y(a)){c||(c=a.callback)&&(e.callback=null);var g=a.sort;var l=!1;b=a.limit;var q=a.threshold;var n=!1;a=a.query}if(this.a){q=this.a.index;var m=e.bool||"or";n=e.field;var k=m,p,u;if(n)y(n)||(n=[n]);else if(y(e)){var v=e;n=[];k=[];for(var r=0;r<e.length;r++){var t=e[r];a=t.bool||m;n[r]=t.field;k[r]=a;"not"===a?p=!0:
"and"===a&&(u=!0)}}else n=this.a.keys;m=n.length;for(r=0;r<m;r++)v&&(e=v[r]),l&&!w(e)&&(e.page=null,e.limit=0),h[r]=q[n[r]].search(e,0);if(c)return c(Y(this,k,h,g,b,l,u,p));if(this.async){var K=this;return new Promise(function(S){Promise.all(h).then(function(ea){S(Y(K,k,ea,g,b,l,u,p))})})}return Y(this,k,h,g,b,l,u,p)}q||(q=this.threshold||0);if(!f){if(this.async&&"function"!==typeof importScripts){var H=this;q=new Promise(function(S){setTimeout(function(){S(H.search(e,b,null,!0));H=null})});if(c)q.then(c);
else return q;return this}if(c)return c(this.search(e,b,null,!0)),this}if(!a||!w(a))return h;e=a;e=this.encode(e);if(!e.length)return h;c=this.f(e);v=c.length;a=!0;f=[];d=G();var C=0;1<v&&(this.depth?m=!0:c.sort(fa));if(!m||(r=this.g))for(var T=this.c;C<v;C++){var x=c[C];if(x){if(m){if(!t)if(r[x])t=x,d[x]=1;else if(!n)return h;if(n&&C===v-1&&!f.length)m=!1,x=t||x,d[x]=0;else if(!t)continue}if(!d[x]){var F=[],D=!1,J=0;if(t=m?r[t]:this.l)for(var O=void 0,E=0;E<T-q;E++)if(O=t[E]&&t[E][x])F[J++]=O,D=
!0;if(D)t=x,f[f.length]=1<J?F.concat.apply([],F):F[0];else{a=!1;break}d[x]=1}}}else a=!1;a&&(h=ba(f,b,l));return h};P.prototype.clear=function(){return this.destroy().init()};P.prototype.destroy=function(){this.l=this.g=this.b=null;if(this.a){for(var a=this.a.keys,b=0;b<a.length;b++)this.a.index[a[b]].destroy();this.a=this.i=null}return this};function Q(a,b,c){Object.defineProperty(a,b,{get:c})}
function V(a,b,c,f,d,h,e,g){if(b[c])return b[c];d=d?(g-(e||g/1.5))*h+(e||g/1.5)*d:h;b[c]=d;d>=e&&(a=a[g-(d+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=f);return d}function W(a,b){if(a)for(var c=Object.keys(a),f=0,d=c.length;f<d;f++){var h=c[f],e=a[h];if(e)for(var g=0,l=e.length;g<l;g++)if(e[g]===b){1===l?delete a[h]:e.splice(g,1);break}else A(e[g])&&W(e[g],b)}}P.prototype.encode=function(a){a&&this.j&&(a=this.j(a));a&&this.h.length&&(a=I(a,this.h));a&&this.s&&(a=I(a,this.s));return a};
P.prototype.f=function(a){a=y(a)?a:z(this.m)?this.m(a):a.split(this.split);if(this.filter){for(var b=this.filter,c=a.length,f=z(b),d=[],h=0,e=0;h<c;h++){var g=a[h];g&&(f&&b(g)||!f&&!b[g])&&(d[e++]=g)}a=d}return a};function fa(a,b){return b.length-a.length}function da(a,b){return a[X]-b[X]}function ca(a,b){for(var c=X.length,f=0;f<c;f++)a=a[X[f]],b=b[X[f]];return a-b}function Z(a,b,c){return a?{page:a,next:b?""+b:null,result:c}:c}
function ba(a,b,c,f,d,h){var e=[];if(!0===c){c="0";var g=""}else g=c&&c.split(":");var l=a.length;if(1<l){var q=G(),n,m=0,k,p=!0,u=0,v;g&&(2===g.length?g=!1:g=v=parseInt(g[0],10));if(h){for(n=G();m<l;m++)if("not"===f[m]){var r=a[m];var t=r.length;for(k=0;k<t;k++)n["@"+r[k]]=1}else var K=m+1;if("undefined"===typeof K)return Z(c,E,e);m=0}else var H=w(f)&&f;for(var C;m<l;m++){var T=m===(K||l)-1;if(!H||!m)if((k=H||f&&f[m])&&"and"!==k)if("or"===k)C=!1;else continue;else C=d=!0;r=a[m];if(t=r.length){if(p)if(D){p=
D.length;for(k=0;k<p;k++){var x=D[k];var F="@"+x;h&&n[F]||(q[F]=1,d||(e[u++]=x))}var D=null;p=!1}else{D=r;continue}F=!1;for(k=0;k<t;k++){x=r[k];var J="@"+x,O=d?q[J]||0:m;if(!(!O||h&&n[J]||!d&&q[J])&&O===m){if(T){if(!v||--v<u)if(e[u++]=x,b&&u===b)return Z(c,u+(g||0),e)}else q[J]=m+1;F=!0}}if(C&&!F)break}else if(C)return Z(c,E,r)}if(D)if(a=D.length,h)for(k=g?parseInt(g,10):0;k<a;k++)h=D[k],n["@"+h]||(e[u++]=h);else e=D}else!l||f&&"not"===f[0]||(e=a[0],g&&(g=parseInt(g[0],10)));if(b){n=e.length;g&&g>
n&&(g=0);g=g||0;var E=g+b;E<n?e=e.slice(g,E):(E=0,g&&(e=e.slice(g)))}return Z(c,E,e)};(function(){var a=this||window,b;(b=a.define)&&b.amd?b([],function(){return P}):"object"===typeof a.exports?a.module.exports=P:a.FlexSearch=P})();}).call(this);
