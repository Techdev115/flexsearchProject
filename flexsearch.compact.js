/*
 FlexSearch v0.3.21
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(g,r,c){let h;(h=c.define)&&h.amd?h([],function(){return r}):(h=c.modules)?h[g.toLowerCase()]=r:"object"===typeof exports?module.exports=r:c[g]=r})("FlexSearch",function(){function g(a){w(a)&&(a=E[a]);a||(a=t);this.id=a.id||N++;this.init(a);r(this,"index",function(){return this.b});r(this,"length",function(){return Object.keys(this.b).length})}function r(a,b,d){Object.defineProperty(a,b,{get:d})}function c(a){return new RegExp(a,"g")}function h(a,b){for(let d=0;d<b.length;d+=
2)a=a.replace(b[d],b[d+1]);return a}function v(a,b,d,f,e,l,c){if(b[d])return b[d];e=e?(9-(c||6))*l+(c||6)*e:l;b[d]=e;e>=c&&(a=a[e+.5>>0],a=a[d]||(a[d]=[]),a[a.length]=f);return e}function A(a,b){if(a){const d=Object.keys(a);for(let f=0,e=d.length;f<e;f++){const e=d[f],c=a[e];if(c)for(let d=0,f=c.length;d<f;d++)if(c[d]===b){1===f?delete a[e]:c.splice(d,1);break}else"object"===typeof c[d]&&A(c[d],b)}}}function G(a){const b=[];if(!a)return b;let d=0,f=0,e=0,c="";const k=a.length;for(let l=0;l<k;l++){const n=
a[l];"a"===n||"e"===n||"i"===n||"o"===n||"u"===n||"y"===n?d++:f++;" "!==n&&(c+=n);if(" "===n||d>=(8<k?2:1)&&2<=f||2<=d&&f>=(8<k?2:1)||l===k-1)c&&(b[e]&&2<c.length&&e++,b[e]=b[e]?b[e]+c:c," "===n&&e++,c=""),f=d=0}return b}function B(a){let b="",d="";var f="";for(let e=0;e<a.length;e++){const c=a[e];if(c!==d)if(e&&"h"===c){if(f="a"===f||"e"===f||"i"===f||"o"===f||"u"===f||"y"===f,("a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d)&&f||" "===d)b+=c}else b+=c;f=e===a.length-1?"":a[e+1];d=c}return b}
function O(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function P(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function Q(a,b,d){let c=[],e=[];const l=a.length;if(1<l){a.sort(P);const f={};let n=a[0],g=n.length,h=0;for(;h<g;)f[n[h++]]=1;let p,q=0,m=0;for(;++m<l;){let F=!1;const R=m===l-1;e=[];n=a[m];g=n.length;for(h=0;h<g;)if(p=n[h++],f[p]){var k=f[p];if(k===m){if(R){if(c[q++]=p,b&&q===b)return c}else f[p]=m+1;F=!0}else d&&(k=e[k]||(e[k]=[]),k[k.length]=p)}if(!F&&!d)break}if(d&&(q=c.length,(m=e.length)&&
(!b||q<b)))for(;m--;)if(p=e[m])for(let a=0,d=p.length;a<d;a++)if(c[q++]=p[a],b&&q===b)return c}else l&&(c=a[0],b&&c.length>b&&(c=c.slice(0,b)));return c}function w(a){return"string"===typeof a}function x(a){return"function"===typeof a}function y(a){return"undefined"===typeof a}function C(a){a.l||(a.l=H(function(){a.l=0;{const b=a.async;let d;b&&(a.async=!1);if(a.c.length){const b=Date.now();let c;for(;(c=a.c.shift())||0===c;){d=a.f[c];switch(d[0]){case z.add:a.add(d[1],d[2]);break;case z.remove:a.remove(d[1])}delete a.f[c];
if(100<Date.now()-b)break}a.c.length&&C(a)}b&&(a.async=b)}},1,"search-async-"+a.id))}function I(a){const b=Array(a);for(let d=0;d<a;d++)b[d]={};return b}const t={encode:"icase",a:"forward",m:!1,cache:!1,async:!1,o:!1,threshold:0,depth:0},E={memory:{encode:"extra",a:"strict",threshold:7},speed:{encode:"icase",a:"strict",threshold:7,depth:2},match:{encode:"extra",a:"full"},score:{encode:"extra",a:"strict",threshold:5,depth:4},balance:{encode:"balance",a:"strict",threshold:6,depth:3},fastest:{encode:"icase",
a:"strict",threshold:9,depth:1}},D=[];let N=0;const z={add:0,update:1,remove:2},J=c("[\\s/-]"),K={},L={},M=function(){const a=Object.getOwnPropertyNames({}.__proto__),b={};for(let d=0;d<a.length;d++)b[a[d]]=1;return b}();g.create=function(a){return new g(a)};g.registerMatcher=function(a){for(let b in a)a.hasOwnProperty(b)&&D.push(c(b),a[b]);return this};g.registerEncoder=function(a,b){u[a]=b.bind(u);return this};g.registerLanguage=function(a,b){K[a]=b.filter;L[a]=b.stemmer;return this};g.encode=function(a,
b){return M[a]?b:u[a](b)};g.prototype.init=function(a){this.j=[];a||(a=t);var b=a.profile,d=b?E[b]:{};this.a=a.tokenize||d.a||this.a||t.a;this.async=y(b=a.async)?this.async||t.async:b;this.threshold=y(b=a.threshold)?d.threshold||this.threshold||t.threshold:b;this.depth=y(b=a.depth)?d.depth||this.depth||t.depth:b;this.h=(b=y(b=a.encode)?d.encode:b)&&u[b]&&u[b].bind(u)||(x(b)?b:this.h||!1);(b=a.matcher)&&this.addMatcher(b);if(b=a.filter){b=K[b]||b;d=this.h;var f={};if(b)for(let a=0;a<b.length;a++){const c=
d?d(b[a]):b[a];f[c]=String.fromCharCode(65E3-b.length+a)}this.filter=b=f}if(b=a.stemmer){var e;a=L[b]||b;b=this.h;d=[];if(a)for(e in a)a.hasOwnProperty(e)&&(f=b?b(e):e,d.push(c("(?=.{"+(f.length+3)+",})"+f+"$"),b?b(a[e]):a[e]));this.stemmer=e=d}this.i=I(10);this.g={};this.b={};this.f={};this.c=[];this.l=0;return this};g.prototype.encode=function(a){a&&D.length&&(a=h(a,D));a&&this.j.length&&(a=h(a,this.j));a&&this.h&&(a=this.h(a));a&&this.stemmer&&(a=h(a,this.stemmer));return a};g.prototype.addMatcher=
function(a){const b=this.j;for(const d in a)a.hasOwnProperty(d)&&b.push(c(d),a[d]);return this};g.prototype.add=function(a,b,d){if(b&&w(b)&&(a&&!M[a]||0===a))if(this.b[a]&&!d)this.update(a,b);else{if(this.async)return this.f[a]||(this.c[this.c.length]=a),this.f[a]=[z.add,a,b],C(this),this;b=this.encode(b);if(!b.length)return this;d=this.a;b=x(d)?d(b):"ngram"===d?G(b):b.split(J);const f={_ctx:{}},h=this.threshold,r=this.depth,p=this.i,q=b.length;for(let m=0;m<q;m++){var c=b[m];if(c){var e=c.length,
l=(q-m)/q,k="";switch(d){case "reverse":case "both":for(var g=e-1;1<=g;g--)k=c[g]+k,v(p,f,k,a,(e-g)/e,l,h);k="";case "forward":for(g=0;g<e;g++)k+=c[g],v(p,f,k,a,1,l,h);break;case "full":for(g=0;g<e;g++){const b=(e-g)/e;for(let d=e;d>g;d--)k=c.substring(g,d),v(p,f,k,a,b,l,h)}break;default:if(e=v(p,f,c,a,1,l,h),r&&1<q&&e>=h)for(e=f._ctx[c]||(f._ctx[c]={}),c=this.g[c]||(this.g[c]=I(10)),l=m-r,k=m+r+1,0>l&&(l=0),k>q&&(k=q);l<k;l++)l!==m&&v(c,e,b[l],a,0,10-(l<m?m-l:l-m),h)}}}this.b[a]=1}return this};g.prototype.update=
function(a,b){this.b[a]&&w(b)&&(this.remove(a),this.add(a,b,!0));return this};g.prototype.remove=function(a){if(this.b[a]){if(this.async)return this.f[a]||(this.c[this.c.length]=a),this.f[a]=[z.remove,a],C(this),this;for(let b=0;10>b;b++)A(this.i[b],a);this.depth&&A(this.g,a);delete this.b[a]}return this};g.prototype.search=function(a,b,c,f){let d=a,g,k=[];"object"===typeof a&&((c=a.callback||b)&&(d.callback=null),b=a.limit,g=a.threshold,a=a.query);g||(g=this.threshold||0);x(b)?(c=b,b=1E3):b||0===
b||(b=1E3);if(c){{let a=this;H(function(){c(a.search(d,b,null,!0));a=null},1,"search-"+this.id)}}else{if(!f&&this.async&&"function"!==typeof importScripts){let a=this;return new Promise(function(c){c(a.search(d,b,null,!0));a=null})}if(!a||!w(a))return k;d=a;d=this.encode(d);if(!d.length)return k;a=this.a;a=x(a)?a(d):"ngram"===a?G(d):d.split(J);f=a.length;var h=!0,n=[],r={};if(1<f)if(this.depth){var t=!0;var p=a[0];r[p]=1}else a.sort(O);var q;if(!t||(q=this.g)[p])for(let b=t?1:0;b<f;b++){const c=a[b];
if(c&&!r[c]){let a=!1;const b=[];let d=0;for(let e=9;e>=g;e--){var m=(t?q[p]:this.i)[e];if(m=m[c])b[d++]=m,a=!0}if(a)n[n.length]=1<d?n.concat.apply([],b):b[0];else{h=!1;break}r[c]=1}p=c}else h=!1;h&&(k=Q(n,b,!1));return k}};g.prototype.clear=function(){this.destroy();return this.init()};g.prototype.destroy=function(){this.filter=this.stemmer=this.i=this.g=this.b=this.f=this.c=null;return this};const u={icase:function(a){return a.toLowerCase()},simple:function(){const a=[c("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),
"a",c("[\u00e8\u00e9\u00ea\u00eb]"),"e",c("[\u00ec\u00ed\u00ee\u00ef]"),"i",c("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",c("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",c("[\u00fd\u0177\u00ff]"),"y",c("\u00f1"),"n",c("\u00e7"),"c",c("\u00df"),"s",c(" & ")," and ",c("[-/]")," ",c("[^a-z0-9 ]"),"",c("\\s+")," "];return function(b){b=h(b.toLowerCase(),a);return" "!==b?b:""}}(),advanced:function(){const a=[c("ae"),"a",c("ai"),"ei",c("ay"),"ei",c("ey"),"ei",c("oe"),"o",c("ue"),"u",c("ie"),"i",c("sz"),"s",
c("zs"),"s",c("sh"),"s",c("ck"),"k",c("cc"),"k",c("dt"),"t",c("ph"),"f",c("pf"),"f",c("ou"),"o",c("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=h(b,a));c||1<b.length&&(b=B(b));return b}}(),extra:function(){const a=[c("p"),"b",c("z"),"s",c("[cgq]"),"k",c("n"),"m",c("d"),"t",c("[vw]"),"f",c("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+h(d.substring(1),
a))}b=b.join(" ");b=B(b)}return b}}(),balance:function(){const a=[c("[-/]")," ",c("[^a-z0-9 ]"),"",c("\\s+")," "];return function(b){return B(h(b.toLowerCase(),a))}}()},H=function(){const a={};return function(b,c,f){const d=a[f];d&&clearTimeout(d);return a[f]=setTimeout(b,c)}}();return g}(!1),this);
