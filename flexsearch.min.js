/*
 FlexSearch v0.3.5
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(u,B,g){let v;(v=g.define)&&v.amd?v([],function(){return B}):(v=g.modules)?v[u.toLowerCase()]=B:"object"===typeof exports?module.exports=B:g[u]=B})("FlexSearch",function O(u){function g(a){E(a)&&(a=J[a]);a||(a=w);this.id=a.id||P++;this.init(a);v(this,"index",function(){return this.a});v(this,"length",function(){return Object.keys(this.a).length})}function v(a,b,c){Object.defineProperty(a,b,{get:c})}function e(a){return new RegExp(a,"g")}function x(a,b){for(let c=0;c<b.length;c+=
2)a=a.replace(b[c],b[c+1]);return a}function y(a,b,c,d,f,l,h){if(b[c])return b[c];f=f?(9-(h||6))*l+(h||6)*f:l;b[c]=f;f>=h&&(a=a[9-(f+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return f}function H(a,b){if(a){const c=Object.keys(a);for(let d=0,f=c.length;d<f;d++){const f=c[d],h=a[f];if(h)for(let c=0,d=h.length;c<d;c++)if(h[c]===b){1===d?delete a[f]:h.splice(c,1);break}else"object"===typeof h[c]&&H(h[c],b)}}}function I(a){let b="",c="";var d="";for(let f=0;f<a.length;f++){const l=a[f];if(l!==c)if(f&&"h"===
l){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=l}else b+=l;d=f===a.length-1?"":a[f+1];c=l}return b}function Q(a,b){const c=r();if(a)for(let d=0;d<a.length;d++){const f=b?b(a[d]):a[d];c[f]=String.fromCharCode(65E3-a.length+d)}return c}function R(a,b){const c=[];if(a)for(const d in a)if(a.hasOwnProperty(d)){const f=b?b(d):d;c.push(e("(?=.{"+(f.length+3)+",})"+f+"$"),b?b(a[d]):a[d])}return c}function S(a,b){a=a.length-
b.length;return 0>a?1:a?-1:0}function T(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function U(a,b,c){let d=[],f;const l=a.length;if(1<l){a.sort(T);const z=r();let e=a[0],g=e.length,k=0;for(;k<g;)z["@"+e[k++]]=1;let q,p=0,t=0;for(;++t<l;){let m=!1;const n=t===l-1;f=[];e=a[t];g=e.length;for(k=0;k<g;){q=e[k++];var h="@"+q;if(z[h]){const a=z[h];if(a===t){if(n){if(d[p++]=q,b&&p===b)return d}else z[h]=t+1;m=!0}else c&&(h=f[a]||(f[a]=[]),h[h.length]=q)}}if(!m&&!c)break}if(c&&(p=d.length,(t=f.length)&&
(!b||p<b)))for(;t--;)if(q=f[t])for(let a=0,c=q.length;a<c;a++)if(d[p++]=q[a],b&&p===b)return d}else l&&(d=a[0],b&&d.length>b&&(d=d.slice(0,b)));return d}function E(a){return"string"===typeof a}function F(a){return"function"===typeof a}function A(a){return"undefined"===typeof a}function K(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=r();return b}function r(){return Object.create(null)}function V(a,b,c,d){a=u("flexsearch","id"+a,function(){let a,b;self.onmessage=function(c){if(c=c.data)if(c.search){const d=
b.search(c.content,c.threshold?{limit:c.limit,threshold:c.threshold}:c.limit);self.postMessage({id:a,content:c.content,limit:c.limit,result:d})}else c.add?b.add(c.id,c.content):c.update?b.update(c.id,c.content):c.remove?b.remove(c.id):c.clear?b.clear():c.info?(c=b.info(),c.worker=a,console.log(c)):c.register&&(a=c.id,c.options.cache=!1,c.options.async=!1,c.options.worker=!1,b=(new Function(c.register.substring(c.register.indexOf("{")+1,c.register.lastIndexOf("}"))))(),b=new b(c.options))}},function(a){(a=
a.data)&&a.result&&d(a.id,a.content,a.result,a.limit)},b);const f=O.toString();c.id=b;a.postMessage({register:f,options:c,id:b});return a}const w={encode:"icase",b:"forward",u:!1,cache:!1,async:!1,c:!1,threshold:0,depth:0},J={memory:{encode:"extra",b:"strict",threshold:7},speed:{encode:"icase",b:"strict",threshold:7,depth:2},match:{encode:"extra",b:"full"},score:{encode:"extra",b:"strict",threshold:5,depth:4},balance:{encode:"balance",b:"strict",threshold:6,depth:3},fastest:{encode:"icase",b:"strict",
threshold:9,depth:1}},G=[];let P=0;const L=e("\\W+"),M={},N={};(function(){const a=Object.getOwnPropertyNames({}.__proto__),b=r();for(let c=0;c<a.length;c++)b[a[c]]=1;return b})();g.create=function(a){return new g(a)};g.registerMatcher=function(a){for(let b in a)a.hasOwnProperty(b)&&G.push(e(b),a[b]);return this};g.registerEncoder=function(a,b){D[a]=b.bind(D);return this};g.registerLanguage=function(a,b){M[a]=b.filter;N[a]=b.stemmer;return this};g.encode=function(a,b){return D[a](b)};g.prototype.init=
function(a){this.m=[];a||(a=w);let b=a.profile;const c=b?J[b]:{};if(b=a.worker)if("undefined"!==typeof Worker){const c=this,f=parseInt(b,10)||4;c.w=-1;c.o=0;c.h=[];c.B=null;c.i=Array(f);for(let b=0;b<f;b++)c.i[b]=V(c.id,b,a,function(a,b,d,f){if(c.o!==c.c)return c.h=c.h.concat(d),c.o++,f&&c.h.length>=f&&(c.o=c.c),c.B&&c.o===c.c&&(c.cache&&c.j.set(b,c.h),c.B(c.h),c.h=[]),c})}else a.worker=!1,this.i=null;this.b=a.tokenize||c.b||this.b||w.b;this.async="undefined"===typeof Promise||A(b=a.async)?this.async||
w.async:b;this.c=A(b=a.worker)?this.c||w.c:b;this.threshold=A(b=a.threshold)?c.threshold||this.threshold||w.threshold:b;this.depth=A(b=a.depth)?c.depth||this.depth||w.depth:b;this.u=A(b=a.suggest)?this.u||w.u:b;this.s=(b=A(b=a.encode)?c.encode:b)&&D[b]&&D[b].bind(D)||(F(b)?b:this.s||!1);(b=a.matcher)&&this.addMatcher(b);if(b=a.filter)this.filter=Q(M[b]||b,this.s);if(b=a.stemmer)this.stemmer=R(N[b]||b,this.s);this.f=K(10-(this.threshold||0));this.g=r();this.a=r();this.v=!0;this.j=(this.cache=b=A(b=
a.cache)?this.cache||w.cache:b)?new W(b):!1;return this};g.prototype.encode=function(a){a&&G.length&&(a=x(a,G));a&&this.m.length&&(a=x(a,this.m));a&&this.s&&(a=this.s(a));a&&this.stemmer&&(a=x(a,this.stemmer));return a};g.prototype.addMatcher=function(a){const b=this.m;for(const c in a)a.hasOwnProperty(c)&&b.push(e(c),a[c]);return this};g.prototype.add=function(a,b,c,d,f){if(b&&E(b)&&(a||0===a)){var e="@"+a;if(this.a[e]&&!d)return this.update(a,b);if(this.c)return++this.w>=this.i.length&&(this.w=
0),this.i[this.w].postMessage({add:!0,id:a,content:b}),this.a[e]=""+this.w,c&&c(),this;if(!f){if(this.async&&"function"!==typeof importScripts){let f=this;e=new Promise(function(c){setTimeout(function(){f.add(a,b,null,d,!0);f=null;c()})});if(c)e.then(c);else return e;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.b;f=F(c)?c(b):b.split(L);const l=r();l._ctx=r();const p=this.threshold,t=this.depth,z=this.f,C=f.length;for(let b=0;b<C;b++){var h=
f[b];if(h){var g=h.length,m=(C-b)/C,n="";switch(c){case "reverse":case "both":for(var k=g-1;1<=k;k--)n=h[k]+n,y(z,l,n,a,(g-k)/g,m,p);n="";case "forward":for(k=0;k<g;k++)n+=h[k],y(z,l,n,a,1,m,p);break;case "full":for(k=0;k<g;k++){const b=(g-k)/g;for(let c=g;c>k;c--)n=h.substring(k,c),y(z,l,n,a,b,m,p)}break;default:if(g=y(z,l,h,a,1,m,p),t&&1<C&&g>=p)for(g=l._ctx[h]||(l._ctx[h]=r()),h=this.g[h]||(this.g[h]=K(10-(p||0))),m=b-t,n=b+t+1,0>m&&(m=0),n>C&&(n=C);m<n;m++)m!==b&&y(h,g,f[m],a,0,10-(m<b?b-m:m-
b),p)}}}this.a[e]=1;this.v=!1}return this};g.prototype.update=function(a,b,c){this.a["@"+a]&&E(b)&&(this.remove(a),this.add(a,b,c,!0));return this};g.prototype.remove=function(a,b,c){var d="@"+a;if(this.a[d]){if(this.c)return this.i[this.a[d]].postMessage({remove:!0,id:a}),delete this.a[d],b&&b(),this;if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,
null,!0),b(),this}for(b=0;b<10-(this.threshold||0);b++)H(this.f[b],a);this.depth&&H(this.g,a);delete this.a[d];this.v=!1}return this};g.prototype.search=function(a,b,c,d){let f=a,e;var h=[];"object"===typeof a&&((c=a.callback||b)&&(f.callback=null),b=a.limit,e=a.threshold,a=a.query);e||(e=this.threshold||0);F(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(this.c)for(this.B=c,this.o=0,this.h=[],h=0;h<this.c;h++)this.i[h].postMessage({search:!0,limit:b,threshold:e,content:a});else{if(!d){if(this.async&&"function"!==
typeof importScripts){let d=this;a=new Promise(function(a){setTimeout(function(){a(d.search(f,b,null,!0));d=null})});if(c)a.then(c);else return a;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!E(a))return h;f=a;if(this.cache)if(this.v){if(c=this.j.get(a))return c}else this.j.clear(),this.v=!0;f=this.encode(f);if(!f.length)return h;c=this.b;c=F(c)?c(f):f.split(L);d=c.length;var g=!0,m=[],n=r();if(1<d)if(this.depth){var k=!0;var q=c[0];n[q]=1}else c.sort(S);var p;if(!k||(p=this.g)[q])for(let a=
k?1:0;a<d;a++){const b=c[a];if(b){if(!n[b]){const a=[];let c=!1,d=0;if(q=k?p[q]:this.f){let f;for(let h=0;h<10-e;h++)if(f=q[h][b])a[d++]=f,c=!0}if(c)m[m.length]=1<d?a.concat.apply([],a):a[0];else if(!this.u){g=!1;break}n[b]=1}q=b}}else g=!1;g&&(h=U(m,b,this.u));this.cache&&this.j.set(a,h);return h}};g.prototype.info=function(){if(this.c)for(var a=0;a<this.c;a++)this.i[a].postMessage({info:!0,id:this.id});else{var b=0,c=0,d=0;for(var f=0;f<10-(this.threshold||0);f++){a=Object.keys(this.f[f]);for(let h=
0;h<a.length;h++){var e=this.f[f][a[h]].length;b+=1*e+2*a[h].length+4;c+=e;d+=2*a[h].length}}a=Object.keys(this.a);e=a.length;for(f=0;f<e;f++)b+=2*a[f].length+2;return{id:this.id,memory:b,items:e,sequences:c,chars:d,cache:this.cache&&this.cache.l?this.cache.l.length:!1,matcher:G.length+(this.m?this.m.length:0),worker:this.c,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.b}}};g.prototype.clear=function(){return this.destroy().init()};g.prototype.destroy=function(){this.cache&&
(this.j.clear(),this.j=null);this.f=this.g=this.a=null;return this};g.prototype.export=function(){return JSON.stringify([this.f,this.g,this.a])};g.prototype.import=function(a){a=JSON.parse(a);this.f=a[0];this.g=a[1];this.a=a[2]};const D={icase:function(a){return a.toLowerCase()},simple:function(){const a=[e("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",e("[\u00e8\u00e9\u00ea\u00eb]"),"e",e("[\u00ec\u00ed\u00ee\u00ef]"),"i",e("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",e("[\u00f9\u00fa\u00fb\u00fc\u0171]"),
"u",e("[\u00fd\u0177\u00ff]"),"y",e("\u00f1"),"n",e("\u00e7"),"c",e("\u00df"),"s",e(" & ")," and ",e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(b){b=x(b.toLowerCase(),a);return" "!==b?b:""}}(),advanced:function(){const a=[e("ae"),"a",e("ai"),"ei",e("ay"),"ei",e("ey"),"ei",e("oe"),"o",e("ue"),"u",e("ie"),"i",e("sz"),"s",e("zs"),"s",e("sh"),"s",e("ck"),"k",e("cc"),"k",e("dt"),"t",e("ph"),"f",e("pf"),"f",e("ou"),"o",e("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);
2<b.length&&(b=x(b,a));c||1<b.length&&(b=I(b));return b}}(),extra:function(){const a=[e("p"),"b",e("z"),"s",e("[cgq]"),"k",e("n"),"m",e("d"),"t",e("[vw]"),"f",e("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+x(d.substring(1),a))}b=b.join(" ");b=I(b)}return b}}(),balance:function(){const a=[e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(b){return I(x(b.toLowerCase(),
a))}}()},W=function(){function a(a){this.clear();this.A=!0!==a&&a}a.prototype.clear=function(){this.cache=r();this.count=r();this.index=r();this.l=[]};a.prototype.set=function(a,c){if(this.A&&A(this.cache[a])){let b=this.l.length;if(b===this.A){b--;const a=this.l[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.l[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.A&&b){var d=++this.count[a];
const b=this.index;let c=b[a];if(0<c){const e=this.l;for(var f=c;this.count[e[--c]]<=d&&-1!==c;);c++;if(c!==f){for(d=f;d>c;d--)f=e[d-1],e[d]=f,b[f]=d;e[c]=a;b[a]=c}}}return b};return a}();return g}(function(){const u={},B="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;return function(g,v,e,x,y){e=B?URL.createObjectURL(new Blob(["("+e.toString()+")()"],{type:"text/javascript"})):g+".min.js";g+="-"+v;u[g]||(u[g]=[]);u[g][y]=new Worker(e);u[g][y].onmessage=x;return u[g][y]}}()),
this);
