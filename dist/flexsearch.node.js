/*
 FlexSearch v0.5.1
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(h,y,D){let e;(e=D.define)&&e.amd?e([],function(){return y}):(e=D.modules)?e[h.toLowerCase()]=y:"object"===typeof exports?module.exports=y:D[h]=y})("FlexSearch",function(){function h(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:S++;this.init(a,b);D(this,"index",function(){return this.c});D(this,"length",function(){return Object.keys(this.c).length})}function y(a,b){a=a.concat.apply([],a);b&&(E(b)||(z=b.split(":"),1<z.length?b=T:(z=z[0],b=U)),a.sort(b));return a}function D(a,
b,c){Object.defineProperty(a,b,{get:c})}function e(a){return new RegExp(a,"g")}function C(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function H(a,b,c,d,f,l,g,k){if(b[c])return b[c];f=f?(k-(g||k/1.5))*l+(g||k/1.5)*f:l;b[c]=f;f>=g&&(a=a[k-(f+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return f}function L(a,b){if(a){const c=Object.keys(a);for(let d=0,f=c.length;d<f;d++){const f=c[d],g=a[f];if(g)for(let c=0,d=g.length;c<d;c++)if(g[c]===b){1===d?delete a[f]:g.splice(c,1);break}else A(g[c])&&
L(g[c],b)}}}function M(a){let b="",c="";var d="";for(let f=0;f<a.length;f++){const l=a[f];if(l!==c)if(f&&"h"===l){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=l}else b+=l;d=f===a.length-1?"":a[f+1];c=l}return b}function V(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function W(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function U(a,b){a=a[z];b=b[z];return a<b?-1:a>b?1:0}function T(a,b){const c=z.length;for(let d=
0;d<c;d++)a=a[z[d]],b=b[z[d]];return a<b?-1:a>b?1:0}function X(a,b,c,d,f){c=[];let l;const g=a.length;if(1<g){a.sort(W);const u=t();let e=a[0],m=e.length,p=0;for(;p<m;)u["@"+e[p++]]=1;let q,w=0,h=0;for(;++h<g;){let n=!1;const B=h===g-1;l=[];e=a[h];m=e.length;for(p=0;p<m;){q=e[p++];var k="@"+q;if(u[k]){const a=u[k];if(a===h){if(B){if(c[w++]=d?d[q]:q,b&&w===b)return c}else u[k]=h+1;n=!0}else f&&(k=l[a]||(l[a]=[]),k[k.length]=q)}}if(!n&&!f)break}if(f&&(w=c.length,(h=l.length)&&(!b||w<b)))for(;h--;)if(q=
l[h])for(p=0,m=q.length;p<m;p++)if(c[w++]=d?d[q[p]]:q[p],b&&w===b)return c}else if(g)if(d)for(a=a[0],f=a.length,b&&b<f&&(f=b),c=Array(f),b=0;b<f;b++)c[b]=d[a[b]];else c=a[0],b&&c.length>b&&(c=c.slice(0,b));return c}function F(a){return"string"===typeof a}function x(a){return a.constructor===Array}function E(a){return"function"===typeof a}function A(a){return"object"===typeof a}function v(a){return"undefined"===typeof a}function N(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=t();return b}function t(){return Object.create(null)}
const r={encode:"icase",f:"forward",u:!1,cache:!1,async:!1,F:!1,w:!1,a:!1,C:!1,b:9,threshold:0,depth:0},O={memory:{encode:"extra",f:"strict",threshold:0,b:1},speed:{encode:"icase",f:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",f:"full",threshold:1,b:3},score:{encode:"extra",f:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,b:9,depth:1}},K=[];let S=0;const P=e("\\W+"),Q={},R={};h.create=function(a){return new h(a)};
h.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&K.push(e(b),a[b]);return this};h.registerEncoder=function(a,b){G[a]=b.bind(G);return this};h.registerLanguage=function(a,b){Q[a]=b.filter;R[a]=b.stemmer;return this};h.encode=function(a,b){return G[a](b)};h.prototype.init=function(a,b){this.m=[];if(b){var c=b.preset;a=b}else a||(a=r),c=a.preset;b={};F(a)?(b=O[a],a={}):c&&(b=O[c]);this.f=a.tokenize||b.f||this.f||r.f;this.w=a.rtl||this.w||r.w;this.async="undefined"===typeof Promise||
v(c=a.async)?this.async||r.async:c;this.threshold=v(c=a.threshold)?b.threshold||this.threshold||r.threshold:c;this.b=v(c=a.resolution)?c=b.b||this.b||r.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth=v(c=a.depth)?b.depth||this.depth||r.depth:c;this.C=v(c=a.paging)?this.C||r.C:c;this.u=v(c=a.suggest)?this.u||r.u:c;this.o=(c=v(c=a.encode)?b.encode||r.encode:c)&&G[c]&&G[c].bind(G)||(E(c)?c:this.o||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){c=Q[c]||c;b=this.o;var d=t();if(c)for(var f=
0;f<c.length;f++){var l=b?b(c[f]):c[f];d[l]=String.fromCharCode(65E3-c.length+f)}this.filter=c=d}if(c=a.stemmer){var g;b=R[c]||c;d=this.o;f=[];if(b)for(g in b)b.hasOwnProperty(g)&&(l=d?d(g):g,f.push(e("(?=.{"+(l.length+3)+",})"+l+"$"),d?d(b[g]):b[g]));this.stemmer=g=f}this.a=d=(c=a.doc)?c:this.a||r.a;this.h=N(this.b-(this.threshold||0));this.i=t();this.c=t();if(d){this.g=t();a.doc=null;g=d.index=[];b=d.ref={};f=d.field;l=d.tag;x(d.id)||(d.id=d.id.split(":"));if(l){this.A=t();let b=t();if(f)if(F(f))b[f]=
a;else if(x(f))for(let c=0;c<f.length;c++)b[f[c]]=a;else A(f)&&(b=f);x(l)||(d.tag=l=[l]);for(f=0;f<l.length;f++)this.A[l[f]]=t();this.D=l;f=b}if(f){let c;x(f)||(A(f)?(c=f,d.field=f=Object.keys(f)):d.field=f=[f]);for(d=0;d<f.length;d++)x(f[d])||(c&&(a=c[f[d]]),b[f[d]]=d,f[d]=f[d].split(":")),g[d]=new h(a),g[d].g=this.g}}this.v=!0;this.l=(this.cache=c=v(c=a.cache)?this.cache||r.cache:c)?new Y(c):!1;return this};h.prototype.encode=function(a){a&&K.length&&(a=C(a,K));a&&this.m.length&&(a=C(a,this.m));
a&&this.o&&(a=this.o(a));a&&this.stemmer&&(a=C(a,this.stemmer));return a};h.prototype.addMatcher=function(a){const b=this.m;for(const c in a)a.hasOwnProperty(c)&&b.push(e(c),a[c]);return this};h.prototype.add=function(a,b,c,d,f){if(this.a&&A(a))return this.s("add",a,b);if(b&&F(b)&&(a||0===a)){var l="@"+a;if(this.c[l]&&!d)return this.update(a,b);if(!f){if(this.async&&"function"!==typeof importScripts){let f=this;l=new Promise(function(c){setTimeout(function(){f.add(a,b,null,d,!0);f=null;c()})});if(c)l.then(c);
else return l;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.f;f=E(c)?c(b):b.split(P);const p=t();p._ctx=t();const q=this.threshold,h=this.depth,u=this.b,I=this.h,B=f.length,J=this.w;for(let b=0;b<B;b++){var g=f[b];if(g){var k=g.length,e=(J?b+1:B-b)/B,n="";switch(c){case "reverse":case "both":for(var m=k;--m;)n=g[m]+n,H(I,p,n,a,J?1:(k-m)/k,e,q,u-1);n="";case "forward":for(m=0;m<k;m++)n+=g[m],H(I,p,n,a,J?(m+1)/k:1,e,q,u-1);break;case "full":for(m=
0;m<k;m++){const b=(J?m+1:k-m)/k;for(let c=k;c>m;c--)n=g.substring(m,c),H(I,p,n,a,b,e,q,u-1)}break;default:if(k=H(I,p,g,a,1,e,q,u-1),h&&1<B&&k>=q)for(k=p._ctx[g]||(p._ctx[g]=t()),g=this.i[g]||(this.i[g]=N(u-(q||0))),e=b-h,n=b+h+1,0>e&&(e=0),n>B&&(n=B);e<n;e++)e!==b&&H(g,k,f[e],a,0,u-(e<b?b-e:e-b),q,u-1)}}}this.c[l]=1;this.v=!1}return this};h.prototype.s=function(a,b,c){if(x(b))for(let d=0,f=b.length;d<f;d++){if(d===f-1)return this.s(a,b[d],c);this.s(a,b[d])}else{const k=this.a.index;var d=this.a.tag,
f=this.a.id;let n;let m;for(var l=0;l<f.length;l++)n=(n||b)[f[l]];if(d){for(f=0;f<d.length;f++){var g=d[f];var e=g.split(":");for(l=0;l<e.length;l++)m=(m||b)[e[l]];m="@"+m}e=this.A[g];e=e[m]||(e[m]=[])}if("remove"===a){delete this.g[n];for(let a=0,b=k.length;a<b;a++){if(a===b-1)return k[a].remove(n,c);k[a].remove(n)}}f=this.a.field;e&&(e[e.length]=b);for(let e=0,l=f.length;e<l;e++){d=f[e];let m;for(g=0;g<d.length;g++)m=(m||b)[d[g]];this.g[n]=b;d=k[e];g="add"===a?d.add:d.update;if(e===l-1)return g.call(d,
n,m,c);g.call(d,n,m)}}};h.prototype.update=function(a,b,c){if(this.a&&A(a))return this.s("update",a,b);this.c["@"+a]&&F(b)&&(this.remove(a),this.add(a,b,c,!0));return this};h.prototype.remove=function(a,b,c){if(this.a&&A(a))return this.s("remove",a,b);var d="@"+a;if(this.c[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,
!0),b(),this}for(b=0;b<this.b-(this.threshold||0);b++)L(this.h[b],a);this.depth&&L(this.i,a);delete this.c[d];this.v=!1}return this};let z;h.prototype.search=function(a,b,c,d){if(A(b)){if(x(b))for(var f=0;f<b.length;f++)b[f].query=a;else b.query=a;a=b;b=0}let e=a;let g,k=[];if(A(a)&&!x(a)){(c=a.callback||b)&&(e.callback=null);var h=a.where;g=a.sort;b=a.limit;var n=a.threshold;a=a.query}if(this.a){a=this.a.ref;n=this.a.index;if(h=e.field)e.field=null;else if(x(e)){var m=e;h=[];for(var p=0;p<e.length;p++)h[p]=
e[p].field}else h=Object.keys(a);if(A(h)){g&&(e.sort=null);x(h)||(h=[h]);p=h.length;for(var q=0;q<p;q++)m&&(e=m[q]),k[q]=n[a[h[q]]].search(e);return c?c(y(k,g)):this.async?new Promise(function(a){Promise.all(k).then(function(b){a(y(b,g))})}):y(k,g)}return n[a[h]].search(e,c)}n||(n=this.threshold||0);E(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let d=this;a=new Promise(function(a){setTimeout(function(){a(d.search(e,b,null,!0));d=null})});if(c)a.then(c);
else return a;return this}if(c)return c(this.search(e,b,null,!0)),this}if(!a||!F(a))return k;e=a;if(this.cache)if(this.v){if(c=this.l.get(a))return c}else this.l.clear(),this.v=!0;e=this.encode(e);if(!e.length)return k;c=this.f;c=E(c)?c(e):e.split(P);m=c.length;d=!0;f=[];const w=t();if(1<m)if(this.depth){p=!0;var r=c[0];w[r]=1}else c.sort(V);if(!p||(q=this.i)[r]){let a=this.b;for(let b=p?1:0;b<m;b++){const e=c[b];if(e){if(!w[e]){const b=[];let c=!1,g=0;if(r=p?q[r]:this.h){let d;for(let f=0;f<a-n;f++)if(d=
r[f][e])b[g++]=d,c=!0}if(c)f[f.length]=1<g?b.concat.apply([],b):b[0];else if(!this.u){d=!1;break}w[e]=1}r=e}}}else d=!1;d&&(k=X(f,b,void 0,this.g,this.u));h&&(k=this.where(h,null,b,k));g&&(k=y([k],g));this.cache&&this.l.set(a,k);return k};h.prototype.find=function(a,b){return this.where(a,b,1)[0]||null};h.prototype.where=function(a,b,c,d){const f=d||this.g,e=[];let g=0;var k;let h;if("number"===typeof a)return[f[a]];if(F(a)){if(v(b))return[f[a]];if("id"===a)return[f[b]];var n=1;var m=[a.split(":")];
h=!0}else{if(E(a)){b=d||Object.keys(f);c=b.length;for(k=0;k<c;k++)n=d?d[k]:f[b[k]],a(n)&&(e[g++]=n);return e}c||(c=b);k=Object.keys(a);n=k.length;h=!1;if(1===n&&"id"===k[0])return[f[a.id]];if((m=this.D)&&!d)for(var p=0;p<m.length;p++){var q=m[p],r=a[q];if(!v(r)){d=this.A[q]["@"+r];if(0===--n)return d;k.splice(k.indexOf(q),1);delete a[q];break}}m=Array(n);for(p=0;p<n;p++)m[p]=k[p].split(":")}p=d||Object.keys(f);q=p.length;for(r=0;r<q;r++){const l=d?d[r]:f[p[r]];let q=!0;for(let c=0;c<n;c++){h||(b=
a[k[c]]);const d=m[c],f=d.length;let e=l;if(1<f)for(let a=0;a<f;a++)e=e[d[a]];else e=e[d[0]];if(e!==b){q=!1;break}}if(q&&(e[g++]=l,c&&g===c))break}return e};h.prototype.info=function(){let a;let b=0,c=0,d=0;for(var f=0;f<this.b-(this.threshold||0);f++){a=Object.keys(this.h[f]);for(let g=0;g<a.length;g++){var e=this.h[f][a[g]].length;b+=1*e+2*a[g].length+4;c+=e;d+=2*a[g].length}}a=Object.keys(this.c);e=a.length;for(f=0;f<e;f++)b+=2*a[f].length+2;return{id:this.id,memory:b,items:e,sequences:c,chars:d,
cache:this.cache&&this.cache.j?this.cache.j.length:!1,matcher:K.length+(this.m?this.m.length:0),worker:this.F,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.f}};h.prototype.clear=function(){return this.destroy().init()};h.prototype.destroy=function(){this.cache&&(this.l.clear(),this.l=null);this.h=this.i=this.c=null;if(this.a){const a=this.g.index;for(let b=0;b<a.length;b++)a.destroy();this.g=null}return this};h.prototype.export=function(){if(this.a){const a=this.a.index,
b=Array(a.length+1);let c=0;for(;c<a.length;c++)b[c]=[a[c].h,a[c].i,a[c].c];b[c]=this.g;return JSON.stringify(b)}return JSON.stringify([this.h,this.i,this.c])};h.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.index,c=b.length;for(let d=0;d<c;d++){const f=b[d];f.h=a[d][0];f.i=a[d][1];f.c=a[d][2];f.g=a[c]}this.g=a[c]}else this.h=a[0],this.i=a[1],this.c=a[2],this.g=a[3]};const G={icase:function(a){return a.toLowerCase()},simple:function(){const a=[e("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),
"a",e("[\u00e8\u00e9\u00ea\u00eb]"),"e",e("[\u00ec\u00ed\u00ee\u00ef]"),"i",e("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",e("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",e("[\u00fd\u0177\u00ff]"),"y",e("\u00f1"),"n",e("\u00e7"),"c",e("\u00df"),"s",e(" & ")," and ",e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(b){b=C(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[e("ae"),"a",e("ai"),"ei",e("ay"),"ei",e("ey"),"ei",e("oe"),"o",e("ue"),"u",e("ie"),"i",e("sz"),"s",
e("zs"),"s",e("sh"),"s",e("ck"),"k",e("cc"),"k",e("dt"),"t",e("ph"),"f",e("pf"),"f",e("ou"),"o",e("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=C(b,a));c||1<b.length&&(b=M(b));return b}}(),extra:function(){const a=[e("p"),"b",e("z"),"s",e("[cgq]"),"k",e("n"),"m",e("d"),"t",e("[vw]"),"f",e("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+C(d.substring(1),
a))}b=b.join(" ");b=M(b)}return b}}(),balance:function(){const a=[e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(b){return M(C(b.toLowerCase(),a))}}()},Y=function(){function a(a){this.clear();this.B=!0!==a&&a}a.prototype.clear=function(){this.cache=t();this.count=t();this.index=t();this.j=[]};a.prototype.set=function(a,c){if(this.B&&v(this.cache[a])){let b=this.j.length;if(b===this.B){b--;const a=this.j[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=
b;this.j[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.B&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const e=this.j;for(var f=c;this.count[e[--c]]<=d&&-1!==c;);c++;if(c!==f){for(d=f;d>c;d--)f=e[d-1],e[d]=f,b[f]=d;e[c]=a;b[a]=c}}}return b};return a}();return h}(!1),this);
