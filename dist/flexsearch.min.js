/**!
 * FlexSearch.js v0.7.0
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){'use strict';Object.assign||(Object.assign=function(){for(var a=arguments,c=a.length,b=a[0],e=1,d,h,f;e<c;e++){d=a[e];h=Object.keys(d);f=h.length;for(var g=0,k;g<f;g++)k=h[g],b[k]=d[k]}return b});window.requestAnimationFrame||(window.requestAnimationFrame=window.setTimeout);window.cancelAnimationFrame||(window.cancelAnimationFrame=window.clearTimeout);window.Promise||(window.Promise=function(){function a(c){this.b=null;var b=this;c(function(e){b.b&&(b.b(e),b.b=null)})}a.prototype.then=function(c){this.b=c};return a}());function w(a){return"string"===typeof a}function y(a){return a.constructor===Array}function A(a){return"function"===typeof a}function C(a){return"object"===typeof a}function F(a){return"undefined"===typeof a}function aa(a){for(var c=Array(a),b=0;b<a;b++)c[b]=G();return c}function G(){return Object.create(null)}function ba(a,c){for(var b=0,e=c.length;b<e;b+=2)a=a.replace(c[b],c[b+1]);return a};K.prototype.export=function(a){var c=!a||F(a.serialize)||a.serialize;if(this.a){var b=!a||F(a.doc)||a.doc,e=!a||F(a.index)||a.index;a=[];var d=0;if(e)for(e=this.a.keys;d<e.length;d++){var h=this.a.index[e[d]];a[d]=[h.j,h.h,Object.keys(h.g)]}b&&(a[d]=this.m)}else a=[this.j,this.h,Object.keys(this.g)];c&&(a=JSON.stringify(a));return a};
K.prototype.import=function(a,c){if(!c||F(c.serialize)||c.serialize)a=JSON.parse(a);var b={};if(this.a){var e=!c||F(c.doc)||c.doc,d=0;if(!c||F(c.index)||c.index){c=this.a.keys;for(var h=c.length,f=a[0][2];d<f.length;d++)b[f[d]]=1;for(d=0;d<h;d++){f=this.a.index[c[d]];var g=a[d];g&&(f.j=g[0],f.h=g[1],f.g=b)}}e&&(this.m=C(e)?e:a[d])}else{e=a[2];for(d=0;d<e.length;d++)b[e[d]]=1;this.j=a[0];this.h=a[1];this.g=b}};K.prototype.find=function(a,c){return this.where(a,c,1)[0]||null};
K.prototype.where=function(a,c,b,e){var d=this.m,h=[],f=0,g;if(C(a)){b||(b=c);var k=Object.keys(a);var n=k.length;var r=!1;if(1===n&&"id"===k[0])return[d[a.id]];if((g=this.G)&&!e)for(var q=0;q<g.length;q++){var p=g[q],l=a[p];if(!F(l)){var m=this.C[p]["@"+l];if(0===--n)return m;k.splice(k.indexOf(p),1);delete a[p];break}}g=Array(n);for(q=0;q<n;q++)g[q]=k[q].split(":")}else{if(A(a)){c=e||Object.keys(d);b=c.length;for(k=0;k<b;k++)n=d[c[k]],a(n)&&(h[f++]=n);return h}if(F(c))return[d[a]];if("id"===a)return[d[c]];
k=[a];n=1;g=[a.split(":")];r=!0}e=m||e||Object.keys(d);q=e.length;for(p=0;p<q;p++){l=m?e[p]:d[e[p]];for(var v=!0,t=0;t<n;t++){r||(c=a[k[t]]);var u=g[t],x=u.length,z=l;if(1<x)for(var B=0;B<x;B++)z=z[u[B]];else z=z[u[0]];if(z!==c){v=!1;break}}if(v&&(h[f++]=l,b&&f===b))break}return h};function L(a){this.clear();this.l=!0!==a&&a}L.prototype.clear=function(){this.cache=G();this.count=G();this.index=G();this.b=[]};L.prototype.set=function(a,c){if(this.l&&F(this.cache[a])){var b=this.b.length;if(b===this.l){b--;var e=this.b[b];delete this.cache[e];delete this.count[e];delete this.index[e]}this.b[b]=a;this.index[a]=b;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};
L.prototype.get=function(a){var c=this.cache[a];if(this.l&&c){var b=++this.count[a],e=this.index,d=e[a];if(0<d){for(var h=this.b,f=d;this.count[h[--d]]<=b&&-1!==d;);d++;if(d!==f){for(b=f;b>d;b--)f=h[b-1],h[b]=f,e[f]=b;h[d]=a;e[a]=d}}}return c};var Q={},ca="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;function da(a,c,b){var e=ea,d="flexsearch";e=ca?URL.createObjectURL(new Blob(["("+e.toString()+")()"],{type:"text/javascript"})):d+".browser.js";d+="-"+a;Q[d]||(Q[d]=[]);Q[d][b]=new Worker(e);Q[d][b].onmessage=c;return Q[d][b]}
function ea(){var a,c;self.onmessage=function(b){if(b=b.data)if(b.search){var e=c.search(b.content,b.threshold?{limit:b.limit,threshold:b.threshold,where:b.where}:b.limit);self.postMessage({id:a,content:b.content,limit:b.limit,result:e})}else b.add?c.add(b.id,b.content):b.update?c.update(b.id,b.content):b.remove?c.remove(b.id):b.clear?c.clear():b.info?(b=c.info(),b.worker=a,console.log(b)):b.register&&(a=b.id,b.options.cache=!1,b.options.async=!1,b.options.worker=!1,c=(new Function(b.register.substring(b.register.indexOf("{")+
1,b.register.lastIndexOf("}"))))(),c=new c(b.options))}}function fa(a,c,b,e){a=da("id"+a,function(h){(h=h.data)&&h.result&&e(h.id,h.content,h.result,h.limit,h.where,h.cursor,h.suggest)},c);var d=K.toString();b.id=c;a.postMessage({register:d,options:b,id:c});return a}K.prototype.H=function(a,c,b,e){this.v!==this.u&&(this.s=this.s.concat(b),this.v++,e&&this.s.length>=e&&(this.v=this.u),this.v===this.u&&(this.cache&&this.f.set(c,this.s),this.D&&this.D(this.s)));return this};var ha={memory:{encode:"extra",i:"strict",threshold:0,c:1},speed:{encode:"icase",i:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",i:"full",threshold:1,c:3},score:{encode:"extra",i:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",i:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",i:"strict",threshold:8,c:9,depth:1}};var ia={encode:function(a){return a.toLowerCase()},i:"strict",split:/[\W_]+/,cache:!1,async:!1,u:!1,A:!1,a:!1,c:9,threshold:0,depth:0},ja=0,S={};function K(a){if(!(this instanceof K))return new K(a);var c=a&&a.id;this.id=c||0===c?c:ja++;this.init(a);ka(this,"index",function(){return Object.keys(this.g)});ka(this,"length",function(){return this.index.length})}K.registerCharset=function(a,c,b,e){a=S[a]||(S[a]={});a.w=c;a.split=b;a.A=e;return K};
K.registerLanguage=function(a,c,b,e){a=S[a]||(S[a]={});a.filter=c;a.B=b;a.o=e;return K};
K.prototype.init=function(a){this.o=[];var c,b;if(w(a))a=ha[a];else if(c=a.preset)a=Object.assign({},ha[c],a);this.w||(a?a=Object.assign({},ia,a):a=ia);if(a){if(c=a.worker){if("undefined"===typeof da)a.worker=!1,this.F=null;else{var e=parseInt(c,10)||4;this.v=0;this.s=[];this.D=null;this.F=Array(e);for(b=0;b<e;b++)this.F[b]=fa(this.id,b,a,this.H)}this.u=c}b=a.charset;e=a.lang;this.b=a.tokenize;this.split=w(c=b||a.split)?S[c]?S[c].split:new RegExp(c,"g"):c;this.A=w(c=b||a.rtl)?S[c].A:c;this.async=
a.async;this.threshold=a.threshold;this.c=(c=a.resolution)<=this.threshold?this.threshold+1:c;this.depth="strict"===this.b&&a.depth||0;this.w=w(c=b||a.encode)?S[-1===c.indexOf(":")?c+":default":c].encode:c;if(b=c=e||a.matcher){c=w(c)?S[c].o:c;b=Object.keys(c);for(var d=b.length,h=Array(2*d),f=0,g=0;f<d;f++){var k=b[f];h[g++]=new RegExp(k,"g");h[g++]=c[k]}b=h}this.o=b;if(b=c=e||a.filter)for(c=w(c)?S[c].filter:c,b=G(),d=0;d<c.length;d++)b[c[d]]=1;this.filter=b;if(e=c=e||a.stemmer){e=w(c)?S[c].B:c;b=
Object.keys(e);d=b.length;h=Array(2*d);for(g=f=0;f<d;f++)k=b[f],h[g++]=new RegExp(k+"(?!\\b)"+k+"(\\b)","g"),h[g++]=e[k];e=h}this.B=e;(this.a=b=(c=a.doc)&&la(c))&&(a.doc=null)}this.j=aa(this.c-(this.threshold||0));this.h=G();this.g={};if(b){this.m=G();c=b.index={};e=b.keys=[];d=b.field;h=b.tag;f=b.store;y(b.id)||(b.id=b.id.split(":"));if(f){g=G();if(w(f))g[f]=1;else if(y(f))for(k=0;k<f.length;k++)g[f[k]]=1;else C(f)&&(g=f);b.store=g}if(h){this.C=G();f=G();if(d)if(w(d))f[d]=a;else if(y(d))for(g=0;g<
d.length;g++)f[d[g]]=a;else C(d)&&(f=d);y(h)||(b.tag=h=[h]);for(d=0;d<h.length;d++)this.C[h[d]]=G();this.G=h;d=f}if(d){if(!y(d))if(C(d)){var n=d;b.field=d=Object.keys(d)}else b.field=d=[d];for(b=0;b<d.length;b++)h=d[b],y(h)||(n&&(a=n[h]),e[b]=h,d[b]=h.split(":")),c[h]=new K(a)}}if(c=a.cache)this.l=!0,this.f=new L(c);return this};function la(a){var c=G(),b;for(b in a)if(a.hasOwnProperty(b)){var e=a[b];c[b]=y(e)?e.slice(0):C(e)?la(e):e}return c}
K.prototype.add=function(a,c,b,e,d){if(this.a&&C(a))return T(this,"add",a,c);if(c&&w(c)&&(a||0===a)){if(this.g[a]&&!e)return this.update(a,c);if(!d){if(this.async&&"function"!==typeof importScripts){var h=this;d=new Promise(function(B){setTimeout(function(){h.add(a,c,null,e,!0);h=null;B()})});if(b)d.then(b);else return d;return this}if(b)return this.add(a,c,null,e,!0),b(),this}c=this.encode(c);if(!c.length)return this;b=this.i(c);d=G();d._ctx=G();for(var f=b.length,g=this.threshold,k=this.depth,n=
this.c,r=this.j,q=this.A,p=0;p<f;p++){var l=b[p];if(l){var m=l.length,v=(q?p+1:f-p)/f,t="";switch(this.b){case "reverse":case "both":for(var u=m;--u;)t=l[u]+t,U(r,d,t,a,q?1:(m-u)/m,v,g,n-1);t="";case "forward":for(u=0;u<m;u++)t+=l[u],U(r,d,t,a,q?(u+1)/m:1,v,g,n-1);break;case "full":for(u=0;u<m;u++)for(var x=(q?u+1:m-u)/m,z=m;z>u;z--)t=l.substring(u,z),U(r,d,t,a,x,v,g,n-1);break;default:if(m=U(r,d,l,a,1,v,g,n-1),k&&1<f&&m>=g)for(m=d._ctx[l]||(d._ctx[l]=G()),l=this.h[l]||(this.h[l]=aa(n-(g||0))),v=
p-k,t=p+k+1,0>v&&(v=0),t>f&&(t=f);v<t;v++)v!==p&&U(l,m,b[v],a,0,n-(v<p?p-v:v-p),g,n-1)}}}this.g[a]=1;this.l=!1}return this};
function T(a,c,b,e){if(y(b)){var d=b.length;if(d--){for(var h=0;h<d;h++)T(a,c,b[h]);return T(a,c,b[d],e)}}else{var f=a.a.index,g=a.a.keys,k=a.a.tag;h=a.a.store;var n;var r=a.a.id;d=b;for(var q=0;q<r.length;q++)d=d[r[q]];if("remove"===c&&(delete a.m[d],r=g.length,r--)){for(a=0;a<r;a++)f[g[a]].remove(d);return f[g[r]].remove(d,e)}if(k){for(n=0;n<k.length;n++){var p=k[n];var l=b;r=p.split(":");for(q=0;q<r.length;q++)l=l[r[q]];l="@"+l}n=a.C[p];n=n[l]||(n[l]=[])}r=a.a.field;k=0;for(p=r.length;k<p;k++){q=
r[k];l=b;for(var m=0;m<q.length;m++)l=l[q[m]];q=f[g[k]];"add"===c?q.add(d,l,k===p-1&&e):q.update(d,l,k===p-1&&e)}if(h){e=Object.keys(h);c=G();for(f=0;f<e.length;f++)if(g=e[f],h[g])for(g=g.split(":"),k=r=void 0,p=0;p<g.length;p++)l=g[p],r=(r||b)[l],k=(k||c)[l]=r;b=c}n&&(n[n.length]=b);a.m[d]=b}return a}K.prototype.update=function(a,c,b){if(this.a&&C(a))return T(this,"update",a,c);this.g[a]&&w(c)&&(this.remove(a),this.add(a,c,b,!0));return this};
K.prototype.remove=function(a,c,b){if(this.a&&C(a))return T(this,"remove",a,c);if(this.g[a]){if(!b){if(this.async&&"function"!==typeof importScripts){var e=this;b=new Promise(function(d){setTimeout(function(){e.remove(a,null,!0);e=null;d()})});if(c)b.then(c);else return b;return this}if(c)return this.remove(a,null,!0),c(),this}for(c=0;c<this.c-(this.threshold||0);c++)V(this.j[c],a);this.depth&&V(this.h,a);delete this.g[a];this.l=!1}return this};var W;
function X(a,c,b,e,d,h,f,g,k,n,r){e=ma(e,g?0:h,k,f,b,n,r);if(k){k=e.page;var q=e.next;e=e.result}if(g)e=a.where(g,null,h,e);else{b=e;e=a.m;h=b.length;f=Array(h);for(g=0;g<h;g++)f[g]=e[b[g]];e=f}d&&(A(d)||(W=d.split(":"),1<W.length?d=na:(W=W[0],d=oa)),e.sort(d));e=Y(k,q,e);a.f&&a.f.set(c,e);return e}
K.prototype.search=function(a,c,b,e){if(C(c)){if(y(c))for(var d=0;d<c.length;d++)c[d].query=a;else c.query=a;a=c;c=1E3}else c&&A(c)?(b=c,c=1E3):c||0===c||(c=1E3);var h=[],f=a;if(C(a)&&!y(a)){b||(b=a.callback)&&(f.callback=null);var g=a.sort;var k=a.page;c=a.limit;var n=a.threshold;var r=a.suggest;a=a.query}if(this.a){n=this.a.index;var q=f.where,p=f.bool||"or",l=f.field,m=p,v,t;if(l)y(l)||(l=[l]);else if(y(f)){var u=f;l=[];m=[];for(var x=0;x<f.length;x++)e=f[x],d=e.bool||p,l[x]=e.field,m[x]=d,"not"===
d?v=!0:"and"===d&&(t=!0)}else l=this.a.keys;p=l.length;for(x=0;x<p;x++)u&&(f=u[x]),k&&!w(f)&&(f.page=null,f.limit=0),h[x]=n[l[x]].search(f,0);if(b)return b(X(this,a,m,h,g,c,r,q,k,t,v));if(this.async){var z=this;return new Promise(function(Z){Promise.all(h).then(function(pa){Z(X(z,a,m,pa,g,c,r,q,k,t,v))})})}return X(this,a,m,h,g,c,r,q,k,t,v)}n||(n=this.threshold||0);if(!e){if(this.async&&"function"!==typeof importScripts){var B=this;n=new Promise(function(Z){setTimeout(function(){Z(B.search(f,c,null,
!0));B=null})});if(b)n.then(b);else return n;return this}if(b)return b(this.search(f,c,null,!0)),this}if(!a||!w(a))return h;f=a;if(this.f)if(this.l){if(b=this.f.get(a))return b}else this.f.clear(),this.l=!0;f=this.encode(f);if(!f.length)return h;b=this.i(f);u=b.length;e=!0;d=[];var N=G(),O=0;1<u&&(this.depth?p=!0:b.sort(qa));if(!p||(x=this.h))for(var R=this.c;O<u;O++){var D=b[O];if(D){if(p){if(!l)if(x[D])l=D,N[D]=1;else if(!r)return h;if(r&&O===u-1&&!d.length)p=!1,D=l||D,N[D]=0;else if(!l)continue}if(!N[D]){var E=
[],M=!1,H=0,I=p?x[l]:this.j;if(I)for(var P=void 0,J=0;J<R-n;J++)if(P=I[J]&&I[J][D])E[H++]=P,M=!0;if(M)l=D,d[d.length]=1<H?E.concat.apply([],E):E[0];else if(!r){e=!1;break}N[D]=1}}}else e=!1;e&&(h=ma(d,c,k,r));this.f&&this.f.set(a,h);return h};K.prototype.info=function(){return{id:this.id,items:this.length,matcher:this.o.length,worker:this.u,threshold:this.threshold,depth:this.depth,resolution:this.c,contextual:this.depth&&"strict"===this.b}};K.prototype.clear=function(){return this.destroy().init()};
K.prototype.destroy=function(){this.f&&(this.f.clear(),this.f=null);this.j=this.h=this.g=null;if(this.a){for(var a=this.a.keys,c=0;c<a.length;c++)this.a.index[a[c]].destroy();this.a=this.m=null}return this};function ka(a,c,b){Object.defineProperty(a,c,{get:b})}function U(a,c,b,e,d,h,f,g){if(c[b])return c[b];d=d?(g-(f||g/1.5))*h+(f||g/1.5)*d:h;c[b]=d;d>=f&&(a=a[g-(d+.5>>0)],a=a[b]||(a[b]=[]),a[a.length]=e);return d}
function V(a,c){if(a)for(var b=Object.keys(a),e=0,d=b.length;e<d;e++){var h=b[e],f=a[h];if(f)for(var g=0,k=f.length;g<k;g++)if(f[g]===c){1===k?delete a[h]:f.splice(g,1);break}else C(f[g])&&V(f[g],c)}}K.prototype.encode=function(a){a&&this.w&&(a=this.w(a));a&&this.o.length&&(a=ba(a,this.o));a&&this.B&&(a=ba(a,this.B));return a};
K.prototype.i=function(a){a=y(a)?a:A(this.b)?this.b(a):a.split(this.split);if(this.filter){for(var c=this.filter,b=a.length,e=A(c),d=[],h=0,f=0;h<b;h++){var g=a[h];g&&(e&&c(g)||!e&&!c[g])&&(d[f++]=g)}a=d}return a};function qa(a,c){return c.length-a.length}function oa(a,c){return a[W]-c[W]}function na(a,c){for(var b=W.length,e=0;e<b;e++)a=a[W[e]],c=c[W[e]];return a-c}function Y(a,c,b){return a?{page:a,next:c?""+c:null,result:b}:b}
function ma(a,c,b,e,d,h,f){var g=[];if(!0===b){b="0";var k=""}else k=b&&b.split(":");var n=a.length;if(1<n){var r=G(),q=[],p,l=0,m,v=!0,t=0,u;if(k)if(2===k.length){var x=k;k=!1}else k=u=parseInt(k[0],10);if(f){for(p=G();l<n;l++)if("not"===d[l]){var z=a[l];var B=z.length;for(m=0;m<B;m++)p["@"+z[m]]=1}else var N=l+1;if(F(N))return Y(b,J,g);l=0}else var O=w(d)&&d;for(var R;l<n;l++){var D=l===(N||n)-1;if(!O||!l)if((m=O||d&&d[l])&&"and"!==m)if("or"===m)R=!1;else continue;else R=h=!0;z=a[l];if(B=z.length){if(v)if(H){var E=
H.length;for(m=0;m<E;m++){v=H[m];var M="@"+v;f&&p[M]||(r[M]=1,h||(g[t++]=v))}var H=null;v=!1}else{H=z;continue}M=!1;for(m=0;m<B;m++){E=z[m];var I="@"+E,P=h?r[I]||0:l;if(!(!P&&!e||f&&p[I]||!h&&r[I]))if(P===l){if(D){if(!u||--u<t)if(g[t++]=E,c&&t===c)return Y(b,t+(k||0),g)}else r[I]=l+1;M=!0}else e&&(I=q[P]||(q[P]=[]),I[I.length]=E)}if(R&&!M&&!e)break}else if(R&&!e)return Y(b,J,z)}if(H)if(l=H.length,f)for(m=k?parseInt(k,10):0;m<l;m++)a=H[m],p["@"+a]||(g[t++]=a);else g=H;if(e)for(t=g.length,x?(l=parseInt(x[0],
10)+1,m=parseInt(x[1],10)+1):(l=q.length,m=0);l--;)if(E=q[l]){for(B=E.length;m<B;m++)if(e=E[m],!f||!p["@"+e])if(g[t++]=e,c&&t===c)return Y(b,l+":"+m,g);m=0}}else!n||d&&"not"===d[0]||(g=a[0],k&&(k=parseInt(k[0],10)));if(c){f=g.length;k&&k>f&&(k=0);k=k||0;var J=k+c;J<f?g=g.slice(k,J):(J=0,k&&(g=g.slice(k)))}return Y(b,J,g)};(function(){var a=this||window,c;(c=a.define)&&c.amd?c([],function(){return K}):"object"===typeof a.exports?a.module.exports=K:a.FlexSearch=K})();}).call(this);
